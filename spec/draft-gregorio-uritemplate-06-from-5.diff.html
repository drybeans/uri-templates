<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"> 
<!-- Generated by rfcdiff 1.34: rfcdiff  --> 
<!-- <!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional" > -->
<!-- System: Darwin simak 10.8.0 Darwin Kernel Version 10.8.0: Tue Jun  7 16:33:36 PDT 2011; root:xnu-1504.15.3~1/RELEASE_I386 i386 --> 
<!-- Using awk: /usr/local/bin/gawk: GNU Awk 3.1.8 --> 
<!-- Using diff: /usr/bin/diff: diff (GNU diffutils) 2.8.1 --> 
<!-- Using wdiff: /usr/local/bin/wdiff: wdiff (GNU wdiff) 0.6.5 --> 
<html> 
<head> 
  <meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1" /> 
  <meta http-equiv="Content-Style-Type" content="text/css" /> 
  <title>Diff: draft-gregorio-uritemplate-05.txt - draft-gregorio-uritemplate-06.txt</title> 
  <style type="text/css"> 
    body    { margin: 0.4ex; margin-right: auto; } 
    tr      { } 
    td      { white-space: pre; font-family: monospace; vertical-align: top; font-size: 0.86em;} 
    th      { font-size: 0.86em; } 
    .small  { font-size: 0.6em; font-style: italic; font-family: Verdana, Helvetica, sans-serif; } 
    .left   { background-color: #EEE; } 
    .right  { background-color: #FFF; } 
    .diff   { background-color: #CCF; } 
    .lblock { background-color: #BFB; } 
    .rblock { background-color: #FF8; } 
    .insert { background-color: #8FF; } 
    .delete { background-color: #ACF; } 
    .void   { background-color: #FFB; } 
    .cont   { background-color: #EEE; } 
    .linebr { background-color: #AAA; } 
    .lineno { color: red; background-color: #FFF; font-size: 0.7em; text-align: right; padding: 0 2px; } 
    .elipsis{ background-color: #AAA; } 
    .left .cont { background-color: #DDD; } 
    .right .cont { background-color: #EEE; } 
    .lblock .cont { background-color: #9D9; } 
    .rblock .cont { background-color: #DD6; } 
    .insert .cont { background-color: #0DD; } 
    .delete .cont { background-color: #8AD; } 
    .stats, .stats td, .stats th { background-color: #EEE; padding: 2px 0; } 
  </style> 
</head> 
<body > 
  <table border="0" cellpadding="0" cellspacing="0"> 
  <tr bgcolor="orange"><th></th><th>&nbsp;draft-gregorio-uritemplate-05.txt&nbsp;</th><th> </th><th>&nbsp;draft-gregorio-uritemplate-06.txt&nbsp;</th><th></th></tr> 
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">Network Working Group                                        J. Gregorio</td><td> </td><td class="right">Network Working Group                                        J. Gregorio</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">Internet-Draft                                                    Google</td><td> </td><td class="right">Internet-Draft                                                    Google</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">Intended status: Standards Track                        R. Fielding, Ed.</td><td> </td><td class="right">Intended status: Standards Track                        R. Fielding, Ed.</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0001" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">Expires: <span class="delete">January 12, 2012 </span>                                         Adobe</td><td> </td><td class="rblock">Expires: <span class="insert">February 21, 2012</span>                                         Adobe</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                                                               M. Hadley</td><td> </td><td class="right">                                                               M. Hadley</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                                                                  Oracle</td><td> </td><td class="right">                                                                  Oracle</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                                                           M. Nottingham</td><td> </td><td class="right">                                                           M. Nottingham</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                                                              D. Orchard</td><td> </td><td class="right">                                                              D. Orchard</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0002" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">                                                            <span class="delete">Jul 11</span>, 2011</td><td> </td><td class="rblock">                                                            <span class="insert">Aug 20</span>, 2011</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                              URI Template</td><td> </td><td class="right">                              URI Template</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0003" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">                     draft-gregorio-uritemplate-0<span class="delete">5</span></td><td> </td><td class="rblock">                     draft-gregorio-uritemplate-0<span class="insert">6</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">Abstract</td><td> </td><td class="right">Abstract</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">   A URI Template is a compact sequence of characters for describing a</td><td> </td><td class="right">   A URI Template is a compact sequence of characters for describing a</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">   range of Uniform Resource Identifiers through variable expansion.</td><td> </td><td class="right">   range of Uniform Resource Identifiers through variable expansion.</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">   This specification defines the URI Template syntax and the process</td><td> </td><td class="right">   This specification defines the URI Template syntax and the process</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">   for expanding a URI Template into a URI reference, along with</td><td> </td><td class="right">   for expanding a URI Template into a URI reference, along with</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">   guidelines for the use of URI Templates on the Internet.</td><td> </td><td class="right">   guidelines for the use of URI Templates on the Internet.</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">Editorial Note (to be removed by RFC Editor)</td><td> </td><td class="right">Editorial Note (to be removed by RFC Editor)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr bgcolor="gray" ><td></td><th><a name="part-l2" /><small>skipping to change at</small><em> page 1, line 44</em></th><th> </th><th><a name="part-r2" /><small>skipping to change at</small><em> page 1, line 44</em></th><td></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">   Internet-Drafts are working documents of the Internet Engineering</td><td> </td><td class="right">   Internet-Drafts are working documents of the Internet Engineering</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">   Task Force (IETF).  Note that other groups may also distribute</td><td> </td><td class="right">   Task Force (IETF).  Note that other groups may also distribute</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">   working documents as Internet-Drafts.  The list of current Internet-</td><td> </td><td class="right">   working documents as Internet-Drafts.  The list of current Internet-</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">   Drafts is at http://datatracker.ietf.org/drafts/current/.</td><td> </td><td class="right">   Drafts is at http://datatracker.ietf.org/drafts/current/.</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">   Internet-Drafts are draft documents valid for a maximum of six months</td><td> </td><td class="right">   Internet-Drafts are draft documents valid for a maximum of six months</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">   and may be updated, replaced, or obsoleted by other documents at any</td><td> </td><td class="right">   and may be updated, replaced, or obsoleted by other documents at any</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">   time.  It is inappropriate to use Internet-Drafts as reference</td><td> </td><td class="right">   time.  It is inappropriate to use Internet-Drafts as reference</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">   material or to cite them other than as "work in progress."</td><td> </td><td class="right">   material or to cite them other than as "work in progress."</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0004" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">   This Internet-Draft will expire on <span class="delete">January 12</span>, 2012.</td><td> </td><td class="rblock">   This Internet-Draft will expire on <span class="insert">February 21</span>, 2012.</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">Copyright Notice</td><td> </td><td class="right">Copyright Notice</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">   Copyright (c) 2011 IETF Trust and the persons identified as the</td><td> </td><td class="right">   Copyright (c) 2011 IETF Trust and the persons identified as the</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">   document authors.  All rights reserved.</td><td> </td><td class="right">   document authors.  All rights reserved.</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">   This document is subject to BCP 78 and the IETF Trust's Legal</td><td> </td><td class="right">   This document is subject to BCP 78 and the IETF Trust's Legal</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">   Provisions Relating to IETF Documents</td><td> </td><td class="right">   Provisions Relating to IETF Documents</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">   (http://trustee.ietf.org/license-info) in effect on the date of</td><td> </td><td class="right">   (http://trustee.ietf.org/license-info) in effect on the date of</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">   publication of this document.  Please review these documents</td><td> </td><td class="right">   publication of this document.  Please review these documents</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr bgcolor="gray" ><td></td><th><a name="part-l3" /><small>skipping to change at</small><em> page 3, line 12</em></th><th> </th><th><a name="part-r3" /><small>skipping to change at</small><em> page 3, line 12</em></th><td></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">   it for publication as an RFC or to translate it into languages other</td><td> </td><td class="right">   it for publication as an RFC or to translate it into languages other</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">   than English.</td><td> </td><td class="right">   than English.</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">Table of Contents</td><td> </td><td class="right">Table of Contents</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">   1.  Introduction . . . . . . . . . . . . . . . . . . . . . . . . .  4</td><td> </td><td class="right">   1.  Introduction . . . . . . . . . . . . . . . . . . . . . . . . .  4</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">     1.1.  Overview . . . . . . . . . . . . . . . . . . . . . . . . .  4</td><td> </td><td class="right">     1.1.  Overview . . . . . . . . . . . . . . . . . . . . . . . . .  4</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">     1.2.  Levels and Expression Types  . . . . . . . . . . . . . . .  6</td><td> </td><td class="right">     1.2.  Levels and Expression Types  . . . . . . . . . . . . . . .  6</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">     1.3.  Design Considerations  . . . . . . . . . . . . . . . . . . 10</td><td> </td><td class="right">     1.3.  Design Considerations  . . . . . . . . . . . . . . . . . . 10</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">     1.4.  Limitations  . . . . . . . . . . . . . . . . . . . . . . . 11</td><td> </td><td class="right">     1.4.  Limitations  . . . . . . . . . . . . . . . . . . . . . . . 11</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0005" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">     1.5.  Notational Conventions . . . . . . . . . . . . . . . . . . <span class="delete">11</span></td><td> </td><td class="rblock">     1.5.  Notational Conventions . . . . . . . . . . . . . . . . . . <span class="insert">12</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">     1.6.  Character Encoding and Unicode Normalization . . . . . . . <span class="delete">12</span></td><td> </td><td class="rblock">     1.6.  Character Encoding and Unicode Normalization . . . . . . . <span class="insert">13</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">   2.  Syntax . . . . . . . . . . . . . . . . . . . . . . . . . . . . <span class="delete">13</span></td><td> </td><td class="rblock">   2.  Syntax . . . . . . . . . . . . . . . . . . . . . . . . . . . . <span class="insert">14</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">     2.1.  Literals . . . . . . . . . . . . . . . . . . . . . . . . . 14</td><td> </td><td class="right">     2.1.  Literals . . . . . . . . . . . . . . . . . . . . . . . . . 14</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">     2.2.  Expressions  . . . . . . . . . . . . . . . . . . . . . . . 14</td><td> </td><td class="right">     2.2.  Expressions  . . . . . . . . . . . . . . . . . . . . . . . 14</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">     2.3.  Variables  . . . . . . . . . . . . . . . . . . . . . . . . 15</td><td> </td><td class="right">     2.3.  Variables  . . . . . . . . . . . . . . . . . . . . . . . . 15</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">     2.4.  Value Modifiers  . . . . . . . . . . . . . . . . . . . . . 16</td><td> </td><td class="right">     2.4.  Value Modifiers  . . . . . . . . . . . . . . . . . . . . . 16</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       2.4.1.  Prefix Values  . . . . . . . . . . . . . . . . . . . . 16</td><td> </td><td class="right">       2.4.1.  Prefix Values  . . . . . . . . . . . . . . . . . . . . 16</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0006" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       2.4.2.  <span class="delete">Component</span> Values . . . . . . . . . . . . . . . . . . . 17</td><td> </td><td class="rblock">       2.4.2.  <span class="insert">Composite</span> Values . . . . . . . . . . . . . . . . . . . 17</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">     <span class="delete">2.5.  Value Defaults . . . . . . . . . . . . . . . . . . . . . . 17</span></td><td> </td><td class="rblock">   3.  Expansion  . . . . . . . . . . . . . . . . . . . . . . . . . . <span class="insert">18</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">   3.  Expansion  . . . . . . . . . . . . . . . . . . . . . . . . . . <span class="delete">19</span></td><td> </td><td class="rblock">     3.1.  Literal Expansion  . . . . . . . . . . . . . . . . . . . . <span class="insert">18</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">     3.1.  Literal Expansion  . . . . . . . . . . . . . . . . . . . . <span class="delete">19</span></td><td> </td><td class="rblock">     3.2.  Expression Expansion . . . . . . . . . . . . . . . . . . . <span class="insert">18</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">     3.2.  Expression Expansion . . . . . . . . . . . . . . . . . . . <span class="delete">20</span></td><td> </td><td class="rblock">       3.2.1.  Variable Expansion . . . . . . . . . . . . . <span class="insert">. . . . . 19</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       3.2.1.  <span class="delete">Undefined</span> Variable Expansion . . . . . . . . . . . . . <span class="delete">20</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       3.2.2.  Simple String Expansion: {var} . . . . . . . . . . . . 20</td><td> </td><td class="right">       3.2.2.  Simple String Expansion: {var} . . . . . . . . . . . . 20</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       3.2.3.  Reserved expansion: {+var} . . . . . . . . . . . . . . 21</td><td> </td><td class="right">       3.2.3.  Reserved expansion: {+var} . . . . . . . . . . . . . . 21</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0007" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       3.2.4.  Label expansion with dot-prefix: {.var}  . . . . . . . <span class="delete">22</span></td><td> </td><td class="rblock">       3.2.4.  <span class="insert">Fragment expansion: {#var} . . . . . . . . . . . . . . 22</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">       3.2.5.</span>  Path segment expansion: {/var} . . . . . . . . . . . . 23</td><td> </td><td class="rblock"><span class="insert">       3.2.5.</span>  Label expansion with dot-prefix: {.var}  . . . . . . . <span class="insert">23</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       <span class="delete">3.2.6.</span>  Path-style parameter expansion: {;var} . . . . . . . . <span class="delete">25</span></td><td> </td><td class="rblock"><span class="insert">       3.2.6.</span>  Path segment expansion: {/var} . . . . . . . . . . . . 23</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">       3.2.7.</span>  Form-style query expansion: {?var} . . . . . . . . . . 25</td><td> </td><td class="rblock">       <span class="insert">3.2.7.</span>  Path-style parameter expansion: {;var} . . . . . . . . <span class="insert">24</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">   4.  Security Considerations  . . . . . . . . . . . . . . . . . . . <span class="delete">25</span></td><td> </td><td class="rblock"><span class="insert">       3.2.8.</span>  Form-style query expansion: {?var} . . . . . . . . . . 25</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">   5.  IANA Considerations  . . . . . . . . . . . . . . . . . . . . . <span class="delete">25</span></td><td> </td><td class="rblock">       <span class="insert">3.2.9.  Form-style query continuation: {&amp;var}  . . . . . . . . 25</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">   6.  Acknowledgments  . . . . . . . . . . . . . . . . . . . . . . . <span class="delete">25</span></td><td> </td><td class="rblock">   4.  Security Considerations  . . . . . . . . . . . . . . . . . . . <span class="insert">26</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">   7.  Normative References . . . . . . . . . . . . . . . . . . . . . <span class="delete">25</span></td><td> </td><td class="rblock">   5.  IANA Considerations  . . . . . . . . . . . . . . . . . . . . . <span class="insert">26</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">   Appendix A.  <span class="delete">Example URI Template Parser</span> . . . . . . . . . . . . . <span class="delete">26</span></td><td> </td><td class="rblock">   6.  Acknowledgments  . . . . . . . . . . . . . . . . . . . . . . . <span class="insert">26</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">   Appendix B.  Revision History (to be removed by RFC Editor)</span>  . . . 27</td><td> </td><td class="rblock">   7.  Normative References . . . . . . . . . . . . . . . . . . . . . <span class="insert">26</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">   Authors' Addresses . . . . . . . . . . . . . . . . . . . . . . . . <span class="delete">27</span></td><td> </td><td class="rblock">   Appendix A.  <span class="insert">Implementation Hints</span>  . . . . . . . . . . . . . . . . 27</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock">   Authors' Addresses . . . . . . . . . . . . . . . . . . . . . . . . <span class="insert">29</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">1.  Introduction</td><td> </td><td class="right">1.  Introduction</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">1.1.  Overview</td><td> </td><td class="right">1.1.  Overview</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">   A Uniform Resource Identifier (URI) [RFC3986] is often used to</td><td> </td><td class="right">   A Uniform Resource Identifier (URI) [RFC3986] is often used to</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">   identify a specific resource within a common space of similar</td><td> </td><td class="right">   identify a specific resource within a common space of similar</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">   resources.  For example, personal web spaces are often delegated</td><td> </td><td class="right">   resources.  For example, personal web spaces are often delegated</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">   using a common pattern, such as</td><td> </td><td class="right">   using a common pattern, such as</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr bgcolor="gray" ><td></td><th><a name="part-l4" /><small>skipping to change at</small><em> page 4, line 27</em></th><th> </th><th><a name="part-r4" /><small>skipping to change at</small><em> page 4, line 27</em></th><td></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">   or a set of dictionary entries might be grouped in a hierarchy by the</td><td> </td><td class="right">   or a set of dictionary entries might be grouped in a hierarchy by the</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">   first letter of the term, as in</td><td> </td><td class="right">   first letter of the term, as in</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">     http://example.com/dictionary/c/cat</td><td> </td><td class="right">     http://example.com/dictionary/c/cat</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">     http://example.com/dictionary/d/dog</td><td> </td><td class="right">     http://example.com/dictionary/d/dog</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">   or a service interface might be invoked with various user input in a</td><td> </td><td class="right">   or a service interface might be invoked with various user input in a</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">   common pattern, as in</td><td> </td><td class="right">   common pattern, as in</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">     http://example.com/search?q=cat&amp;lang=en</td><td> </td><td class="right">     http://example.com/search?q=cat&amp;lang=en</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0008" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">     http://example.com/search?q=<span class="delete">dog</span>&amp;lang=fr</td><td> </td><td class="rblock">     http://example.com/search?q=<span class="insert">chien</span>&amp;lang=fr</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">   URI Templates provide a mechanism for abstracting a space of resource</td><td> </td><td class="right">   URI Templates provide a mechanism for abstracting a space of resource</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">   identifiers such that the variable parts can be easily identified and</td><td> </td><td class="right">   identifiers such that the variable parts can be easily identified and</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">   described.  URI templates can have many uses, including discovery of</td><td> </td><td class="right">   described.  URI templates can have many uses, including discovery of</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">   available services, configuring resource mappings, defining computed</td><td> </td><td class="right">   available services, configuring resource mappings, defining computed</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">   links, specifying interfaces, and other forms of programmatic</td><td> </td><td class="right">   links, specifying interfaces, and other forms of programmatic</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">   interaction with resources.  For example, the above resources could</td><td> </td><td class="right">   interaction with resources.  For example, the above resources could</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">   be described by the following URI templates:</td><td> </td><td class="right">   be described by the following URI templates:</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">     http://example.com/~{username}/</td><td> </td><td class="right">     http://example.com/~{username}/</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr bgcolor="gray" ><td></td><th><a name="part-l5" /><small>skipping to change at</small><em> page 5, line 6</em></th><th> </th><th><a name="part-r5" /><small>skipping to change at</small><em> page 5, line 6</em></th><td></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">   o  expansion - The string result obtained from a template expression</td><td> </td><td class="right">   o  expansion - The string result obtained from a template expression</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">      after processing it according to its expression type, list of</td><td> </td><td class="right">      after processing it according to its expression type, list of</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">      variable names, and value modifiers, as defined in Section 3.</td><td> </td><td class="right">      variable names, and value modifiers, as defined in Section 3.</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">   o  template processor - A program or library that, given a URI</td><td> </td><td class="right">   o  template processor - A program or library that, given a URI</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">      Template and a set of variables with values, transforms the</td><td> </td><td class="right">      Template and a set of variables with values, transforms the</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">      template string into a URI-reference by parsing the template for</td><td> </td><td class="right">      template string into a URI-reference by parsing the template for</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">      expressions and substituting each one with its corresponding</td><td> </td><td class="right">      expressions and substituting each one with its corresponding</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">      expansion.</td><td> </td><td class="right">      expansion.</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">   A URI Template provides both a structural description of a URI space</td><td> </td><td class="right">   A URI Template provides both a structural description of a URI space</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0009" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">   and, when variable values are provided, <span class="delete">a simple instruction</span> on how</td><td> </td><td class="rblock">   and, when variable values are provided, <span class="insert">machine-readable instructions</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">   to construct a URI corresponding to those values.  A URI Template is</td><td> </td><td class="rblock">   on how to construct a URI corresponding to those values.  A URI</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">   transformed into a URI-reference by replacing each delimited</td><td> </td><td class="rblock">   Template is transformed into a URI-reference by replacing each</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">   expression with its value as defined by the expression type and the</td><td> </td><td class="rblock">   delimited expression with its value as defined by the expression type</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">   values of variables named within the expression.  The expression</td><td> </td><td class="rblock">   and the values of variables named within the expression.  The</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">   types range from simple string expansion to multiple key=value lists.</td><td> </td><td class="rblock">   expression types range from simple string expansion to multiple</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">   The expansions are based on the URI generic syntax, allowing an</td><td> </td><td class="rblock">   key=value lists.  The expansions are based on the URI generic syntax,</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">   implementation to process any URI Template without knowing the</td><td> </td><td class="rblock">   allowing an implementation to process any URI Template without</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">   scheme-specific requirements of every possible resulting URI.</td><td> </td><td class="rblock">   knowing the scheme-specific requirements of every possible resulting</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock">   URI.</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">   For example, the following URI Template includes a form-style</td><td> </td><td class="right">   For example, the following URI Template includes a form-style</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">   parameter expression, as indicated by the "?" operator appearing</td><td> </td><td class="right">   parameter expression, as indicated by the "?" operator appearing</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">   before the variable names.</td><td> </td><td class="right">   before the variable names.</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">     http://www.example.com/foo{?query,number}</td><td> </td><td class="right">     http://www.example.com/foo{?query,number}</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0010" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">   <span class="delete">Each template expression describes, in a machine-readable manner, how</span></td><td> </td><td class="rblock">   <span class="insert">The</span> expansion process for <span class="insert">expressions</span> beginning with the <span class="insert">question-</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">   a URI is to be constructed.  In this example, the</span> expansion process</td><td> </td><td class="rblock"><span class="insert">   mark</span> ("?") operator follows the same pattern as form-style interfaces</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">   for <span class="delete">templates</span> beginning with the <span class="delete">question-mark</span> ("?") operator follows</td><td> </td><td class="rblock">   on the World Wide <span class="insert">Web:</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">   the same pattern as form-style interfaces on the World Wide <span class="delete">Web.</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">     http://www.example.com/foo{?query,number}</td><td> </td><td class="right">     http://www.example.com/foo{?query,number}</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                               \_____________/</td><td> </td><td class="right">                               \_____________/</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                                  |</td><td> </td><td class="right">                                  |</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                                  |</td><td> </td><td class="right">                                  |</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">             For each defined variable in [ 'query', 'number' ],</td><td> </td><td class="right">             For each defined variable in [ 'query', 'number' ],</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">             substitute "?" if it is the first substitution or "&amp;"</td><td> </td><td class="right">             substitute "?" if it is the first substitution or "&amp;"</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">             thereafter, followed by the variable name, '=', and the</td><td> </td><td class="right">             thereafter, followed by the variable name, '=', and the</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">             variable's value.</td><td> </td><td class="right">             variable's value.</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr bgcolor="gray" ><td></td><th><a name="part-l6" /><small>skipping to change at</small><em> page 6, line 11</em></th><th> </th><th><a name="part-r6" /><small>skipping to change at</small><em> page 6, line 11</em></th><td></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">   or if both variables are undefined, then it would be</td><td> </td><td class="right">   or if both variables are undefined, then it would be</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">     http://www.example.com/foo</td><td> </td><td class="right">     http://www.example.com/foo</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">   A URI Template may be provided in absolute form, as in the examples</td><td> </td><td class="right">   A URI Template may be provided in absolute form, as in the examples</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">   above, or in relative form.  A template MUST be expanded before the</td><td> </td><td class="right">   above, or in relative form.  A template MUST be expanded before the</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">   resulting reference can be resolved from relative to absolute form.</td><td> </td><td class="right">   resulting reference can be resolved from relative to absolute form.</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">   Although the URI syntax is used for the result, the template string</td><td> </td><td class="right">   Although the URI syntax is used for the result, the template string</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">   is allowed to contain the broader set of characters that can be found</td><td> </td><td class="right">   is allowed to contain the broader set of characters that can be found</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">   in IRI references [RFC3987].  A URI Template is therefore also an IRI</td><td> </td><td class="right">   in IRI references [RFC3987].  A URI Template is therefore also an IRI</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0011" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">   template, and the result of template processing can be <span class="delete">rendered as</span> an</td><td> </td><td class="rblock">   template, and the result of template processing can be <span class="insert">transformed to</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">   IRI by <span class="delete">transforming each of</span> the <span class="delete">pct-encoded sequences to their</span></td><td> </td><td class="rblock">   an IRI by <span class="insert">following</span> the <span class="insert">process defined</span> in <span class="insert">Section 3.2 of [RFC3987].</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">   corresponding Unicode character if that character is not</span> in <span class="delete">the</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">   reserved set.</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">1.2.  Levels and Expression Types</td><td> </td><td class="right">1.2.  Levels and Expression Types</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">   URI Templates are similar to a macro language with a fixed set of</td><td> </td><td class="right">   URI Templates are similar to a macro language with a fixed set of</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">   macro definitions: the expression type determines the expansion</td><td> </td><td class="right">   macro definitions: the expression type determines the expansion</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">   process.  The default expression type is simple string expansion,</td><td> </td><td class="right">   process.  The default expression type is simple string expansion,</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">   wherein a single named variable is replaced by its value as a string</td><td> </td><td class="right">   wherein a single named variable is replaced by its value as a string</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">   after UTF-8 encoding the characters and then pct-encoding any octets</td><td> </td><td class="right">   after UTF-8 encoding the characters and then pct-encoding any octets</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">   that are not in the unreserved set.</td><td> </td><td class="right">   that are not in the unreserved set.</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr bgcolor="gray" ><td></td><th><a name="part-l7" /><small>skipping to change at</small><em> page 6, line 44</em></th><th> </th><th><a name="part-r7" /><small>skipping to change at</small><em> page 6, line 42</em></th><td></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">   |             empty := ""                                         |</td><td> </td><td class="right">   |             empty := ""                                         |</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">   |             undef := null                                       |</td><td> </td><td class="right">   |             undef := null                                       |</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">   |                                                                 |</td><td> </td><td class="right">   |                                                                 |</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">   |-----------------------------------------------------------------|</td><td> </td><td class="right">   |-----------------------------------------------------------------|</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">   | Op       Expression            Expansion                        |</td><td> </td><td class="right">   | Op       Expression            Expansion                        |</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">   |-----------------------------------------------------------------|</td><td> </td><td class="right">   |-----------------------------------------------------------------|</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">   |     | Simple string expansion                       (Sec 3.2.2) |</td><td> </td><td class="right">   |     | Simple string expansion                       (Sec 3.2.2) |</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">   |     |                                                           |</td><td> </td><td class="right">   |     |                                                           |</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">   |     |    {var}                 value                            |</td><td> </td><td class="right">   |     |    {var}                 value                            |</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">   |     |    {hello}               Hello%20World%21                 |</td><td> </td><td class="right">   |     |    {hello}               Hello%20World%21                 |</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0012" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">   <span class="delete">|     |    O{empty}X             OX                               |</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">   |     |    O{undef}X             OX                               |</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">   `-----------------------------------------------------------------'</td><td> </td><td class="right">   `-----------------------------------------------------------------'</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0013" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">   Level 2 templates add the <span class="delete">ability to define a default string, which</span></td><td> </td><td class="rblock">   Level 2 templates add the plus ("+") <span class="insert">operator,</span> for expansion <span class="insert">of</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">   is substituted if the variable is undefined, and the</span> plus ("+")</td><td> </td><td class="rblock">   values that are allowed to include reserved <span class="insert">characters, and the</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">   <span class="delete">operator</span> for expansion values that are allowed to include reserved</td><td> </td><td class="rblock"><span class="insert">   crosshatch ("#") operator for expansion of fragment identifiers.</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">   <span class="delete">characters.</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">   .-----------------------------------------------------------------.</td><td> </td><td class="right">   .-----------------------------------------------------------------.</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">   | Level 2 examples, with variables having values of               |</td><td> </td><td class="right">   | Level 2 examples, with variables having values of               |</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">   |                                                                 |</td><td> </td><td class="right">   |                                                                 |</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">   |             var   := "value"                                    |</td><td> </td><td class="right">   |             var   := "value"                                    |</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">   |             hello := "Hello World!"                             |</td><td> </td><td class="right">   |             hello := "Hello World!"                             |</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0014" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">   <span class="delete">|             empty := ""                                         |</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">   |             undef := null                                       |</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">   |             path  := "/foo/bar"                                 |</td><td> </td><td class="right">   |             path  := "/foo/bar"                                 |</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">   |                                                                 |</td><td> </td><td class="right">   |                                                                 |</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">   |-----------------------------------------------------------------|</td><td> </td><td class="right">   |-----------------------------------------------------------------|</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">   | Op       Expression            Expansion                        |</td><td> </td><td class="right">   | Op       Expression            Expansion                        |</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">   |-----------------------------------------------------------------|</td><td> </td><td class="right">   |-----------------------------------------------------------------|</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0015" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">   |     <span class="delete">| String expansion with defaults                (Sec 3.2.2) |</span></td><td> </td><td class="rblock">   |  +  | Reserved <span class="insert">string</span> expansion                     (Sec 3.2.3) |</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">   |     |                                                           |</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">   |     |    {var|default}         value                            |</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">   |     |    O{empty|default}X     OX                               |</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">   |     |    O{undef|default}X     OdefaultX                        |</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">   |     |                                                           |</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">   |-----+-----------------------------------------------------------|</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">   |</span>  +  | Reserved expansion <span class="delete">with defaults</span>              (Sec 3.2.3) |</td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">   |     |                                                           |</td><td> </td><td class="right">   |     |                                                           |</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">   |     |    {+var}                value                            |</td><td> </td><td class="right">   |     |    {+var}                value                            |</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">   |     |    {+hello}              Hello%20World!                   |</td><td> </td><td class="right">   |     |    {+hello}              Hello%20World!                   |</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">   |     |    {+path}/here          /foo/bar/here                    |</td><td> </td><td class="right">   |     |    {+path}/here          /foo/bar/here                    |</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">   |     |    here?ref={+path}      here?ref=/foo/bar                |</td><td> </td><td class="right">   |     |    here?ref={+path}      here?ref=/foo/bar                |</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0016" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">   |     |    <span class="delete">up{+path}{x}/here     up/foo/bar1024/here              |</span></td><td> </td><td class="rblock">   <span class="insert">|-----+-----------------------------------------------------------|</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">   |     |    up{+empty|/1}/here    up/here                          |</span></td><td> </td><td class="rblock">   |  <span class="insert">#</span>  | <span class="insert">Fragment expansion, crosshatch-prefixed       (Sec 3.2.4)</span> |</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">   |     |    up{+undef|/1}/here    up/1/here</span>                        |</td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">   |     |                                                           |</td><td> </td><td class="right">   |     |                                                           |</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0017" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock">   <span class="insert">|     |    X{#var}               X#value                          |</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">   |     |    X{#hello}             X#Hello%20World!                 |</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">   `-----------------------------------------------------------------'</td><td> </td><td class="right">   `-----------------------------------------------------------------'</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">   Level 3 templates add more complex operators for lists of comma-</td><td> </td><td class="right">   Level 3 templates add more complex operators for lists of comma-</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">   separated values, dot-prefixed labels, slash-prefixed path segments,</td><td> </td><td class="right">   separated values, dot-prefixed labels, slash-prefixed path segments,</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">   semicolon-prefixed path parameters, and the forms-style construction</td><td> </td><td class="right">   semicolon-prefixed path parameters, and the forms-style construction</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">   of a query syntax consisting of key=value pairs that are separated by</td><td> </td><td class="right">   of a query syntax consisting of key=value pairs that are separated by</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">   an ampersand character.</td><td> </td><td class="right">   an ampersand character.</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">   .-----------------------------------------------------------------.</td><td> </td><td class="right">   .-----------------------------------------------------------------.</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">   | Level 3 examples, with variables having values of               |</td><td> </td><td class="right">   | Level 3 examples, with variables having values of               |</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">   |                                                                 |</td><td> </td><td class="right">   |                                                                 |</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">   |             var   := "value"                                    |</td><td> </td><td class="right">   |             var   := "value"                                    |</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">   |             hello := "Hello World!"                             |</td><td> </td><td class="right">   |             hello := "Hello World!"                             |</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">   |             empty := ""                                         |</td><td> </td><td class="right">   |             empty := ""                                         |</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0018" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">   |             undef := null                                       |</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">   |             path  := "/foo/bar"                                 |</td><td> </td><td class="right">   |             path  := "/foo/bar"                                 |</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">   |             x     := "1024"                                     |</td><td> </td><td class="right">   |             x     := "1024"                                     |</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">   |             y     := "768"                                      |</td><td> </td><td class="right">   |             y     := "768"                                      |</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">   |                                                                 |</td><td> </td><td class="right">   |                                                                 |</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">   |-----------------------------------------------------------------|</td><td> </td><td class="right">   |-----------------------------------------------------------------|</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">   | Op       Expression            Expansion                        |</td><td> </td><td class="right">   | Op       Expression            Expansion                        |</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">   |-----------------------------------------------------------------|</td><td> </td><td class="right">   |-----------------------------------------------------------------|</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">   |     | String expansion with multiple variables      (Sec 3.2.2) |</td><td> </td><td class="right">   |     | String expansion with multiple variables      (Sec 3.2.2) |</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">   |     |                                                           |</td><td> </td><td class="right">   |     |                                                           |</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0019" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">   |     |    <span class="delete">{x,y}                 1024,768    </span>                     |</td><td> </td><td class="rblock">   |     |    <span class="insert">map?{x,y}             map?1024,768</span>                     |</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">   |     |    {x,hello,y}           1024,Hello%20World%21,768        |</td><td> </td><td class="right">   |     |    {x,hello,y}           1024,Hello%20World%21,768        |</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0020" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">   <span class="delete">|     |    ?{x,empty}            ?1024,                           |</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">   |     |    ?{x,undef}            ?1024                            |</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">   |     |    ?{undef,y}            ?768                             |</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">   |     |    ?{x,undef|0}          ?1024,0                          |</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">   |     |                                                           |</td><td> </td><td class="right">   |     |                                                           |</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">   |-----+-----------------------------------------------------------|</td><td> </td><td class="right">   |-----+-----------------------------------------------------------|</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">   |  +  | Reserved expansion with multiple variables    (Sec 3.2.3) |</td><td> </td><td class="right">   |  +  | Reserved expansion with multiple variables    (Sec 3.2.3) |</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">   |     |                                                           |</td><td> </td><td class="right">   |     |                                                           |</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">   |     |    {+x,hello,y}          1024,Hello%20World!,768          |</td><td> </td><td class="right">   |     |    {+x,hello,y}          1024,Hello%20World!,768          |</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0021" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">   |     |    {+path,x}/here        /foo/bar<span class="delete">/</span>1024/here               |</td><td> </td><td class="rblock">   |     |    {+path,x}/here        /foo/bar<span class="insert">,</span>1024/here               |</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">   |     |                                                           |</td><td> </td><td class="right">   |     |                                                           |</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">   |-----+-----------------------------------------------------------|</td><td> </td><td class="right">   |-----+-----------------------------------------------------------|</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0022" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">   |  .  | Label expansion, dot-prefixed                 (Sec <span class="delete">3.2.4)</span> |</td><td> </td><td class="rblock">   |  <span class="insert">#  | Fragment expansion with multiple variables    (Sec 3.2.4) |</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">   |     |                                                           |</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">   |     |    {#x,hello,y}          #1024,Hello%20World!,768         |</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">   |     |    {#path,x}/here        #/foo/bar,1024/here              |</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">   |     |                                                           |</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">   |-----+-----------------------------------------------------------|</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">   |</span>  .  | Label expansion, dot-prefixed                 (Sec <span class="insert">3.2.5)</span> |</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">   |     |                                                           |</td><td> </td><td class="right">   |     |                                                           |</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">   |     |    X{.var}               X.value                          |</td><td> </td><td class="right">   |     |    X{.var}               X.value                          |</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0023" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">   |     |    <span class="delete">X{.empty}             X.                               |</span></td><td> </td><td class="rblock">   |     |    <span class="insert">X{.x,y}               X.1024.768</span>                       |</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">   |     |    X{.undef}             X</span>                                |</td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">   |     |                                                           |</td><td> </td><td class="right">   |     |                                                           |</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">   |-----+-----------------------------------------------------------|</td><td> </td><td class="right">   |-----+-----------------------------------------------------------|</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0024" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">   |  /  | Path segments, slash-prefixed                 (Sec 3.2.<span class="delete">5</span>) |</td><td> </td><td class="rblock">   |  /  | Path segments, slash-prefixed                 (Sec 3.2.<span class="insert">6</span>) |</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">   |     |                                                           |</td><td> </td><td class="right">   |     |                                                           |</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">   |     |    {/var}                /value                           |</td><td> </td><td class="right">   |     |    {/var}                /value                           |</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0025" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">   |     |    <span class="delete">{/var,empty}          /value/                          |</span></td><td> </td><td class="rblock">   |     |    <span class="insert">{/var,x}/here         /value/1024/here</span>                 |</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">   |     |    {/var,undef}          /value</span>                           |</td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">   |     |                                                           |</td><td> </td><td class="right">   |     |                                                           |</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">   |-----+-----------------------------------------------------------|</td><td> </td><td class="right">   |-----+-----------------------------------------------------------|</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0026" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">   |  ;  | Path-style parameters, semicolon-prefixed     (Sec 3.2.<span class="delete">6</span>) |</td><td> </td><td class="rblock">   |  ;  | Path-style parameters, semicolon-prefixed     (Sec 3.2.<span class="insert">7</span>) |</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">   |     |                                                           |</td><td> </td><td class="right">   |     |                                                           |</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">   |     |    {;x,y}                ;x=1024;y=768                    |</td><td> </td><td class="right">   |     |    {;x,y}                ;x=1024;y=768                    |</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">   |     |    {;x,y,empty}          ;x=1024;y=768;empty              |</td><td> </td><td class="right">   |     |    {;x,y,empty}          ;x=1024;y=768;empty              |</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0027" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">   |     |    {;x,y,undef}          ;x=1024;y=768                    |</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">   |     |                                                           |</td><td> </td><td class="right">   |     |                                                           |</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">   |-----+-----------------------------------------------------------|</td><td> </td><td class="right">   |-----+-----------------------------------------------------------|</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0028" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">   |  ?  | Form-style query, ampersand-separated         (Sec 3.2.<span class="delete">7</span>) |</td><td> </td><td class="rblock">   |  ?  | Form-style query, ampersand-separated         (Sec 3.2.<span class="insert">8</span>) |</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">   |     |                                                           |</td><td> </td><td class="right">   |     |                                                           |</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">   |     |    {?x,y}                ?x=1024&amp;y=768                    |</td><td> </td><td class="right">   |     |    {?x,y}                ?x=1024&amp;y=768                    |</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">   |     |    {?x,y,empty}          ?x=1024&amp;y=768&amp;empty=             |</td><td> </td><td class="right">   |     |    {?x,y,empty}          ?x=1024&amp;y=768&amp;empty=             |</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0029" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">   |     |    <span class="delete">{?x,y,undef}          ?x=1024&amp;y=768</span>                    |</td><td> </td><td class="rblock">   |     |                                                           <span class="insert">|</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">   |-----+-----------------------------------------------------------|</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">   |  &amp;  | Form-style query continuation                 (Sec 3.2.9) |</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">   |     |                                                           |</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">   |     |    ?fixed=yes{&amp;x}        ?fixed=yes&amp;x=1024                |</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">   |     |    {&amp;x,y,empty}          &amp;x=1024&amp;y=768&amp;empty=</span>             |</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">   |     |                                                           |</td><td> </td><td class="right">   |     |                                                           |</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">   `-----------------------------------------------------------------'</td><td> </td><td class="right">   `-----------------------------------------------------------------'</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0030" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">                                                                         </span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">   Finally, Level 4 templates add the ability to specify value modifiers</td><td> </td><td class="right">   Finally, Level 4 templates add the ability to specify value modifiers</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">   as a suffix to the variable name.  The prefix modifier (":")</td><td> </td><td class="right">   as a suffix to the variable name.  The prefix modifier (":")</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">   indicates that only a limited number of characters from the beginning</td><td> </td><td class="right">   indicates that only a limited number of characters from the beginning</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">   of the value are used by the expansion.  The explode ("*") modifier</td><td> </td><td class="right">   of the value are used by the expansion.  The explode ("*") modifier</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0031" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">   <span class="delete">tells</span> the <span class="delete">expansion process</span> to <span class="delete">treat the value</span> as a <span class="delete">multivalued</span></td><td> </td><td class="rblock">   <span class="insert">indicates that</span> the <span class="insert">variable is</span> to <span class="insert">be treated</span> as a <span class="insert">composite value,</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">   structure ---</span> a list of <span class="delete">values</span> or <span class="delete">key=value pairs -- rather than</span> as a</td><td> </td><td class="rblock"><span class="insert">   consisting of either</span> a list of <span class="insert">names</span> or <span class="insert">an associative array of</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">   <span class="delete">single string.</span></td><td> </td><td class="rblock"><span class="insert">   (name, value) pairs, that is expanded</span> as <span class="insert">if each member were</span> a</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock">   <span class="insert">separate variable.</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">   .-----------------------------------------------------------------.</td><td> </td><td class="right">   .-----------------------------------------------------------------.</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">   | Level 4 examples, with variables having values of               |</td><td> </td><td class="right">   | Level 4 examples, with variables having values of               |</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">   |                                                                 |</td><td> </td><td class="right">   |                                                                 |</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">   |             var   := "value"                                    |</td><td> </td><td class="right">   |             var   := "value"                                    |</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">   |             hello := "Hello World!"                             |</td><td> </td><td class="right">   |             hello := "Hello World!"                             |</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">   |             path  := "/foo/bar"                                 |</td><td> </td><td class="right">   |             path  := "/foo/bar"                                 |</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">   |             list  := [ "red", "green", "blue" ]                 |</td><td> </td><td class="right">   |             list  := [ "red", "green", "blue" ]                 |</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0032" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">   |             keys  := <span class="delete">[("semi", ";"), ("dot", ".")]</span>              |</td><td> </td><td class="rblock">   |             keys  := <span class="insert">[("semi",";"),("dot","."),("comma",",")]   |</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">   |             empty_keys  := []</span>                                   |</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">   |                                                                 |</td><td> </td><td class="right">   |                                                                 |</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">   | Op       Expression            Expansion                        |</td><td> </td><td class="right">   | Op       Expression            Expansion                        |</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">   |-----------------------------------------------------------------|</td><td> </td><td class="right">   |-----------------------------------------------------------------|</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">   |     | String expansion with value modifiers         (Sec 3.2.2) |</td><td> </td><td class="right">   |     | String expansion with value modifiers         (Sec 3.2.2) |</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">   |     |                                                           |</td><td> </td><td class="right">   |     |                                                           |</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">   |     |    {var:3}               val                              |</td><td> </td><td class="right">   |     |    {var:3}               val                              |</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">   |     |    {var:30}              value                            |</td><td> </td><td class="right">   |     |    {var:30}              value                            |</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">   |     |    {list}                red,green,blue                   |</td><td> </td><td class="right">   |     |    {list}                red,green,blue                   |</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">   |     |    {list*}               red,green,blue                   |</td><td> </td><td class="right">   |     |    {list*}               red,green,blue                   |</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">   |     |    {keys}                semi,%3B,dot,.,comma,%2C         |</td><td> </td><td class="right">   |     |    {keys}                semi,%3B,dot,.,comma,%2C         |</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr bgcolor="gray" ><td></td><th><a name="part-l8" /><small>skipping to change at</small><em> page 9, line 42</em></th><th> </th><th><a name="part-r8" /><small>skipping to change at</small><em> page 9, line 39</em></th><td></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">   |-----+-----------------------------------------------------------|</td><td> </td><td class="right">   |-----+-----------------------------------------------------------|</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">   |  +  | Reserved expansion with value modifiers       (Sec 3.2.3) |</td><td> </td><td class="right">   |  +  | Reserved expansion with value modifiers       (Sec 3.2.3) |</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">   |     |                                                           |</td><td> </td><td class="right">   |     |                                                           |</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">   |     |    {+path:6}/here        /foo/b/here                      |</td><td> </td><td class="right">   |     |    {+path:6}/here        /foo/b/here                      |</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">   |     |    {+list}               red,green,blue                   |</td><td> </td><td class="right">   |     |    {+list}               red,green,blue                   |</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">   |     |    {+list*}              red,green,blue                   |</td><td> </td><td class="right">   |     |    {+list*}              red,green,blue                   |</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">   |     |    {+keys}               semi,;,dot,.,comma,,             |</td><td> </td><td class="right">   |     |    {+keys}               semi,;,dot,.,comma,,             |</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">   |     |    {+keys*}              semi=;,dot=.,comma=,             |</td><td> </td><td class="right">   |     |    {+keys*}              semi=;,dot=.,comma=,             |</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">   |     |                                                           |</td><td> </td><td class="right">   |     |                                                           |</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">   |-----+-----------------------------------------------------------|</td><td> </td><td class="right">   |-----+-----------------------------------------------------------|</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0033" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">   |  .  | Label expansion, dot-prefixed                 (Sec <span class="delete">3.2.4)</span> |</td><td> </td><td class="rblock">   |  <span class="insert">#  | Fragment expansion with value modifiers       (Sec 3.2.4) |</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">   |     |                                                           |</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">   |     |    {#path:6}/here        #/foo/b/here                     |</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">   |     |    {#list}               #red,green,blue                  |</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">   |     |    {#list*}              #red,green,blue                  |</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">   |     |    {#keys}               #semi,;,dot,.,comma,,            |</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">   |     |    {#keys*}              #semi=;,dot=.,comma=,            |</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">   |     |                                                           |</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">   |-----+-----------------------------------------------------------|</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">   |</span>  .  | Label expansion, dot-prefixed                 (Sec <span class="insert">3.2.5)</span> |</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">   |     |                                                           |</td><td> </td><td class="right">   |     |                                                           |</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">   |     |    X{.var:3}             X.val                            |</td><td> </td><td class="right">   |     |    X{.var:3}             X.val                            |</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">   |     |    X{.list}              X.red,green,blue                 |</td><td> </td><td class="right">   |     |    X{.list}              X.red,green,blue                 |</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">   |     |    X{.list*}             X.red.green.blue                 |</td><td> </td><td class="right">   |     |    X{.list*}             X.red.green.blue                 |</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">   |     |    X{.keys}              X.semi,%3B,dot,.,comma,%2C       |</td><td> </td><td class="right">   |     |    X{.keys}              X.semi,%3B,dot,.,comma,%2C       |</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">   |     |    X{.keys*}             X.semi=%3B.dot=..comma=%2C       |</td><td> </td><td class="right">   |     |    X{.keys*}             X.semi=%3B.dot=..comma=%2C       |</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">   |     |                                                           |</td><td> </td><td class="right">   |     |                                                           |</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">   |-----+-----------------------------------------------------------|</td><td> </td><td class="right">   |-----+-----------------------------------------------------------|</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0034" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">   |  /  | Path segments, slash-prefixed                 (Sec 3.2.<span class="delete">5</span>) |</td><td> </td><td class="rblock">   |  /  | Path segments, slash-prefixed                 (Sec 3.2.<span class="insert">6</span>) |</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">   |     |                                                           |</td><td> </td><td class="right">   |     |                                                           |</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">   |     |    {/var:1,var}          /v/value                         |</td><td> </td><td class="right">   |     |    {/var:1,var}          /v/value                         |</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">   |     |    {/list}               /red,green,blue                  |</td><td> </td><td class="right">   |     |    {/list}               /red,green,blue                  |</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">   |     |    {/list*}              /red/green/blue                  |</td><td> </td><td class="right">   |     |    {/list*}              /red/green/blue                  |</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">   |     |    {/list*,path:4}       /red/green/blue/%2Ffoo           |</td><td> </td><td class="right">   |     |    {/list*,path:4}       /red/green/blue/%2Ffoo           |</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">   |     |    {/keys}               /semi,%3B,dot,.,comma,%2C        |</td><td> </td><td class="right">   |     |    {/keys}               /semi,%3B,dot,.,comma,%2C        |</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">   |     |    {/keys*}              /semi=%3B/dot=./comma=%2C        |</td><td> </td><td class="right">   |     |    {/keys*}              /semi=%3B/dot=./comma=%2C        |</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">   |     |                                                           |</td><td> </td><td class="right">   |     |                                                           |</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">   |-----+-----------------------------------------------------------|</td><td> </td><td class="right">   |-----+-----------------------------------------------------------|</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0035" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">   |  ;  | Path-style parameters, semicolon-prefixed     (Sec 3.2.<span class="delete">6</span>) |</td><td> </td><td class="rblock">   |  ;  | Path-style parameters, semicolon-prefixed     (Sec 3.2.<span class="insert">7</span>) |</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">   |     |                                                           |</td><td> </td><td class="right">   |     |                                                           |</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">   |     |    {;hello:5}            ;hello=Hello                     |</td><td> </td><td class="right">   |     |    {;hello:5}            ;hello=Hello                     |</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0036" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">   |     |    {;list}               ;<span class="delete">red,green,blue     </span>             |</td><td> </td><td class="rblock">   |     |    {;list}               ;<span class="insert">list=red,green,blue</span>             |</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">   |     |    {;list*}              ;red;green;blue                  |</td><td> </td><td class="right">   |     |    {;list*}              ;red;green;blue                  |</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0037" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">   |     |    {;keys}               ;<span class="delete">semi,%3B,dot,.,comma,%2C     </span>   |</td><td> </td><td class="rblock">   |     |    {;keys}               ;<span class="insert">keys=semi,%3B,dot,.,comma,%2C</span>   |</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">   |     |    {;keys*}              ;semi=%3B;dot=.;comma=%2C        |</td><td> </td><td class="right">   |     |    {;keys*}              ;semi=%3B;dot=.;comma=%2C        |</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">   |     |                                                           |</td><td> </td><td class="right">   |     |                                                           |</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">   |-----+-----------------------------------------------------------|</td><td> </td><td class="right">   |-----+-----------------------------------------------------------|</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0038" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">   |  ?  | Form-style query, ampersand-separated         (Sec 3.2.<span class="delete">7</span>) |</td><td> </td><td class="rblock">   |  ?  | Form-style query, ampersand-separated         (Sec 3.2.<span class="insert">8</span>) |</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">   |     |                                                           |</td><td> </td><td class="right">   |     |                                                           |</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">   |     |    {?var:3}              ?var=val                         |</td><td> </td><td class="right">   |     |    {?var:3}              ?var=val                         |</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">   |     |    {?list}               ?list=red,green,blue             |</td><td> </td><td class="right">   |     |    {?list}               ?list=red,green,blue             |</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">   |     |    {?list*}              ?list=red&amp;list=green&amp;list=blue   |</td><td> </td><td class="right">   |     |    {?list*}              ?list=red&amp;list=green&amp;list=blue   |</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">   |     |    {?keys}               ?keys=semi,%3B,dot,.,comma,%2C   |</td><td> </td><td class="right">   |     |    {?keys}               ?keys=semi,%3B,dot,.,comma,%2C   |</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">   |     |    {?keys*}              ?semi=%3B&amp;dot=.&amp;comma=%2C        |</td><td> </td><td class="right">   |     |    {?keys*}              ?semi=%3B&amp;dot=.&amp;comma=%2C        |</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">   |     |                                                           |</td><td> </td><td class="right">   |     |                                                           |</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0039" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock">   <span class="insert">|-----+-----------------------------------------------------------|</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">   |  &amp;  | Form-style query continuation                 (Sec 3.2.9) |</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">   |     |                                                           |</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">   |     |    {&amp;var:3}              &amp;var=val                         |</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">   |     |    {&amp;list}               &amp;list=red,green,blue             |</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">   |     |    {&amp;list*}              &amp;list=red&amp;list=green&amp;list=blue   |</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">   |     |    {&amp;keys}               &amp;keys=semi,%3B,dot,.,comma,%2C   |</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">   |     |    {&amp;keys*}              &amp;semi=%3B&amp;dot=.&amp;comma=%2C        |</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">   |     |                                                           |</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">   `-----------------------------------------------------------------'</td><td> </td><td class="right">   `-----------------------------------------------------------------'</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">1.3.  Design Considerations</td><td> </td><td class="right">1.3.  Design Considerations</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">   Mechanisms similar to URI Templates have been defined within several</td><td> </td><td class="right">   Mechanisms similar to URI Templates have been defined within several</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">   specifications, including WSDL, WADL and OpenSearch.  This</td><td> </td><td class="right">   specifications, including WSDL, WADL and OpenSearch.  This</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">   specification extends and formally defines the syntax so that URI</td><td> </td><td class="right">   specification extends and formally defines the syntax so that URI</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">   Templates can be used consistently across multiple Internet</td><td> </td><td class="right">   Templates can be used consistently across multiple Internet</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">   applications and within Internet message fields, while at the same</td><td> </td><td class="right">   applications and within Internet message fields, while at the same</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">   time retaining compatibility with those earlier definitions.</td><td> </td><td class="right">   time retaining compatibility with those earlier definitions.</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">   The URI Template syntax has been designed to carefully balance the</td><td> </td><td class="right">   The URI Template syntax has been designed to carefully balance the</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">   need for a powerful expansion mechanism with the need for ease of</td><td> </td><td class="right">   need for a powerful expansion mechanism with the need for ease of</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">   implementation.  The syntax is designed to be trivial to parse while</td><td> </td><td class="right">   implementation.  The syntax is designed to be trivial to parse while</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">   at the same time providing enough flexibility to express many common</td><td> </td><td class="right">   at the same time providing enough flexibility to express many common</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">   template scenarios.  Implementations are able to parse the template</td><td> </td><td class="right">   template scenarios.  Implementations are able to parse the template</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">   and perform the expansions in a single pass.</td><td> </td><td class="right">   and perform the expansions in a single pass.</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">   Templates are simple and readable when used with common examples</td><td> </td><td class="right">   Templates are simple and readable when used with common examples</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">   because the single-character operators match the URI generic syntax</td><td> </td><td class="right">   because the single-character operators match the URI generic syntax</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0040" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">   delimiters.  The operator's associated delimiter <span class="delete">(";", "?",</span> "/", and</td><td> </td><td class="rblock">   delimiters.  The operator's associated delimiter <span class="insert">(".", ";",</span> "/", <span class="insert">"?",</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">   <span class="delete">".")</span> is omitted when none of the listed variables are defined.</td><td> </td><td class="rblock"><span class="insert">   "&amp;",</span> and <span class="insert">"#")</span> is omitted when none of the listed variables are</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">                                                                         </td><td> </td><td class="rblock">   defined.  Likewise, the expansion process for ";" (path-style</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">   Likewise, the expansion process for ";" (path-style parameters) will</td><td> </td><td class="rblock">   parameters) will omit the "=" when the variable value is empty,</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">   omit the "=" when the variable value is empty, whereas the process</td><td> </td><td class="rblock">   whereas the process for "?" (form-style parameters) will not omit the</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">   for "?" (form-style parameters) will not omit the "=" when the value</td><td> </td><td class="rblock">   "=" when the value is empty.  Multiple variables and list values have</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">   is empty.  Multiple variables and list values have their values</td><td> </td><td class="rblock">   their values joined with "," if there is no predefined joining</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">   joined with "," if there is no predefined joining mechanism for the</td><td> </td><td class="rblock">   mechanism for the operator.  <span class="insert">The "+" and "#" operators</span> will</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">   operator.  <span class="delete">Only one operator, plus ("+"),</span> will substitute unencoded</td><td> </td><td class="rblock">   substitute unencoded reserved characters found inside the variable</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">   reserved characters found inside the variable values; the other</td><td> </td><td class="rblock">   values; the other operators will pct-encode reserved characters found</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">   operators will pct-encode reserved characters found in the variable</td><td> </td><td class="rblock">   in the variable values prior to expansion.</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">   values prior to expansion.</td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">   The most common cases for URI spaces can be described with Level 1</td><td> </td><td class="right">   The most common cases for URI spaces can be described with Level 1</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">   template expressions.  If we were only concerned with URI generation,</td><td> </td><td class="right">   template expressions.  If we were only concerned with URI generation,</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">   then the template syntax could be limited to just simple variable</td><td> </td><td class="right">   then the template syntax could be limited to just simple variable</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">   expansion, since more complex forms could be generated by changing</td><td> </td><td class="right">   expansion, since more complex forms could be generated by changing</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">   the variable values.  However, URI Templates have the additional goal</td><td> </td><td class="right">   the variable values.  However, URI Templates have the additional goal</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">   of describing the layout of identifiers in terms of preexisting data</td><td> </td><td class="right">   of describing the layout of identifiers in terms of preexisting data</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">   values.  The template syntax therefore includes operators that</td><td> </td><td class="right">   values.  The template syntax therefore includes operators that</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">   reflect how resource identifiers are commonly allocated.  Likewise,</td><td> </td><td class="right">   reflect how resource identifiers are commonly allocated.  Likewise,</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">   since prefix substrings are often used to partition large spaces of</td><td> </td><td class="right">   since prefix substrings are often used to partition large spaces of</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">   resources, modifiers on variable values provide a way to specify both</td><td> </td><td class="right">   resources, modifiers on variable values provide a way to specify both</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">   the substring and the full value string with a single variable name.</td><td> </td><td class="right">   the substring and the full value string with a single variable name.</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">1.4.  Limitations</td><td> </td><td class="right">1.4.  Limitations</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">   Since a URI Template describes a superset of the identifiers, there</td><td> </td><td class="right">   Since a URI Template describes a superset of the identifiers, there</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">   is no implication that every possible expansion for each delimited</td><td> </td><td class="right">   is no implication that every possible expansion for each delimited</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">   variable expression corresponds to a URI of an existing resource.</td><td> </td><td class="right">   variable expression corresponds to a URI of an existing resource.</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">   Our expectation is that an application constructing URIs according to</td><td> </td><td class="right">   Our expectation is that an application constructing URIs according to</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">   the template will be provided with an appropriate set of values for</td><td> </td><td class="right">   the template will be provided with an appropriate set of values for</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0041" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">   the variables being <span class="delete">substituted and will be able to cope with any</span></td><td> </td><td class="rblock">   the variables being <span class="insert">substituted,</span> or <span class="insert">at least a means of validating</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">   errors that might occur when the resulting URI is used for name</span></td><td> </td><td class="rblock"><span class="insert">   user data-entry for those values.</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">   resolution</span> or <span class="delete">access.</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">   URI Templates are not URIs: they do not identify an abstract or</td><td> </td><td class="right">   URI Templates are not URIs: they do not identify an abstract or</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">   physical resource, they are not parsed as URIs, and should not be</td><td> </td><td class="right">   physical resource, they are not parsed as URIs, and should not be</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">   used in places where a URI would be expected unless the template</td><td> </td><td class="right">   used in places where a URI would be expected unless the template</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">   expressions will be expanded by a template processor prior to use.</td><td> </td><td class="right">   expressions will be expanded by a template processor prior to use.</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">   Distinct field, element, or attribute names should be used to</td><td> </td><td class="right">   Distinct field, element, or attribute names should be used to</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">   differentiate protocol elements that carry a URI Template from those</td><td> </td><td class="right">   differentiate protocol elements that carry a URI Template from those</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">   that expect a URI reference.</td><td> </td><td class="right">   that expect a URI reference.</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0042" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock">   <span class="insert">Some URI Templates can be used in reverse for the purpose of variable</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">   matching: comparing the template to a fully formed URI in order to</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">   extract the variable parts from that URI and assign them to the named</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">   variables.  Variable matching only works well if the template</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">   expressions are delimited by the beginning or end of the URI or by</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">   characters that cannot be part of the expansion, such as reserved</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">   characters surrounding a simple string expression.  In general,</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">   regular expression languages are better suited for variable matching.</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock">                                                                         </td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">1.5.  Notational Conventions</td><td> </td><td class="right">1.5.  Notational Conventions</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">   The key words "MUST", "MUST NOT", "REQUIRED", "SHALL", "SHALL NOT",</td><td> </td><td class="right">   The key words "MUST", "MUST NOT", "REQUIRED", "SHALL", "SHALL NOT",</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">   "SHOULD", "SHOULD NOT", "RECOMMENDED", "MAY", and "OPTIONAL" in this</td><td> </td><td class="right">   "SHOULD", "SHOULD NOT", "RECOMMENDED", "MAY", and "OPTIONAL" in this</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">   document are to be interpreted as described in [RFC2119].</td><td> </td><td class="right">   document are to be interpreted as described in [RFC2119].</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">   This specification uses the Augmented Backus-Naur Form (ABNF)</td><td> </td><td class="right">   This specification uses the Augmented Backus-Naur Form (ABNF)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">   notation of [RFC5234].  The following ABNF rules are imported from</td><td> </td><td class="right">   notation of [RFC5234].  The following ABNF rules are imported from</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">   the normative references [RFC5234], [RFC3986], and [RFC3987].</td><td> </td><td class="right">   the normative references [RFC5234], [RFC3986], and [RFC3987].</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr bgcolor="gray" ><td></td><th><a name="part-l9" /><small>skipping to change at</small><em> page 12, line 51</em></th><th> </th><th><a name="part-r9" /><small>skipping to change at</small><em> page 13, line 29</em></th><td></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">   templates occur in practice as a sequence of characters in whatever</td><td> </td><td class="right">   templates occur in practice as a sequence of characters in whatever</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">   form or encoding is suitable for the context in which they occur,</td><td> </td><td class="right">   form or encoding is suitable for the context in which they occur,</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">   whether that be octets embedded in a network protocol element or</td><td> </td><td class="right">   whether that be octets embedded in a network protocol element or</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">   paint applied to the side of a bus.  This specification does not</td><td> </td><td class="right">   paint applied to the side of a bus.  This specification does not</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">   mandate any particular character encoding for mapping between URI</td><td> </td><td class="right">   mandate any particular character encoding for mapping between URI</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">   Template characters and the octets used to store or transmit those</td><td> </td><td class="right">   Template characters and the octets used to store or transmit those</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">   characters.  When a URI Template appears in a protocol element, the</td><td> </td><td class="right">   characters.  When a URI Template appears in a protocol element, the</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">   character encoding is defined by that protocol; without such a</td><td> </td><td class="right">   character encoding is defined by that protocol; without such a</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">   definition, a URI Template is assumed to be in the same character</td><td> </td><td class="right">   definition, a URI Template is assumed to be in the same character</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">   encoding as the surrounding text.  It is only during the process of</td><td> </td><td class="right">   encoding as the surrounding text.  It is only during the process of</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0043" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">   template expansion that a string of characters in a URI Template <span class="delete">MUST</span></td><td> </td><td class="rblock">   template expansion that a string of characters in a URI Template <span class="insert">is</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">   be <span class="delete">transformed into its corresponding</span> sequence of <span class="delete">normalized</span> Unicode</td><td> </td><td class="rblock"><span class="insert">   REQUIRED to</span> be <span class="insert">processed as a</span> sequence of Unicode codepoints.</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">   codepoints.</td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">   The Unicode Standard [UNIV4] defines various equivalences between</td><td> </td><td class="right">   The Unicode Standard [UNIV4] defines various equivalences between</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">   sequences of characters for various purposes.  Unicode Standard Annex</td><td> </td><td class="right">   sequences of characters for various purposes.  Unicode Standard Annex</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">   #15 [UTR15] defines various Normalization Forms for these</td><td> </td><td class="right">   #15 [UTR15] defines various Normalization Forms for these</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0044" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">   <span class="delete">equivalences, in particular Normalization Form KC (NFKC:</span></td><td> </td><td class="rblock">   <span class="insert">equivalences.</span>  The normalization form determines how to consistently</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">   Compatibility Decomposition followed by Canonical Composition).</span>  The</td><td> </td><td class="rblock">   encode equivalent strings.  <span class="insert">In theory, all URI processing</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">   normalization form determines how to consistently encode <span class="delete">the</span></td><td> </td><td class="rblock"><span class="insert">   implementations, including template processors, should use the same</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">   equivalent strings.</td><td> </td><td class="rblock"><span class="insert">   normalization form for generating a URI reference.  In practice, they</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">   do not.  If a value has been provided by the same server as the</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">   resource, then it can be assumed that the string is already in the</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">   form expected by that server.  If a value is provided by a user, such</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">   as via a data-entry dialog, then the string SHOULD be normalized as</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">   Normalization Form C (NFC: Canonical Decomposition, followed by</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">   Canonical Composition) prior to being used in expansions by a</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">   template processor.</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0045" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">   <span class="delete">In theory, all URI processing implementations, including template</span></td><td> </td><td class="rblock">   <span class="insert">Likewise, when non-ASCII data</span> that <span class="insert">represents readable strings</span> is</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">   processors, should use the same normalization form for generating or</span></td><td> </td><td class="rblock">   <span class="insert">pct-encoded for use</span> in a <span class="insert">URI reference, a</span> template <span class="insert">processor MUST</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">   handling a URI reference.  In practice, they do not.  However,</span></td><td> </td><td class="rblock"><span class="insert">   first</span> encode the <span class="insert">string</span> as UTF-8 [RFC3629] and then pct-encode any</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">   template processors transform the template literals and variable</span></td><td> </td><td class="rblock">   octets that are not allowed in a <span class="insert">URI reference.</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">   values from characters to codepoints, expand the expressions, and</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">   then transform the resulting codepoints back to characters again.  In</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">   order to promote consistent generation of URI references from</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">   templates, template processors MUST ensure</span> that <span class="delete">the template and each</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">   variable value</span> is in <span class="delete">NFKC when they are transformed to</span> a <span class="delete">sequence of</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">   Unicode codepoints.  The final step of</span> template <span class="delete">processing will</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">   encode the <span class="delete">expanded sequence of Unicode codepoints, which should</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">   still be in NFKC,</span> as UTF-8 [RFC3629] and then <span class="delete">further</span> pct-encode any</td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">   octets <span class="delete">within the UTF-8 string</span> that are not allowed in a <span class="delete">URI.</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">2.  Syntax</td><td> </td><td class="right">2.  Syntax</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">   A URI Template is a string of printable Unicode characters that</td><td> </td><td class="right">   A URI Template is a string of printable Unicode characters that</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">   contains zero or more embedded variable expressions, each expression</td><td> </td><td class="right">   contains zero or more embedded variable expressions, each expression</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">   being delimited by a matching pair of braces ('{', '}').</td><td> </td><td class="right">   being delimited by a matching pair of braces ('{', '}').</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">     URI-Template  = *( literals / expression )</td><td> </td><td class="right">     URI-Template  = *( literals / expression )</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">   Although templates (and template processor implementations) are</td><td> </td><td class="right">   Although templates (and template processor implementations) are</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">   described above in terms of four gradual levels, we define the URI-</td><td> </td><td class="right">   described above in terms of four gradual levels, we define the URI-</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">   Template syntax in terms of the ABNF for Level 4.  A template</td><td> </td><td class="right">   Template syntax in terms of the ABNF for Level 4.  A template</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">   processor limited to lower level templates MAY exclude the ABNF rules</td><td> </td><td class="right">   processor limited to lower level templates MAY exclude the ABNF rules</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">   applicable only to higher levels.  However, it is RECOMMENDED that</td><td> </td><td class="right">   applicable only to higher levels.  However, it is RECOMMENDED that</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">   all parsers implement the full syntax such that unsupported levels</td><td> </td><td class="right">   all parsers implement the full syntax such that unsupported levels</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">   can be properly identified as such to the end user.</td><td> </td><td class="right">   can be properly identified as such to the end user.</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0046" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">   <span class="delete">Each character in a URI Template MUST be transcoded to an NFKC</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">   Unicode codepoint prior to evaluation.  If a character sequence in</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">   the template consists of pct-encoded triplets corresponding to a</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">   valid sequence of octets in UTF-8 that represent a character not in</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">   the reserved set, then the triplets MUST be replaced with their</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">   corresponding Unicode codepoint.  In other words, pct-encoded UTF-8</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">   found within the template is decoded prior to further processing</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">   unless the corresponding character is in the reserved set.</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">                                                                         </td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">2.1.  Literals</td><td> </td><td class="right">2.1.  Literals</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">   The characters outside of expressions in a URI Template string are</td><td> </td><td class="right">   The characters outside of expressions in a URI Template string are</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0047" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">   intended to be <span class="delete">translated</span> literally to the <span class="delete">URI-reference.</span></td><td> </td><td class="rblock">   intended to be <span class="insert">copied</span> literally to the <span class="insert">URI-reference if the character</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">   is allowed in a URI (reserved / unreserved / pct-encoded) or, if not</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">   allowed, copied to the URI-reference in its UTF-8 pct-encoded form.</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">     literals      =  %x21 / %x23-24 / %x26 / %x28-3B / %x3D / %x3F-5B</td><td> </td><td class="right">     literals      =  %x21 / %x23-24 / %x26 / %x28-3B / %x3D / %x3F-5B</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                   /  %x5D-5F / %x61-7A / %x7E / ucschar / iprivate</td><td> </td><td class="right">                   /  %x5D-5F / %x61-7A / %x7E / ucschar / iprivate</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                   /  pct-encoded</td><td> </td><td class="right">                   /  pct-encoded</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                        ; any Unicode character except: CTL, SP,</td><td> </td><td class="right">                        ; any Unicode character except: CTL, SP,</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                        ;  DQUOTE, "'", "%" (aside from pct-encoded),</td><td> </td><td class="right">                        ;  DQUOTE, "'", "%" (aside from pct-encoded),</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                        ;  "&lt;", "&gt;", "\", "^", "`", "{", "|", "}"</td><td> </td><td class="right">                        ;  "&lt;", "&gt;", "\", "^", "`", "{", "|", "}"</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0048" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">   <span class="delete">A sequence of pct-encoded literals that corresponds to a UTF-8</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">   encoded character that is not within the reserved set will be</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">   transcoded during template processing, as describe above.  If such a</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">   character is not in the unreserved set, it will be re-pct-encoded</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">   during the final step of template processing.  Unreserved characters</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">   will therefore be normalized to their unencoded form as a side-effect</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">   of template processing.</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">                                                                         </td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">2.2.  Expressions</td><td> </td><td class="right">2.2.  Expressions</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">   Template expressions are the parameterized parts of a URI Template.</td><td> </td><td class="right">   Template expressions are the parameterized parts of a URI Template.</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">   Each expression contains an optional operator, which defines the</td><td> </td><td class="right">   Each expression contains an optional operator, which defines the</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">   expression type and its corresponding expansion process, followed by</td><td> </td><td class="right">   expression type and its corresponding expansion process, followed by</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">   a comma-separated list of variable specifiers (variable names and</td><td> </td><td class="right">   a comma-separated list of variable specifiers (variable names and</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">   optional value modifiers).  If no operator is provided, the</td><td> </td><td class="right">   optional value modifiers).  If no operator is provided, the</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">   expression defaults to simple variable expansion of unreserved</td><td> </td><td class="right">   expression defaults to simple variable expansion of unreserved</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">   values.</td><td> </td><td class="right">   values.</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">     expression    =  "{" [ operator ] variable-list "}"</td><td> </td><td class="right">     expression    =  "{" [ operator ] variable-list "}"</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0049" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">     operator      =  "+" / "." / "/" / ";" / "?" / op-reserve</td><td> </td><td class="rblock">     operator      =  "+" / <span class="insert">"#" /</span> "." / "/" / ";" / "?" / <span class="insert">"&amp;"</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">     op-reserve    =  "," / "!" / "@"</td><td> </td><td class="rblock"><span class="insert">                   /</span>  op-reserve</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock">     op-reserve    =  <span class="insert">"=" /</span> "," / "!" / "@" <span class="insert">/ "|"</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                          ; reserved for local use: "$" / "(" / ")"</td><td> </td><td class="right">                          ; reserved for local use: "$" / "(" / ")"</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">   The operator characters have been chosen to reflect each of their</td><td> </td><td class="right">   The operator characters have been chosen to reflect each of their</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">   roles as reserved characters in the URI generic syntax.  The</td><td> </td><td class="right">   roles as reserved characters in the URI generic syntax.  The</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0050" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">   operators defined <span class="delete">by</span> this specification include: <span class="delete">plus ("+") for</span></td><td> </td><td class="rblock">   operators defined <span class="insert">in Section 3 of</span> this specification include:</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">   substituting values that may contain reserved characters; dot (".")</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">   for substituting values as a sequence of name labels prefixed by ".";</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">   slash ("/") for substituting values as a sequence of path segments</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">   separated by "/"; semicolon (";") for substituting key=value pairs as</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">   path parameters prefixed by ";"; and, question-mark ("?") for</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">   substituting a query component beginning with "?" and consisting of</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">   key=value pairs separated by "&amp;".  These operators will be described</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">   in detail in Section 3.</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0051" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">   The operator characters comma (","), exclamation ("!"), <span class="delete">and</span> at-sign</td><td> </td><td class="rblock">      <span class="insert">+   Reserved character strings;</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">   <span class="delete">("@")</span> are reserved for future extensions.  <span class="delete">A processor that</span></td><td> </td><td class="rblock"><span class="insert"></span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">   unexpectedly encounters such an extension operator SHOULD pass the</span></td><td> </td><td class="rblock"><span class="insert">      #   Fragment identifiers prefixed by "#";</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">   expression through unexpanded and MAY also indicate a warning to the</span></td><td> </td><td class="rblock"><span class="insert"></span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">   invoking application.</span></td><td> </td><td class="rblock"><span class="insert">      .   Name labels or extensions prefixed by ".";</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert"></span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">      /   Path segments prefixed by "/";</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert"></span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">      ;   Path parameter key or key=value pairs prefixed by ";";</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert"></span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">      ?   Query component beginning with "?" and consisting of</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">          key=value pairs separated by "&amp;"; and,</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert"></span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">      &amp;   Continuation of query-style &amp;key=value pairs within</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">          a literal query component.</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock">                                                                         </td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock">   The operator characters <span class="insert">equals ("="),</span> comma (","), exclamation ("!"),</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock">   at-sign <span class="insert">("@"), and pipe ("|")</span> are reserved for future extensions.</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">   The expression syntax specifically excludes use of the dollar ("$")</td><td> </td><td class="right">   The expression syntax specifically excludes use of the dollar ("$")</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">   and parentheses ["(" and ")"] characters so that they remain</td><td> </td><td class="right">   and parentheses ["(" and ")"] characters so that they remain</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">   available for local language extensions outside the scope of this</td><td> </td><td class="right">   available for local language extensions outside the scope of this</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">   specification.</td><td> </td><td class="right">   specification.</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">2.3.  Variables</td><td> </td><td class="right">2.3.  Variables</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">   After the operator (if any), each expression contains a list of one</td><td> </td><td class="right">   After the operator (if any), each expression contains a list of one</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">   or more comma-separated variable specifiers (varspec).  The variable</td><td> </td><td class="right">   or more comma-separated variable specifiers (varspec).  The variable</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">   names serve multiple purposes: documentation for what kinds of values</td><td> </td><td class="right">   names serve multiple purposes: documentation for what kinds of values</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">   are expected, identifiers for associating values within a template</td><td> </td><td class="right">   are expected, identifiers for associating values within a template</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0052" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">   processor, and the string to use for <span class="delete">each key on key=value</span></td><td> </td><td class="rblock">   processor, and the <span class="insert">literal</span> string to use for <span class="insert">the name in name=value</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">   expansions.</span></td><td> </td><td class="rblock"><span class="insert">   expansions (aside from when exploding an associative array).</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">     variable-list =  varspec *( "," varspec )</td><td> </td><td class="right">     variable-list =  varspec *( "," varspec )</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0053" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">     varspec       =  varname [ modifier ]<span class="delete"> [ "|" default ]</span></td><td> </td><td class="rblock">     varspec       =  varname [ modifier ]</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">     varname       =  varchar *( varchar / "." )</td><td> </td><td class="right">     varname       =  varchar *( varchar / "." )</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0054" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">     varchar       =  ALPHA / DIGIT / "_" / <span class="delete">ucschar / iprivate</span></td><td> </td><td class="rblock">     varchar       =  ALPHA / DIGIT / "_" / pct-encoded</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">                   /</span>  pct-encoded</td><td> </td><td class="rblock">                                                                         </td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock">   <span class="insert">A varname MAY contain one or more pct-encoded triplets.  These</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">   triplets are considered an essential part of the variable name and</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">   are not decoded during processing.  A varname containing pct-encoded</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">   characters is not the same variable as a varname with those same</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">   characters decoded.  Applications that provide URI Templates are</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">   expected to be consistent in their use of pct-encoding within</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">   variable names.</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">   An expression MAY reference variables that are unknown to the</td><td> </td><td class="right">   An expression MAY reference variables that are unknown to the</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">   template processor or whose value is set to a special "undefined"</td><td> </td><td class="right">   template processor or whose value is set to a special "undefined"</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">   value, such as undef or null.  Such undefined variables are given</td><td> </td><td class="right">   value, such as undef or null.  Such undefined variables are given</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">   special treatment by the expansion process.</td><td> </td><td class="right">   special treatment by the expansion process.</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">   A variable value that is a string of length zero is not considered</td><td> </td><td class="right">   A variable value that is a string of length zero is not considered</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">   undefined; it has the defined value of an empty string.</td><td> </td><td class="right">   undefined; it has the defined value of an empty string.</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0055" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">   A variable may have a composite <span class="delete">or structured value, such as</span> a list</td><td> </td><td class="rblock">   A variable may have a composite <span class="insert">value in the form of</span> a list of <span class="insert">values</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">   of <span class="delete">values,</span> an associative array of <span class="delete">(key,</span> value) <span class="delete">pairs, or a structure</span></td><td> </td><td class="rblock"><span class="insert">   or</span> an associative array of <span class="insert">(name,</span> value) <span class="insert">pairs.</span>  Such value types are</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">   of components defined by some separate schema.</span>  Such value types are</td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">   not directly indicated by the template syntax, but do have an impact</td><td> </td><td class="right">   not directly indicated by the template syntax, but do have an impact</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0056" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">   on the expansion process.  A composite <span class="delete">or structured</span> value with zero</td><td> </td><td class="rblock">   on the expansion process.  A composite value with zero member values</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">   member values is considered undefined.</td><td> </td><td class="rblock">   is considered undefined.</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">                                                                         </td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">   <span class="delete">If a variable appears more than once in an expression or within</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">   multiple expressions of a URI Template, the value of that variable</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">   MUST remain static throughout the expansion process (i.e., the</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">   variable must have the same value for the purpose of calculating each</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">   expansion).</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">2.4.  Value Modifiers</td><td> </td><td class="right">2.4.  Value Modifiers</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">   Each of the variables in a Level 4 template expression can have a</td><td> </td><td class="right">   Each of the variables in a Level 4 template expression can have a</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">   modifier indicating either that its expansion is limited to a prefix</td><td> </td><td class="right">   modifier indicating either that its expansion is limited to a prefix</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0057" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">   of the variable's value string or that its expansion is exploded <span class="delete">into</span></td><td> </td><td class="rblock">   of the variable's value string or that its expansion is exploded <span class="insert">as a</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">   components based on an external type</span> or <span class="delete">schema associated with that</span></td><td> </td><td class="rblock"><span class="insert">   composite value in the form of a value list</span> or <span class="insert">an associative array</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">   variable.</span></td><td> </td><td class="rblock"><span class="insert">   of (name, value) pairs.</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">     modifier      =  prefix / explode</td><td> </td><td class="right">     modifier      =  prefix / explode</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">2.4.1.  Prefix Values</td><td> </td><td class="right">2.4.1.  Prefix Values</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">   A prefix modifier indicates that the variable expansion is limited to</td><td> </td><td class="right">   A prefix modifier indicates that the variable expansion is limited to</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">   a prefix of the variable's value string.  Prefix modifiers are often</td><td> </td><td class="right">   a prefix of the variable's value string.  Prefix modifiers are often</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">   used to partition an identifier space hierarchically, as is common in</td><td> </td><td class="right">   used to partition an identifier space hierarchically, as is common in</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">   reference indices and hash-based storage.  It also serves to limit</td><td> </td><td class="right">   reference indices and hash-based storage.  It also serves to limit</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0058" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">   the expanded value to a maximum number of characters.</td><td> </td><td class="rblock">   the expanded value to a maximum number of characters.  <span class="insert">Prefix</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">   modifiers are not applicable to variables that have composite values.</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0059" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">     prefix        =  ":" <span class="delete">offset</span></td><td> </td><td class="rblock">     prefix        =  ":" <span class="insert">max-length</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">     max-length    =  %x31-39 *DIGIT   ; positive integer</td><td> </td><td class="right">     max-length    =  %x31-39 *DIGIT   ; positive integer</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">   The max-length is a positive integer that refers to a maximum number</td><td> </td><td class="right">   The max-length is a positive integer that refers to a maximum number</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">   of characters from the beginning of the variable's value as a Unicode</td><td> </td><td class="right">   of characters from the beginning of the variable's value as a Unicode</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">   string.  Note that this numbering is in characters, not octets, in</td><td> </td><td class="right">   string.  Note that this numbering is in characters, not octets, in</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">   order to avoid splitting between the octets of a multi-octet UTF-8</td><td> </td><td class="right">   order to avoid splitting between the octets of a multi-octet UTF-8</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">   encoded character or within a pct-encoded triplet.  If the max-length</td><td> </td><td class="right">   encoded character or within a pct-encoded triplet.  If the max-length</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">   is greater than the length of the variable's value, then the entire</td><td> </td><td class="right">   is greater than the length of the variable's value, then the entire</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">   value string is used.</td><td> </td><td class="right">   value string is used.</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr bgcolor="gray" ><td></td><th><a name="part-l10" /><small>skipping to change at</small><em> page 17, line 5</em></th><th> </th><th><a name="part-r10" /><small>skipping to change at</small><em> page 17, line 20</em></th><td></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       semi  := ";"</td><td> </td><td class="right">       semi  := ";"</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">     Example Template     Expansion</td><td> </td><td class="right">     Example Template     Expansion</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       {var}              value</td><td> </td><td class="right">       {var}              value</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       {var:20}           value</td><td> </td><td class="right">       {var:20}           value</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       {var:3}            val</td><td> </td><td class="right">       {var:3}            val</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       {semi}             %3B</td><td> </td><td class="right">       {semi}             %3B</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       {semi:2}           %3B</td><td> </td><td class="right">       {semi:2}           %3B</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0060" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">2.4.2.  Compo<span class="delete">nent</span> Values</td><td> </td><td class="rblock">2.4.2.  Compo<span class="insert">site</span> Values</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">   An explode modifier ("*") indicates that the variable represents a</td><td> </td><td class="right">   An explode modifier ("*") indicates that the variable represents a</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">   composite value that may be substituted in full or partial forms,</td><td> </td><td class="right">   composite value that may be substituted in full or partial forms,</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0061" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">   depending on the variable's type <span class="delete">or schema.</span>  Since URI Templates do</td><td> </td><td class="rblock">   depending on the variable's type <span class="insert">and value set.</span>  Since URI Templates</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">   not contain an indication of type or schema, this is assumed to be</td><td> </td><td class="rblock">   do not contain an indication of type or schema, this is assumed to be</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">   determined by context.  An example context is a mark-up element or</td><td> </td><td class="right">   determined by context.  An example context is a mark-up element or</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">   header field that contains one attribute that is a template and one</td><td> </td><td class="right">   header field that contains one attribute that is a template and one</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">   or more other attributes that define the schema applicable to</td><td> </td><td class="right">   or more other attributes that define the schema applicable to</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">   variables found in the template.  Likewise, a typed programming</td><td> </td><td class="right">   variables found in the template.  Likewise, a typed programming</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">   language might differentiate variables as strings, lists, associative</td><td> </td><td class="right">   language might differentiate variables as strings, lists, associative</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">   arrays, or structures.</td><td> </td><td class="right">   arrays, or structures.</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">     explode       =  "*"</td><td> </td><td class="right">     explode       =  "*"</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">   Explode modifiers improve brevity in the URI Template syntax.  For</td><td> </td><td class="right">   Explode modifiers improve brevity in the URI Template syntax.  For</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr bgcolor="gray" ><td></td><th><a name="part-l11" /><small>skipping to change at</small><em> page 17, line 37</em></th><th> </th><th><a name="part-r11" /><small>skipping to change at</small><em> page 17, line 52</em></th><td></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">      /mapper{?address*}</td><td> </td><td class="right">      /mapper{?address*}</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">   along with some context that defines what the variable named</td><td> </td><td class="right">   along with some context that defines what the variable named</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">   "address" can include, such as by reference to some other standard</td><td> </td><td class="right">   "address" can include, such as by reference to some other standard</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">   for addressing (e.g., UPU S42 or AS/NZS 4819:2003).  A recipient</td><td> </td><td class="right">   for addressing (e.g., UPU S42 or AS/NZS 4819:2003).  A recipient</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">   aware of the schema can then provide appropriate expansions, such as:</td><td> </td><td class="right">   aware of the schema can then provide appropriate expansions, such as:</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">      /mapper?city=Newport%20Beach&amp;state=CA</td><td> </td><td class="right">      /mapper?city=Newport%20Beach&amp;state=CA</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0062" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">   <span class="delete">If an explode modifier is present, the</span> expansion process for <span class="delete">that</span></td><td> </td><td class="rblock">   <span class="insert">The</span> expansion process for <span class="insert">exploded variables</span> is dependent on both the</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">   variable, as defined in Section 3,</span> is dependent on both the operator</td><td> </td><td class="rblock">   operator being used and <span class="insert">whether</span> the <span class="insert">composite</span> value <span class="insert">is</span> to be <span class="insert">treated</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">   being used and the <span class="delete">type or schema of the value being substituted.</span></td><td> </td><td class="rblock"><span class="insert">   as</span> a <span class="insert">list of values or as an associative array of (name, value)</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete"></span></td><td> </td><td class="rblock"><span class="insert">   pairs.  Structures are processed as if they are an associative array</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">2.5.  Value Defaults</span></td><td> </td><td class="rblock"><span class="insert">   with names corresponding</span> to the <span class="insert">fields</span> in the <span class="insert">structure definition</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete"></span></td><td> </td><td class="rblock"><span class="insert">   and "." separators used to indicate</span> name <span class="insert">hierarchy in substructures.</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">   Each of the variables in Level 2 (and above) templates may also be</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">   supplied with a default</span> value to be <span class="delete">used when</span> a <span class="delete">template processor</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">   determines that variable to be undefined.  The default value is</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">   limited</span> to <span class="delete">unreserved characters, the equal sign ("="), and pct-</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">   encoded triplets, since the default is provided in the exact form</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">   that it would appear in the expanded URI reference.  The default is</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">   not affected by any variable modifiers, since we assume that</span> the</td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">   <span class="delete">default string provided</span> in the <span class="delete">expression already reflects the</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">   desired value.</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete"></span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">     default       =  *( unreserved / "=" / pct-encoded )</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete"></span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">   The following examples illustrate how default values work with</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">   different variable types.</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete"></span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">     Given the variable assignments:</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete"></span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">       var   := "value"</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       name  <span class="delete">:= [ "Fred", "Wilma", "Pebbles" ]</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">       favs  := [("color","red"), ("volume","high")]</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">       empty_keys := []</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">       empty := ""</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">       undef := null</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete"></span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">     Example Template        Expansion</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete"></span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">       {var|default}         value</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">       {undef|default}       default</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">       {undef:3|default}     default</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete"></span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">       x{empty}y             xy</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">       x{empty|_}y           xy</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">       x{undef}y             xy</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">       x{undef|_}y           x_y</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete"></span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">       x{.name|none}         x.Fred,Wilma,Pebbles</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">       x{.name*|none}        x.Fred.Wilma.Pebbles</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">       x{.empty}             x.</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">       x{.empty|none}        x.</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">       x{.undef}             x</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">       x{.undef|none}        x.none</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete"></span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">       x{/name|none}         x/Fred,Wilma,Pebbles</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">       x{/name*|none}        x/Fred/Wilma/Pebbles</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">       x{/undef}             x</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">       x{/undef|none}        x/none</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">       x{/empty}             x/</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">       x{/empty|none}        x/</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">       x{/empty_keys}        x</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">       x{/empty_keys|none}   x/none</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">       x{/empty_keys*}       x</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">       x{/empty_keys*|none}  x/none</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete"></span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">       x{;name|none}         x;name=Fred,Wilma,Pebbles</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">       x{;favs|none}         x;favs=color,red,volume,high</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">       x{;favs*|none}        x;color=red;volume=high</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">       x{;empty}             x;empty</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">       x{;empty|none}        x;empty</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">       x{;undef}             x</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">       x{;undef|none}        x;none</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">       x{;undef|foo=y}       x;foo=y</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete"></span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">       x{?var|none}          x?var=value</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">       x{?favs|none}         x?favs=color,red,volume,high</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">       x{?favs*|none}        x?color=red&amp;volume=high</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">       x{?empty}             x?empty=</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">       x{?empty|foo=none}    x?empty=</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">       x{?undef}             x</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">       x{?undef|foo=none}    x?foo=none</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">       x{?empty_keys}        x</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">       x{?empty_keys|none}   x?none</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">       x{?empty_keys|y=z}    x?y=z</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">       x{?empty_keys*|y=z}   x?y=z</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">3.  Expansion</td><td> </td><td class="right">3.  Expansion</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">   The process of URI Template expansion is to scan the template string</td><td> </td><td class="right">   The process of URI Template expansion is to scan the template string</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0063" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">   from beginning to end, copying literal characters <span class="delete">as-is</span> and replacing</td><td> </td><td class="rblock">   from beginning to end, copying literal characters and replacing each</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">   each expression with the result of applying the expression's operator</td><td> </td><td class="rblock">   expression with the result of applying the expression's operator to</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">   to the value of each variable named in the expression.</td><td> </td><td class="rblock">   the value of each variable named in the expression.  Each <span class="insert">variable's</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">                                                                         </td><td> </td><td class="rblock">   value MUST be formed prior to template expansion.</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">   Each <span class="delete">variable</span> value MUST be formed <span class="delete">as a sequence of NFKC Unicode</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">   codepoints</span> prior to template expansion.  <span class="delete">A value is assumed to be raw</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">   data that might need to be encoded by the template processor during</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">   expansion, depending on the expression type.</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">   If a template processor encounters an error outside of an expression,</td><td> </td><td class="right">   If a template processor encounters an error outside of an expression,</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">   such as a character sequence that does not match the &lt;URI-Template&gt;</td><td> </td><td class="right">   such as a character sequence that does not match the &lt;URI-Template&gt;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">   grammar, then processing of the template SHOULD cease, the URI-</td><td> </td><td class="right">   grammar, then processing of the template SHOULD cease, the URI-</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">   reference result SHOULD be undefined, and the location and type of</td><td> </td><td class="right">   reference result SHOULD be undefined, and the location and type of</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">   error SHOULD be indicated to the invoking application.  If an error</td><td> </td><td class="right">   error SHOULD be indicated to the invoking application.  If an error</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">   is encountered inside an expression, such as an operator or value</td><td> </td><td class="right">   is encountered inside an expression, such as an operator or value</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">   modifier that it does not recognize or cannot support, then the</td><td> </td><td class="right">   modifier that it does not recognize or cannot support, then the</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">   expression SHOULD be copied to the result unexpanded, processing of</td><td> </td><td class="right">   expression SHOULD be copied to the result unexpanded, processing of</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">   the remainder of the template SHOULD continue, and the location and</td><td> </td><td class="right">   the remainder of the template SHOULD continue, and the location and</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0064" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">   type of error SHOULD be indicated to the invoking application.</td><td> </td><td class="rblock">   type of error SHOULD be indicated to the invoking application.  <span class="insert">In</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">   this latter case, the result returned will not be a valid URI</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">   reference; it will be an incompletely expanded template string that</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">   is only intended for diagnostic use.</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">3.1.  Literal Expansion</td><td> </td><td class="right">3.1.  Literal Expansion</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">   If the literal character is allowed anywhere in the URI syntax</td><td> </td><td class="right">   If the literal character is allowed anywhere in the URI syntax</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0065" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">   (unreserved / <span class="delete">reserved),</span> then it is copied directly to the result</td><td> </td><td class="rblock">   (unreserved / <span class="insert">reserved / pct-encoded ),</span> then it is copied directly to</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">   string.  Otherwise, the pct-encoded equivalent of the literal</td><td> </td><td class="rblock">   the result string.  Otherwise, the pct-encoded equivalent of the</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">   character is copied to the result string by encoding the character in</td><td> </td><td class="rblock">   literal character is copied to the result string by encoding the</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">   UTF-8 (a sequence of octets) and then encoding each octet as a <span class="delete">pct-</span></td><td> </td><td class="rblock">   character in UTF-8 (a sequence of octets) and then encoding each</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">   encoded</span> triplet.</td><td> </td><td class="rblock">   octet as a <span class="insert">pct-encoded</span> triplet.</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">3.2.  Expression Expansion</td><td> </td><td class="right">3.2.  Expression Expansion</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">   Each expression is indicated by an opening brace ("{") character and</td><td> </td><td class="right">   Each expression is indicated by an opening brace ("{") character and</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">   continues until the next closing brace ("}").  The expression is</td><td> </td><td class="right">   continues until the next closing brace ("}").  The expression is</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">   expanded by determining the expression type and then following that</td><td> </td><td class="right">   expanded by determining the expression type and then following that</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">   type's expansion process for each comma-separated varspec in the</td><td> </td><td class="right">   type's expansion process for each comma-separated varspec in the</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">   expression.  Level 1 templates are limited to the default operator</td><td> </td><td class="right">   expression.  Level 1 templates are limited to the default operator</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">   (simple string value expansion) and a single variable per expression.</td><td> </td><td class="right">   (simple string value expansion) and a single variable per expression.</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">   Level 2 templates are limited to a single varspec per expression.</td><td> </td><td class="right">   Level 2 templates are limited to a single varspec per expression.</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">   The expression type is determined by looking at the first character</td><td> </td><td class="right">   The expression type is determined by looking at the first character</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">   after the opening brace.  If the character is an operator, then</td><td> </td><td class="right">   after the opening brace.  If the character is an operator, then</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">   remember the expression type associated with that operator for later</td><td> </td><td class="right">   remember the expression type associated with that operator for later</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0066" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">   expansion decisions and skip to the next character for the var<span class="delete">spec</span></td><td> </td><td class="rblock">   expansion decisions and skip to the next character for the var<span class="insert">iable-</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">   list.  If the first character is not an operator, then the expression</td><td> </td><td class="right">   list.  If the first character is not an operator, then the expression</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0067" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">   type is simple expansion and the first character is the beginning of</td><td> </td><td class="rblock">   type is simple <span class="insert">string</span> expansion and the first character is the</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">   the <span class="delete">varspec list.</span></td><td> </td><td class="rblock">   beginning of the <span class="insert">variable-list.</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete"></span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">3.2.1.  Undefined Variable Expansion</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete"></span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">   Regardless of the expression type, a variable that is undefined has</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">   no value.  A variable defined as a list or structure of component</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">   values is considered undefined if the list contains zero members or</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">   all of the structure's components are undefined.</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete"></span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">   If a default value is provided for an undefined variable, as</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">   described for Level 2 (and above) templates in Section 2.5, then the</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">   default string is substituted in its place as the entire expansion</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">   for that varspec.  If all of the variables in an expression are</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">   undefined and no defaults are given, then the expression's expansion</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">   is the empty string.</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete"></span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">3.2.2.  Simple String Expansion: {var}</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0068" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">   The <span class="delete">default expression type when no operator is given is simple</span></td><td> </td><td class="rblock">   The <span class="insert">examples</span> in the <span class="insert">subsections below use the following definitions</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">   string expansion.  For each defined variable in the variable-list,</span></td><td> </td><td class="rblock"><span class="insert">   for variable values:</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">   modify its value as indicated by the optional modifiers (if any),</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">   encode the value as UTF-8, pct-encode any octets that are not</span> in the</td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">   <span class="delete">unreserved set, and then append the encoded value to the result</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">   string.  If more than one value is appended, separate each value with</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">   a comma (",").</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0069" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">   <span class="delete">For example,</span></td><td> </td><td class="rblock">         <span class="insert">dom   := "example.com"</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">         dub   := "me/too"</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">         foo   := "That's right!"</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">         hello := "Hello World!"</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">         half  := "50%"</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">         var   := "value"</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">         who   := "fred"</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">         base  := "http://example.com/home/"</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">         path  := "/foo/bar"</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">         list  := [ "red", "green", "blue" ]</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">         keys  := [("semi",";"),("dot","."),("comma",",")]</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">         v     := "6"</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">         x     := "1024"</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">         y     := "768"</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">         empty := ""</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">         empty_keys  := []</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">         undef := null</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0070" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">     foo := "fred"</span></td><td> </td><td class="rblock"><span class="insert">3.2.1.  Variable Expansion</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0071" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">     <span class="delete">"{foo}"        -&gt; "fred"</span></td><td> </td><td class="rblock">   <span class="insert">A variable that is undefined has no value and is ignored by the</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">     "{foo,foo}"    -&gt; "fred,fred"</span></td><td> </td><td class="rblock"><span class="insert">   expansion process.  A variable defined as a list value is considered</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">     "{bar,foo}"    -&gt; "fred"</span></td><td> </td><td class="rblock"><span class="insert">   undefined if the list contains zero members.  A variable defined as</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">     "{bar|wilma}"  -&gt; "wilma"</span></td><td> </td><td class="rblock"><span class="insert">   an associative array of (name, value) pairs is considered undefined</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">   if the array contains zero members or if all member names in the</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">   array have undefined values.  If all of the variables in an</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">   expression are undefined, then the expression's expansion is the</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">   empty string.</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0072" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">   <span class="delete">Level 1 templates are limited to single variable expressions with no</span></td><td> </td><td class="rblock">   <span class="insert">Variable</span> expansion <span class="insert">of a defined, non-empty value results</span> in <span class="insert">a</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">   modifiers, defaults, or value structures.  Simple string</span> expansion in</td><td> </td><td class="rblock"><span class="insert">   substring of allowed URI characters.  A template processor MUST</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">   <span class="delete">Level 2 templates adds variable defaulting,</span> as <span class="delete">defined</span> in</td><td> </td><td class="rblock"><span class="insert">   encode the value string</span> as <span class="insert">UTF-8 and transform each octet that is not</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">   <span class="delete">Section 2.5.  Level 3 templates</span> allow <span class="delete">a list</span> of <span class="delete">variables.  Level 4</span></td><td> </td><td class="rblock">   in <span class="insert">the allowed set into the corresponding pct-encoded triplet.  The</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">   templates add compound variable</span> types and value <span class="delete">modifiers,</span> as</td><td> </td><td class="rblock"><span class="insert">   allowed set depends on the expression type: reserved ("+") and</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">   <span class="delete">follows:</span></td><td> </td><td class="rblock"><span class="insert">   fragment ("#") expansions</span> allow <span class="insert">the set</span> of <span class="insert">characters in ( unreserved</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">   / reserved / pct-encoded ) to be passed through without pct-encoding,</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">   whereas all other expression</span> types <span class="insert">allow only unreserved characters</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">   to be passed through without pct-encoding.  Note that the percent</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">   character ("%") is only allowed as part of a pct-encoded triplet</span> and</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock">   <span class="insert">only for reserved/fragment expansion: in all other cases, a</span> value <span class="insert">of</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">   "%" MUST be pct-encoded</span> as <span class="insert">"%25" by variable expansion.</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0073" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">   <span class="delete">For</span> a variable <span class="delete">defined as</span> a <span class="delete">single value string, the explode modifier</span></td><td> </td><td class="rblock">   <span class="insert">If</span> a variable <span class="insert">appears more than once in an expression or within</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">   has no effect.  The prefix modifier limits the expansion to</span> the <span class="delete">first</span></td><td> </td><td class="rblock"><span class="insert">   multiple expressions of</span> a <span class="insert">URI Template,</span> the <span class="insert">value</span> of that <span class="insert">variable</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">   max-length characters</span> of that <span class="delete">single value.  If</span> the <span class="delete">value contains</span></td><td> </td><td class="rblock"><span class="insert">   MUST remain static throughout</span> the <span class="insert">expansion process (i.e., the</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">   pct-encoded triplets, multibyte UTF-8, or both, care</span> must <span class="delete">be taken to</span></td><td> </td><td class="rblock"><span class="insert">   variable</span> must <span class="insert">have</span> the <span class="insert">same</span> value <span class="insert">for the purpose of calculating</span> each</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">   avoid splitting</span> the value <span class="delete">in mid-character: count</span> each <span class="delete">Unicode</span></td><td> </td><td class="rblock">   <span class="insert">expansion).  However, if reserved characters or pct-encoded triplets</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">   codepoint as one character.</span></td><td> </td><td class="rblock"><span class="insert">   occur in the value, they will be pct-encoded by some expression types</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">   and not by others.</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0074" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">   For a variable <span class="delete">defined as a list of values, when no value modifier is</span></td><td> </td><td class="rblock">   For a variable <span class="insert">that</span> is <span class="insert">a simple</span> string <span class="insert">value,</span> expansion consists of</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">   present or the explode modifier</span> is <span class="delete">given, the variable's</span> string</td><td> </td><td class="rblock">   <span class="insert">appending</span> the <span class="insert">encoded</span> value <span class="insert">to the result string.  The explode</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">   expansion consists of <span class="delete">a concatenation of</span> the <span class="delete">individual values with</span></td><td> </td><td class="rblock">   modifier has no effect.  <span class="insert">The prefix modifier limits the expansion to</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">   each</span> value <span class="delete">separated by a comma (",").  A prefix</span> modifier has no</td><td> </td><td class="rblock"><span class="insert">   the first max-length characters of the decoded value.  If the value</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">   effect.</td><td> </td><td class="rblock"><span class="insert">   contains multibyte UTF-8, care must be taken to avoid splitting the</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">   value in mid-character: count each Unicode codepoint as one</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">   character.</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0075" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">   <span class="delete">A</span> variable <span class="delete">defined as an associative array</span> is <span class="delete">expanded as</span> a list of</td><td> </td><td class="rblock">   <span class="insert">For a</span> variable <span class="insert">that</span> is a list of <span class="insert">values, expansion consists of</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">   <span class="delete">alternating key and value pairs, excluding any keys for which</span> the</td><td> </td><td class="rblock"><span class="insert">   concatenating</span> the <span class="insert">defined member string values, encoded as above,</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">   <span class="delete">corresponding value is undefined, when</span> no <span class="delete">value</span> modifier is <span class="delete">present.</span></td><td> </td><td class="rblock"><span class="insert">   with a separator string inserted between those values.  A prefix</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">   If</span> the explode modifier is given, <span class="delete">then</span> the <span class="delete">keys with</span> defined <span class="delete">values</span></td><td> </td><td class="rblock"><span class="insert">   modifier has</span> no <span class="insert">effect.  If no explode</span> modifier is <span class="insert">given,</span> the</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">   are expanded as "key=value" pairs instead of "key,value".  A prefix</span></td><td> </td><td class="rblock">   <span class="insert">separator string is a comma (",").  If an</span> explode modifier is given,</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">   modifier has no effect.</span></td><td> </td><td class="rblock">   the <span class="insert">separator string is</span> defined <span class="insert">per operator by the following table,</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">   where NUL is the default expression type:</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0076" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">3.2.3.  Reserved expansion: {+var}</span></td><td> </td><td class="rblock">   <span class="insert">.-----------------------------------------------------------------.</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">   |  operator:  NUL     +      .      /      ;      ?      &amp;     #  |</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">   | separator:  ","    ","    "."    "/"    ";"    "&amp;"    "&amp;"   "," |</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">   `-----------------------------------------------------------------'</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0077" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">   <span class="delete">Reserved expansion</span> is <span class="delete">identical to simple</span> expansion <span class="delete">except that the</span></td><td> </td><td class="rblock">   <span class="insert">For a variable that</span> is <span class="insert">an associative array,</span> expansion <span class="insert">consists of a</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">   substituted values may contain characters in</span> the <span class="delete">reserved set.</span>  The</td><td> </td><td class="rblock"><span class="insert">   list of either "name,value" (without explode modifier) or</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">   <span class="delete">reserved expansion operator "+"</span> is defined for <span class="delete">Level 2 templates (and</span></td><td> </td><td class="rblock"><span class="insert">   "name=value" (with explode modifier) pairs, excluding any pairs for</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">   above).</span></td><td> </td><td class="rblock"><span class="insert">   which</span> the <span class="insert">corresponding value is undefined, with a separator string</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">   inserted between defined pairs.</span>  The <span class="insert">separator string</span> is defined <span class="insert">in</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">   the same way as</span> for <span class="insert">list variables above.  Both the name and value</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">   strings are encoded in the same way as simple string values.</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0078" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">   For example,</span></td><td> </td><td class="rblock"><span class="insert">3.2.2.  Simple String Expansion: {var}</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0079" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">     <span class="delete">foo  := "That's right!"</span></td><td> </td><td class="rblock">   <span class="insert">Simple string expansion is the default expression type when no</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">   operator is given.</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0080" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">     <span class="delete">"{foo}"        -&gt; "That%27s%20right%21"</span></td><td> </td><td class="rblock">   <span class="insert">For each defined variable in the variable-list, perform variable</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">     "{+foo}"       -&gt; "That%27s%20right!"</span></td><td> </td><td class="rblock"><span class="insert">   expansion, as defined in Section 3.2.1, with the allowed characters</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">   being those in the unreserved set.  If more than one variable has a</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">   defined value, append a comma (",") to the result string as a</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">   separator between variable expansions.</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0081" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">     <span class="delete">base := "http://example.com/home/"</span></td><td> </td><td class="rblock">     <span class="insert">Example Template     Expansion</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0082" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">     <span class="delete">"{base}index"  -&gt; "http%3A%2F%2Fexample.com%2Fhome%2Findex"</span></td><td> </td><td class="rblock">       <span class="insert">{var}              value</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">     "{+base}index" -&gt; "http://example.com/home/index"</span></td><td> </td><td class="rblock"><span class="insert">       {hello}            Hello%20World%21</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">       {half}             50%25</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">       O{empty}X          OX</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">       O{undef}X          OX</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">       {x,y}              1024,768</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">       {x,hello,y}        1024,Hello%20World%21,768</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">       ?{x,empty}         ?1024,</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">       ?{x,undef}         ?1024</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">       ?{undef,y}         ?768</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">       {var:3}            val</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">       {var:30}           value</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">       {list}             red,green,blue</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">       {list*}            red,green,blue</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">       {keys}             semi,%3B,dot,.,comma,%2C</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">       {keys*}            semi=%3B,dot=.,comma=%2C</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0083" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">   <span class="delete">The same expansion process is followed as in Section 3.2.2 except</span></td><td> </td><td class="rblock"><span class="insert">3.2.3.  Reserved expansion: {+var}</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">   that, instead of "pct-encode any octets that are not in the</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">   unreserved set", we pct-encode any octets that are not in either the</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">   reserved or unreserved sets.</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0084" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">3.2.4.  Label</span> expansion <span class="delete">with dot-prefix: {.var}</span></td><td> </td><td class="rblock">   <span class="insert">Reserved expansion, as indicated by the plus ("+") operator for Level</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">   2 and above templates, is identical to simple string</span> expansion <span class="insert">except</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">   that the substituted values may also contain pct-encoded triplets and</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">   characters in the reserved set.</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0085" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">   <span class="delete">The dot (".") operator indicates that</span> the <span class="delete">expression type is label</span></td><td> </td><td class="rblock">   <span class="insert">For each defined variable in</span> the <span class="insert">variable-list, perform variable</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">   expansion, <span class="delete">which can be useful for describing URI spaces</span> with <span class="delete">varying</span></td><td> </td><td class="rblock">   expansion, <span class="insert">as defined in Section 3.2.1,</span> with <span class="insert">the allowed characters</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">   domain names or path selectors (e.g., filename extensions).</span></td><td> </td><td class="rblock"><span class="insert">   being those in the set (unreserved / reserved / pct-encoded).  If</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">   more than one variable has a defined value, append a comma (",") to</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">   the result string as a separator between variable expansions.</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0086" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">     <span class="delete">For each variable in the variable-list, do one of</span></td><td> </td><td class="rblock">     <span class="insert">Example Template        Expansion</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0087" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       <span class="delete">a) if the variable has a defined value</span></td><td> </td><td class="rblock">       <span class="insert">{foo}                 That%27s%20right%21</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">       {+foo}                That%27s%20right!</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">       {+half}               50%25</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0088" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">           <span class="delete">1) modify its</span> value <span class="delete">as indicated by the optional</span></td><td> </td><td class="rblock">       <span class="insert">{base}index           http%3A%2F%2Fexample.com%2Fhome%2Findex</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">              modifiers (if any);</span></td><td> </td><td class="rblock"><span class="insert">       {+base}index          http://example.com/home/index</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">       {+var}</span>                value</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock">       <span class="insert">{+hello}              Hello%20World!</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">       O{+empty}X            OX</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">       O{+undef}X            OX</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0089" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">           <span class="delete">2) encode the value as UTF-8;</span></td><td> </td><td class="rblock">       <span class="insert">{+path}/here          /foo/bar/here</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">       here?ref={+path}      here?ref=/foo/bar</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">       up{+path}{var}/here   up/foo/barvalue/here</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">       {+x,hello,y}          1024,Hello%20World!,768</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">       {+path,x}/here        /foo/bar,1024/here</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0090" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">           <span class="delete">3) pct-encode any octets that are not in the</span></td><td> </td><td class="rblock">       <span class="insert">{+path:6}/here        /foo/b/here</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">              unreserved set;</span></td><td> </td><td class="rblock"><span class="insert">       {+list}               red,green,blue</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">       {+list*}              red,green,blue</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">       {+keys}               semi,;,dot,.,comma,,</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">       {+keys*}              semi=;,dot=.,comma=,</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0091" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">           4) append "." to the result string; and,</span></td><td> </td><td class="rblock"><span class="insert">3.2.4.  Fragment expansion: {#var}</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0092" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">           <span class="delete">5) append</span> the <span class="delete">encoded value</span> to the result <span class="delete">string.</span></td><td> </td><td class="rblock">   <span class="insert">Fragment expansion, as indicated by</span> the <span class="insert">crosshatch ("#") operator for</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">   Level 2 and above templates, is identical to reserved expansion</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">   except that a crosshatch character (fragment delimiter) is appended</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">   first</span> to the result <span class="insert">string if any of the variables are defined.</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0093" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">     <span class="delete">  b) if the variable is undefined and a default is given,</span></td><td> </td><td class="rblock">     <span class="insert">Example Template     Expansion</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0094" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">           <span class="delete">1) encode the default string as UTF-8;</span></td><td> </td><td class="rblock">       <span class="insert">{#foo}             #That%27s%20right!</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">       {#var}             #value</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">       {#hello}           #Hello%20World!</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">       {#half}            #50%25</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">       foo{#empty}        foo#</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">       foo{#undef}        foo</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">       {#x,hello,y}       #1024,Hello%20World!,768</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">       {#path,x}/here     #/foo/bar,1024/here</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">       {#path:6}/here     #/foo/b/here</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">       {#list}            #red,green,blue</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">       {#list*}           #red,green,blue</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">       {#keys}            #semi,;,dot,.,comma,,</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">       {#keys*}           #semi=;,dot=.,comma=,</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0095" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">           2) append "." to the result string; and,</span></td><td> </td><td class="rblock"><span class="insert">3.2.5.  Label expansion with dot-prefix: {.var}</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0096" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">           <span class="delete">3) append</span> the <span class="delete">default to the result string.</span></td><td> </td><td class="rblock">   <span class="insert">Label expansion, as indicated by</span> the <span class="insert">dot (".") operator for Level 3</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">   and above templates, is useful for describing URI spaces with varying</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">   domain names or path selectors (e.g., filename extensions).</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0097" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       <span class="delete">c) the</span> variable <span class="delete">is undefined</span> and <span class="delete">has no default,</span></td><td> </td><td class="rblock">   <span class="insert">For each defined</span> variable <span class="insert">in the variable-list, append "." to the</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">          so ignore this variable.</span></td><td> </td><td class="rblock"><span class="insert">   result string</span> and <span class="insert">then perform variable expansion, as defined in</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">   Section 3.2.1, with the allowed characters being those in the</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">   unreserved set.</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0098" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">   Since "." is <span class="delete">not in the </span>reserved set, a value that contains a "." has</td><td> </td><td class="rblock">   Since "." is <span class="insert">in the un</span>reserved set, a value that contains a "." has</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">   the effect of adding multiple labels.</td><td> </td><td class="right">   the effect of adding multiple labels.</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0099" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">   <span class="delete">For example,</span></td><td> </td><td class="rblock">     <span class="insert">Example Template     Expansion</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete"></span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">     foo := "fred"</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete"></span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">     "{foo}"        -&gt; ".fred"</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">     "{foo,foo}"    -&gt; ".fred.fred"</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">     "{bar,foo}"    -&gt; ".fred"</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">     "{bar|wilma}"  -&gt; ".wilma"</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete"></span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">   Label expansion only applies to Level 3 and Level 4 templates.  Level</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">   4 templates add compound variable types and value modifiers, as</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">   follows:</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete"></span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">   For a variable defined as a single value string, the explode modifier</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">   has no effect.  The prefix modifier limits the expansion to the first</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">   max-length characters of that single value.  If the value contains</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">   pct-encoded triplets, multibyte UTF-8, or both, care must be taken to</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">   avoid splitting the value in mid-character: count each Unicode</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">   codepoint as one character.</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete"></span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">   For a variable defined as a list of values, when no value modifier is</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">   present or the explode modifier is given, the variable's string</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">   expansion consists of a concatenation of the individual defined</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">   values with each value prepended by a dot (".").  A prefix modifier</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">   has no effect.</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete"></span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">   When no value modifier is present, a variable defined as an</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">   associative array is expanded by appending the (key, value) pairs as</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">   alternating labels (i.e., ".key.value"), but excluding any keys for</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">   which the corresponding value is undefined.  If the explode modifier</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">   is given, then the keys with defined values are expanded as</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">   ".key=value" instead of ".key.value".  A prefix modifier has no</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">   effect.</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete"></span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">3.2.5.  Path segment expansion: {/var}</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete"></span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">   The slash ("/") operator indicates that the expression type is</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">   hierarchical path segment expansion, which can be useful for</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">   describing URI path hierarchies.</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete"></span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">     For each variable in the variable-list, do one of</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0100" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       <span class="delete">a) if the variable has a defined value</span></td><td> </td><td class="rblock">       <span class="insert">{.who}             .fred</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">       {.who,who}         .fred.fred</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">       {.half,who}        .50%25.fred</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">       www{.dom}          www.example.com</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">       X{.var}            X.value</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">       X{.empty}          X.</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">       X{.undef}          X</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">       X{.var:3}          X.val</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">       X{.list}           X.red,green,blue</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">       X{.list*}          X.red.green.blue</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">       X{.keys}           X.semi,%3B,dot,.,comma,%2C</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">       X{.keys*}          X.semi=%3B.dot=..comma=%2C</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">       X{.empty_keys}     X</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">       X{.empty_keys*}    X</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0101" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">           <span class="delete">1) modify its value as indicated by the optional</span></td><td> </td><td class="rblock"><span class="insert">3.2.6.  Path segment expansion: {/var}</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">              modifiers (if any);</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0102" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">           <span class="delete">2) encode the value</span> as <span class="delete">UTF-8;</span></td><td> </td><td class="rblock">   <span class="insert">Path segment expansion,</span> as <span class="insert">indicated by the slash ("/") operator in</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">   Level 3 and above templates, is useful for describing URI path</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">   hierarchies.</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0103" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">           <span class="delete">3) pct-encode any octets that are not</span> in the</td><td> </td><td class="rblock">   <span class="insert">For each defined variable in the variable-list, append "/" to the</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">              unreserved <span class="delete">set;</span></td><td> </td><td class="rblock"><span class="insert">   result string and then perform variable expansion, as defined in</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">   Section 3.2.1, with the allowed characters being those</span> in the</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock">   unreserved <span class="insert">set.</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0104" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">           <span class="delete">4) append "/"</span> to the <span class="delete">result string; and,</span></td><td> </td><td class="rblock">   <span class="insert">Note that the expansion process for path segment expansion is</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">   identical</span> to <span class="insert">that of label expansion aside from</span> the <span class="insert">substitution of</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">   "/" instead of ".".  However, unlike ".", a "/" is a reserved</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">   character and will be pct-encoded if found in a value.</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0105" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">     <span class="delete">      5) append the encoded value to the result string.</span></td><td> </td><td class="rblock">     <span class="insert">Example Template     Expansion</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0106" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       <span class="delete">b) if the variable is undefined and a default is given,</span></td><td> </td><td class="rblock">       <span class="insert">{/who}             /fred</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">       {/who,who}         /fred/fred</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">       {/half,who}        /50%25/fred</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">       {/who,dub}         /fred/me%2Ftoo</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">       {/var}             /value</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">       {/var,empty}       /value/</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">       {/var,undef}       /value</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">       {/var,x}/here      /value/1024/here</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">       {/var:1,var}       /v/value</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">       {/list}            /red,green,blue</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">       {/list*}           /red/green/blue</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">       {/list*,path:4}    /red/green/blue/%2Ffoo</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">       {/keys}            /semi,%3B,dot,.,comma,%2C</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">       {/keys*}           /semi=%3B/dot=./comma=%2C</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0107" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">           1) encode the default string as UTF-8;</span></td><td> </td><td class="rblock"><span class="insert">3.2.7.  Path-style parameter expansion: {;var}</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0108" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">           <span class="delete">2) append "/" to</span> the <span class="delete">result string; and,</span></td><td> </td><td class="rblock">   <span class="insert">Path-style parameter expansion, as indicated by</span> the <span class="insert">semicolon (";")</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">   operator in Level 3 and above templates, is useful for describing URI</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">   path parameters, such as "pathname;property" or "pathname;key=value".</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0109" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">           <span class="delete">3)</span> append the <span class="delete">default</span> to the result <span class="delete">string.</span></td><td> </td><td class="rblock">   <span class="insert">For each defined variable in the variable-list:</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">   o</span>  append <span class="insert">";" to the result string;</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">   o  if no explode modifier is present or</span> the <span class="insert">variable does not have a</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">      composite value, append the variable name (encoded as if it were a</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">      literal string)</span> to the result <span class="insert">string and, if the variable's value</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">      is not empty, append "=" to the result string; and,</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">   o  perform variable expansion, as defined in Section 3.2.1, with the</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">      allowed characters being those in the unreserved set.</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0110" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       <span class="delete">c) the variable is undefined and has no default,</span></td><td> </td><td class="rblock">     <span class="insert">Example Template     Expansion</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">          so ignore this variable.</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0111" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">   <span class="delete">Note that the expansion process for path segment expansion is</span></td><td> </td><td class="rblock">       <span class="insert">{;who}             ;who=fred</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">   identical to that of label expansion aside from the substitution of</span></td><td> </td><td class="rblock"><span class="insert">       {;half}            ;half=50%25</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">   "/" instead of ".".</span></td><td> </td><td class="rblock"><span class="insert">       {;empty}           ;empty</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">       {;v,empty,who}     ;v=6;empty;who=fred</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">       {;v,bar,who}       ;v=6;who=fred</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">       {;x,y}             ;x=1024;y=768</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">       {;x,y,empty}       ;x=1024;y=768;empty</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">       {;x,y,undef}       ;x=1024;y=768</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">       {;hello:5}         ;hello=Hello</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">       {;list}            ;list=red,green,blue</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">       {;list*}           ;red;green;blue</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">       {;keys}            ;keys=semi,%3B,dot,.,comma,%2C</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">       {;keys*}           ;semi=%3B;dot=.;comma=%2C</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0112" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">   For example,</span></td><td> </td><td class="rblock"><span class="insert">3.2.8.  Form-style query expansion: {?var}</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0113" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">     <span class="delete">foo := "fred"</span></td><td> </td><td class="rblock">   <span class="insert">Form-style query expansion, as indicated by the question-mark ("?")</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">   operator in Level 3 and above templates, is useful for describing an</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">   entire optional query component.</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0114" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">     <span class="delete">"{foo}"        -&gt; "/fred"</span></td><td> </td><td class="rblock">   <span class="insert">For each defined variable in the variable-list:</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">     "{foo,foo}"    -&gt; "/fred/fred"</span></td><td> </td><td class="rblock"><span class="insert">   o  append "?" to the result string if this is the first defined value</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">     "{bar,foo}"    -&gt; "/fred"</span></td><td> </td><td class="rblock"><span class="insert">      or append "&amp;" thereafter;</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">     "{bar|wilma}"  -&gt; "/wilma"</span></td><td> </td><td class="rblock"><span class="insert">   o  if no explode modifier is present or the variable does not have a</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">      composite value, append the variable name (encoded as if it were a</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">      literal string) and an equals character ("=") to the result</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">      string; and,</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">   o  perform variable expansion, as defined in Section 3.2.1, with the</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">      allowed characters being those in the unreserved set.</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0115" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">   <span class="delete">Label expansion only applies to Level 3 and Level 4 templates.  Level</span></td><td> </td><td class="rblock">     <span class="insert">Example Template     Expansion</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">   4 templates add compound variable types and value modifiers, as</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">   follows:</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0116" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">   <span class="delete">For a variable defined as a single value string, the explode modifier</span></td><td> </td><td class="rblock">       <span class="insert">{?who}             ?who=fred</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">   has no effect.  The prefix modifier limits the expansion to the first</span></td><td> </td><td class="rblock"><span class="insert">       {?half}            ?half=50%25</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">   max-length characters of that single value.  If the value contains</span></td><td> </td><td class="rblock"><span class="insert">       {?x,y}             ?x=1024&amp;y=768</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">   pct-encoded triplets, multibyte UTF-8, or both, care must be taken to</span></td><td> </td><td class="rblock"><span class="insert">       {?x,y,empty}       ?x=1024&amp;y=768&amp;empty=</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">   avoid splitting the value in mid-character: count each Unicode</span></td><td> </td><td class="rblock"><span class="insert">       {?x,y,undef}       ?x=1024&amp;y=768</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">   codepoint as one character.</span></td><td> </td><td class="rblock"><span class="insert">       {?var:3}           ?var=val</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">       {?list}            ?list=red,green,blue</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">       {?list*}           ?list=red&amp;list=green&amp;list=blue</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">       {?keys}            ?keys=semi,%3B,dot,.,comma,%2C</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">       {?keys*}           ?semi=%3B&amp;dot=.&amp;comma=%2C</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0117" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">   <span class="delete">For a variable defined as a list of values, when no value modifier is</span></td><td> </td><td class="rblock"><span class="insert">3.2.9.  Form-style query continuation: {&amp;var}</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">   present or the explode modifier is given, the variable's string</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">   expansion consists of a concatenation of the individual defined</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">   values with each value prepended by a slash ("/").  A prefix modifier</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">   has no effect.</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0118" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">   <span class="delete">When no value modifier is present, a variable defined</span> as <span class="delete">an</span></td><td> </td><td class="rblock">   <span class="insert">Form-style query continuation,</span> as <span class="insert">indicated</span> by the <span class="insert">ampersand ("&amp;")</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">   associative array is expanded</span> by <span class="delete">appending the (key, value) pairs as</span></td><td> </td><td class="rblock"><span class="insert">   operator in Level 3 and above templates,</span> is <span class="insert">useful for describing</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">   alternating segments (i.e., "/key/value"), but excluding any keys for</span></td><td> </td><td class="rblock"><span class="insert">   optional &amp;name=value pairs in a template that already contains a</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">   which</span> the <span class="delete">corresponding value</span> is <span class="delete">undefined.  If the explode modifier</span></td><td> </td><td class="rblock"><span class="insert">   literal query component</span> with <span class="insert">fixed parameters.</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">   is given, then the keys</span> with <span class="delete">defined values are expanded as</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">   "/key=value" instead of "/key/value".  A prefix modifier has no</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">   effect.</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0119" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">3.2.6.  Path-style parameter expansion: {;var}</span></td><td> </td><td class="rblock">   <span class="insert">For each defined variable in the variable-list:</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">   o  append "&amp;" to the result string;</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">   o  if no explode modifier is present or the variable does not have a</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">      composite value, append the variable name (encoded as if it were a</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">      literal string) and an equals character ("=") to the result</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">      string; and,</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">   o  perform variable expansion, as defined in Section 3.2.1, with the</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">      allowed characters being those in the unreserved set.</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0120" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">   <span class="delete">TBD.</span></td><td> </td><td class="rblock">   <span class="insert">  Example Template     Expansion</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0121" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">3.2.7.  Form-style query expansion: {?var}</span></td><td> </td><td class="rblock">       <span class="insert">{&amp;who}             &amp;who=fred</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">       {&amp;half}            &amp;half=50%25</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">       ?fixed=yes{&amp;x}     ?fixed=yes&amp;x=1024</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">       {&amp;x,y,empty}       &amp;x=1024&amp;y=768&amp;empty=</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">       {&amp;x,y,undef}       &amp;x=1024&amp;y=768</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0122" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">   <span class="delete">TBD.</span></td><td> </td><td class="rblock">       <span class="insert">{&amp;var:3}           &amp;var=val</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">       {&amp;list}            &amp;list=red,green,blue</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">       {&amp;list*}           &amp;list=red&amp;list=green&amp;list=blue</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">       {&amp;keys}            &amp;keys=semi,%3B,dot,.,comma,%2C</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">       {&amp;keys*}           &amp;semi=%3B&amp;dot=.&amp;comma=%2C</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">4.  Security Considerations</td><td> </td><td class="right">4.  Security Considerations</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">   A URI Template does not contain active or executable content.  Other</td><td> </td><td class="right">   A URI Template does not contain active or executable content.  Other</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">   security considerations are the same as those for URIs, as described</td><td> </td><td class="right">   security considerations are the same as those for URIs, as described</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">   in section 7 of [RFC3986].</td><td> </td><td class="right">   in section 7 of [RFC3986].</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">5.  IANA Considerations</td><td> </td><td class="right">5.  IANA Considerations</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">   No IANA actions are required by this document.</td><td> </td><td class="right">   No IANA actions are required by this document.</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">6.  Acknowledgments</td><td> </td><td class="right">6.  Acknowledgments</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">   The following people made significant contributions to this</td><td> </td><td class="right">   The following people made significant contributions to this</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">   specification: Mike Burrows, Michaeljohn Clement, DeWitt Clinton,</td><td> </td><td class="right">   specification: Mike Burrows, Michaeljohn Clement, DeWitt Clinton,</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0123" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">   John Cowan, James H. Manger, and James Snell.</td><td> </td><td class="rblock">   John Cowan, James H. Manger, <span class="insert">Marc Portier, </span>and James Snell.</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">7.  Normative References</td><td> </td><td class="right">7.  Normative References</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">   [ASCII]    American National Standards Institute, "Coded Character</td><td> </td><td class="right">   [ASCII]    American National Standards Institute, "Coded Character</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">              Set - 7-bit American Standard Code for Information</td><td> </td><td class="right">              Set - 7-bit American Standard Code for Information</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">              Interchange", ANSI X3.4, 1986.</td><td> </td><td class="right">              Interchange", ANSI X3.4, 1986.</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">   [RFC2119]  Bradner, S., "Key words for use in RFCs to Indicate</td><td> </td><td class="right">   [RFC2119]  Bradner, S., "Key words for use in RFCs to Indicate</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">              Requirement Levels", BCP 14, RFC 2119, March 1997.</td><td> </td><td class="right">              Requirement Levels", BCP 14, RFC 2119, March 1997.</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr bgcolor="gray" ><td></td><th><a name="part-l12" /><small>skipping to change at</small><em> page 26, line 38</em></th><th> </th><th><a name="part-r12" /><small>skipping to change at</small><em> page 27, line 27</em></th><td></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">              (Reading, MA, Addison-Wesley, 2003. ISBN 0-321-18578-1),</td><td> </td><td class="right">              (Reading, MA, Addison-Wesley, 2003. ISBN 0-321-18578-1),</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">              as amended by Unicode 4.0.1</td><td> </td><td class="right">              as amended by Unicode 4.0.1</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">              (http://www.unicode.org/versions/Unicode4.0.1/)",</td><td> </td><td class="right">              (http://www.unicode.org/versions/Unicode4.0.1/)",</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">              March 2004.</td><td> </td><td class="right">              March 2004.</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">   [UTR15]    Davis, M. and M. Duerst, "Unicode Normalization Forms",</td><td> </td><td class="right">   [UTR15]    Davis, M. and M. Duerst, "Unicode Normalization Forms",</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">              Unicode Standard Annex # 15, April 2003.</td><td> </td><td class="right">              Unicode Standard Annex # 15, April 2003.</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">   [1]  &lt;http://lists.w3.org/Archives/Public/uri/&gt;</td><td> </td><td class="right">   [1]  &lt;http://lists.w3.org/Archives/Public/uri/&gt;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0124" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">Appendix A.  <span class="delete">Example URI Template Parser</span></td><td> </td><td class="rblock">Appendix A.  <span class="insert">Implementation Hints</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete"></span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">   Parsing a valid URI Template expression does not require building a</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">   parser from the given ABNF.  Instead, the set of allowed characters</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">   in each part of URI Template expression has been chosen to avoid</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">   complex parsing, and breaking an expression into its component parts</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">   can be achieved by a series of splits of the character string.</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete"></span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">   Here is example Python code that parses a URI Template expression and</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">   returns the operator, argument, and variables as a tuple.  The</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">   variables are returned as a dictionary of variable names mapped to</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">   their default values.  If no default is given then the name maps to</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">   None.</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0125" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">   <span class="delete">TBD.</span></td><td> </td><td class="rblock">   <span class="insert">The normative sections on expansion describe each operator with a</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">   separate expansion process for the sake of descriptive clarity.  In</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">   actual implementations, we expect the expressions to be processed</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">   left-to-right using a common algorithm that has only minor variations</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">   in process per operator.  This appendix describes one such algorithm.</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0126" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">Appendix B.  Revision History (to be removed by RFC Editor)</span></td><td> </td><td class="rblock"><span class="insert">   Initialize an empty result string and its non-error state.</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0127" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">   <span class="delete">05 - Introduced levels to differentiate between legacy, partial, and</span></td><td> </td><td class="rblock">   <span class="insert">Scan</span> the <span class="insert">template and copy literals</span> to the <span class="insert">result string (as in</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">   full implementations of URI Templates.  Changed</span> the <span class="delete">default indicator</span></td><td> </td><td class="rblock"><span class="insert">   Section 3.1) until an expression is indicated by a "{" or the</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">   to pipe ("|")</span> to <span class="delete">allow</span> the <span class="delete">defaults to contain</span> the <span class="delete">equals character</span></td><td> </td><td class="rblock"><span class="insert">   template ends.  When it ends, return</span> the <span class="insert">result string</span> and <span class="insert">its</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">   and <span class="delete">thus remove</span> the <span class="delete">need for complex defaulting for the different</span></td><td> </td><td class="rblock"><span class="insert">   current error or non-error state.</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">   variable types.  Removed suffix, remainder,</span> and <span class="delete">labelled value</span></td><td> </td><td class="rblock"><span class="insert">   o  If an expression is found, scan</span> the <span class="insert">template to the next "}"</span> and</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">   expansion because there didn't seem much interest</span> in <span class="delete">them.  Clarified</span></td><td> </td><td class="rblock">      <span class="insert">extract the characters</span> in <span class="insert">between the braces.</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">   that templates</span> and <span class="delete">values are processed as sequences of Unicode</span></td><td> </td><td class="rblock"><span class="insert">   o  If the template ends before a "}", then append the "{"</span> and</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">   codepoints rather than prematurely encoded as UTF-8, since that is</span></td><td> </td><td class="rblock">      <span class="insert">extracted characters</span> to <span class="insert">the result string</span> and <span class="insert">return</span> with <span class="insert">an error</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">   easier</span> to <span class="delete">explain</span> and <span class="delete">more consistent</span> with <span class="delete">common language routines</span></td><td> </td><td class="rblock"><span class="insert">      status indicating the expression is malformed.</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">   for processing Unicode strings.</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0128" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">   <span class="delete">04 - Changed</span> the <span class="delete">operator syntax to a single</span> character that is</td><td> </td><td class="rblock">   <span class="insert">Examine</span> the <span class="insert">first</span> character <span class="insert">of the extracted expression for an</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">   <span class="delete">analogous to its reserved role within the URI generic syntax,</span></td><td> </td><td class="rblock"><span class="insert">   operator.</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">   resulting</span> in <span class="delete">templates that are far more readable for</span> the <span class="delete">common</span></td><td> </td><td class="rblock"><span class="insert">   o  If the expression ended (i.e., is "{}"), an operator is found</span> that</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">   cases.  Added value modifiers for prefix</span> and <span class="delete">suffix expansion.  Added</span></td><td> </td><td class="rblock">      is <span class="insert">unknown or unimplemented, or the character is not</span> in the</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">   explode modifiers</span> to <span class="delete">allow expansion of complex variables</span> and <span class="delete">lists</span></td><td> </td><td class="rblock">      <span class="insert">varchar set (Section 2.3), then append "{", the extracted</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">   according</span> to <span class="delete">(external) variable types or schema.  Replaced use</span> of</td><td> </td><td class="rblock"><span class="insert">      expression,</span> and <span class="insert">"}"</span> to <span class="insert">the result string, remember that the result</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">   <span class="delete">"expansion" with "expression", since expansion is traditionally used</span></td><td> </td><td class="rblock"><span class="insert">      is in an error state,</span> and <span class="insert">then go back</span> to <span class="insert">scan the remainder</span> of</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">   to refer to</span> the <span class="delete">result after expanding</span> a <span class="delete">macro (not</span> the <span class="delete">macro</span></td><td> </td><td class="rblock">      the <span class="insert">template.</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">   itself).  Made applicable</span> to <span class="delete">any hypertext reference string, such</span></td><td> </td><td class="rblock"><span class="insert">   o  If</span> a <span class="insert">known and implemented operator is found, store</span> the <span class="insert">operator</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">   that</span> the <span class="delete">process for template expansion also includes transforming</span></td><td> </td><td class="rblock"><span class="insert">      and skip</span> to the <span class="insert">next character to begin</span> the <span class="insert">varspec-list.</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">   the <span class="delete">surrounding string into a proper URI-reference rather than</span></td><td> </td><td class="rblock"><span class="insert">   o  Otherwise, store</span> the <span class="insert">operator as NUL (simple string expansion).</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">   assuming it is already in absolute URI form.  Rewrote</span> the <span class="delete">text</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">   accordingly.</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0129" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">   <span class="delete">03 - Added more examples.  Introduced error conditions and</span> defined</td><td> </td><td class="rblock">   <span class="insert">Use the following value table to determine the processing behavior by</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">   <span class="delete">their handling.  Changed listjoin to list.  Changed -append</span> to</td><td> </td><td class="rblock"><span class="insert">   expression type operator.  The entry for "first" is the string to</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">   <span class="delete">-suffix, and allowed -prefix</span> and <span class="delete">-suffix</span> to <span class="delete">accept list variables.</span></td><td> </td><td class="rblock"><span class="insert">   append to the result first if any of the expression's variables are</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">   Clarified</span> the <span class="delete">handling</span> of <span class="delete">unicode.</span></td><td> </td><td class="rblock"><span class="insert">   defined.  The entry for "sep" is the separator to append to the</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">   result before any second (or subsequent)</span> defined <span class="insert">variable expansion.</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">   The entry for "named" is a boolean for whether or not the expansion</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">   includes the variable name when no explode modifier is given.  The</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">   entry for "ifemp" is a string</span> to <span class="insert">append to the name when the</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">   expansion includes the variable (or key) name</span> and <span class="insert">that variable (or</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">   key) has an empty value.  The entry for "allow" indicates what</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">   characters</span> to <span class="insert">allow unencoded within</span> the <span class="insert">value expansion: (U) means</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">   any character not in the unreserved set will be encoded; (U+R) means</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">   any character not in the (unreserved / reserved / pct-encoding) set</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">   will be encoded; and, for both cases, disallowed characters are</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">   encoded as UTF-8 (a sequence</span> of <span class="insert">octets) and then each octet is</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">   encoded as a pct-encoded triplet.</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0130" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">   <span class="delete">02 - Added operators and came up with coherent percent-encoding and</span></td><td> </td><td class="rblock">   <span class="insert">.------------------------------------------------------------------.</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">   reserved character story.  Added large examples section which is</span></td><td> </td><td class="rblock"><span class="insert">   |          NUL     +      .       /       ;      ?      &amp;      #   |</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">   extracted and tested against the implementation.</span></td><td> </td><td class="rblock"><span class="insert">   |------------------------------------------------------------------|</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">   | first |  ""     ""     "."     "/"     ";"    "?"    "&amp;"    "#"  |</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">   | sep   |  ","    ","    "."     "/"     ";"    "&amp;"    "&amp;"    ","  |</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">   | named | false  false  false   false   true   true   true   false |</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">   | ifemp |  ""     ""     ""      ""      ""     "="    "="    ""   |</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">   | allow |   U     U+R     U       U       U      U      U     U+R  |</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">   `------------------------------------------------------------------'</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0131" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">   <span class="delete">01</span></td><td> </td><td class="rblock">   <span class="insert">With the above table in mind, process the variable-list as follows:</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0132" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">   <span class="delete">00</span> - <span class="delete">Initial Revision.</span></td><td> </td><td class="rblock">   <span class="insert">For each varspec, extract the varname and optional modifier, lookup</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">   the value for that variable, and then:</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">   o  If the varname is unknown or corresponds to a variable with an</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">      undefined value (Section 3.2.1), then skip to the next varspec.</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">   o  If this is the first defined variable for this expression, append</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">      the first string for this expression type to the result string and</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">      remember that it has been done.  Otherwise, append the sep string</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">      to the result string.</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">   o  If an explode modifier is present, then</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">      *  If the variable is a list, then append each defined list member</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">         to the result string, after encoding any characters that are</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">         not in the allow set, with the sep string appended to the</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">         result between each defined list member.</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">      *  If the variable is an associative array of (name, value) pairs,</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">         then append each pair with a defined value to the result string</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">         as "name=value", after encoding any characters that are not in</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">         the allow set, with the sep string appended to the result</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">         between each defined pair.</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">      *  Otherwise (the variable is a string):</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">         +  If named is true, append the varname to the result string</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">            using the same encoding process as for literals, and</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock">            -  <span class="insert">if the value is empty, append the ifemp string to the</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">               result string and skip to the next varspec;</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">            -  otherwise, append "=" to the result string.</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">         +  Append the value to the result string after encoding any</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">            characters that are not in the allow set.</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">   o  If an explode modifier is not present, then</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">      *  If named is true, append the varname to the result string using</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">         the same encoding process as for literals, and</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">         +  if the value is empty, append the ifemp string to the result</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">            string and skip to the next varspec;</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">         +  otherwise, append "=" to the result string.</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">      *  If the variable is a list, append each defined list member to</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">         the result string, after encoding any characters that are not</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">         in the allow set, with a comma (",") appended to the result</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">         between each defined list member.</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">      *  If the variable is an associative array of (name, value) pairs,</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">         append each pair with a defined value to the result string as</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">         "name,value", after encoding any characters that are not in the</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">         allow set, with a comma (",") appended to the result between</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">         each defined pair.</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">      *  Otherwise (the variable is a string), then</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">         +  if a prefix modifier is present and the prefix length is</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">            less than the value string length in number of Unicode</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">            characters, append that number of characters from the</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">            beginning of the value string to the result string, after</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">            encoding any characters that are not in the allow set, while</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">            taking care not to split multi-octet or pct-encoded triplet</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">            characters that represent a single Unicode codepoint;</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">         +  otherwise, append the value to the result string after</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">            encoding any characters that are not in the allow set.</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">   When the variable-list for this expression is exhausted, go back to</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">   scan the remainder of the template.</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">Authors' Addresses</td><td> </td><td class="right">Authors' Addresses</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">   Joe Gregorio</td><td> </td><td class="right">   Joe Gregorio</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">   Google</td><td> </td><td class="right">   Google</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">   Email: joe@bitworking.org</td><td> </td><td class="right">   Email: joe@bitworking.org</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">   URI:   http://bitworking.org/</td><td> </td><td class="right">   URI:   http://bitworking.org/</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">   Roy T. Fielding (editor)</td><td> </td><td class="right">   Roy T. Fielding (editor)</td><td class="lineno" valign="top"></td></tr>

     <tr><td></td><td class="left"></td><td> </td><td class="right"></td><td></td></tr>
     <tr bgcolor="gray"><th colspan="5" align="center"><a name="end">&nbsp;End of changes. 132 change blocks.&nbsp;</a></th></tr>
     <tr class="stats"><td></td><th><i>502 lines changed or deleted</i></th><th><i> </i></th><th><i>588 lines changed or added</i></th><td></td></tr>
     <tr><td colspan="5" align="center" class="small"><br/>This html diff was produced by rfcdiff 1.34. The latest version is available from <a href="http://www.tools.ietf.org/tools/rfcdiff/" >http://tools.ietf.org/tools/rfcdiff/</a> </td></tr>
   </table>
   </body>
   </html>
