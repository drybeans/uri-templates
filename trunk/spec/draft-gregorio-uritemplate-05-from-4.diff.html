<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"> 
<!-- Generated by rfcdiff 1.34: rfcdiff  --> 
<!-- <!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional" > -->
<!-- System: Darwin simak 10.8.0 Darwin Kernel Version 10.8.0: Tue Jun  7 16:33:36 PDT 2011; root:xnu-1504.15.3~1/RELEASE_I386 i386 --> 
<!-- Using awk: /usr/local/bin/gawk: GNU Awk 3.1.8 --> 
<!-- Using diff: /usr/bin/diff: diff (GNU diffutils) 2.8.1 --> 
<!-- Using wdiff: /usr/local/bin/wdiff: wdiff (GNU wdiff) 0.6.5 --> 
<html> 
<head> 
  <meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1" /> 
  <meta http-equiv="Content-Style-Type" content="text/css" /> 
  <title>Diff: draft-gregorio-uritemplate-04.txt - draft-gregorio-uritemplate-05.txt</title> 
  <style type="text/css"> 
    body    { margin: 0.4ex; margin-right: auto; } 
    tr      { } 
    td      { white-space: pre; font-family: monospace; vertical-align: top; font-size: 0.86em;} 
    th      { font-size: 0.86em; } 
    .small  { font-size: 0.6em; font-style: italic; font-family: Verdana, Helvetica, sans-serif; } 
    .left   { background-color: #EEE; } 
    .right  { background-color: #FFF; } 
    .diff   { background-color: #CCF; } 
    .lblock { background-color: #BFB; } 
    .rblock { background-color: #FF8; } 
    .insert { background-color: #8FF; } 
    .delete { background-color: #ACF; } 
    .void   { background-color: #FFB; } 
    .cont   { background-color: #EEE; } 
    .linebr { background-color: #AAA; } 
    .lineno { color: red; background-color: #FFF; font-size: 0.7em; text-align: right; padding: 0 2px; } 
    .elipsis{ background-color: #AAA; } 
    .left .cont { background-color: #DDD; } 
    .right .cont { background-color: #EEE; } 
    .lblock .cont { background-color: #9D9; } 
    .rblock .cont { background-color: #DD6; } 
    .insert .cont { background-color: #0DD; } 
    .delete .cont { background-color: #8AD; } 
    .stats, .stats td, .stats th { background-color: #EEE; padding: 2px 0; } 
  </style> 
</head> 
<body > 
  <table border="0" cellpadding="0" cellspacing="0"> 
  <tr bgcolor="orange"><th></th><th>&nbsp;draft-gregorio-uritemplate-04.txt&nbsp;</th><th> </th><th>&nbsp;draft-gregorio-uritemplate-05.txt&nbsp;</th><th></th></tr> 
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0001" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">Network Working Group                                   <span class="delete">J. Gregorio, Ed.</span></td><td> </td><td class="rblock">Network Working Group                                   <span class="insert">     J. Gregorio</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">Internet-Draft                                                    Google</td><td> </td><td class="right">Internet-Draft                                                    Google</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">Intended status: Standards Track                        R. Fielding, Ed.</td><td> </td><td class="right">Intended status: Standards Track                        R. Fielding, Ed.</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0002" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">Expires: <span class="delete">September 9, 2010                                  Day Software</span></td><td> </td><td class="rblock">Expires: <span class="insert">January 12, 2012                                          Adobe</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">                                                          M. <span class="delete">Hadley, Ed.</span></td><td> </td><td class="rblock">                                                               M. <span class="insert">Hadley</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                                                                  Oracle</td><td> </td><td class="right">                                                                  Oracle</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0003" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">                                                      <span class="delete">M. Nottingham, Ed.</span></td><td> </td><td class="rblock">                                                      <span class="insert">     M. Nottingham</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                                                              D. Orchard</td><td> </td><td class="right">                                                              D. Orchard</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0004" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">                                                            <span class="delete">Mar 08, 2010</span></td><td> </td><td class="rblock">                                                            <span class="insert">Jul 11, 2011</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                              URI Template</td><td> </td><td class="right">                              URI Template</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0005" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">                     draft-gregorio-uritemplate-0<span class="delete">4</span></td><td> </td><td class="rblock">                     draft-gregorio-uritemplate-0<span class="insert">5</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">Abstract</td><td> </td><td class="right">Abstract</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">   A URI Template is a compact sequence of characters for describing a</td><td> </td><td class="right">   A URI Template is a compact sequence of characters for describing a</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">   range of Uniform Resource Identifiers through variable expansion.</td><td> </td><td class="right">   range of Uniform Resource Identifiers through variable expansion.</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">   This specification defines the URI Template syntax and the process</td><td> </td><td class="right">   This specification defines the URI Template syntax and the process</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0006" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">   for expanding a URI Template into a <span class="delete">URI,</span> along with guidelines for</td><td> </td><td class="rblock">   for expanding a URI Template into a <span class="insert">URI reference,</span> along with</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">   the use of URI Templates on the Internet.</td><td> </td><td class="rblock">   guidelines for the use of URI Templates on the Internet.</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">Editorial Note (to be removed by RFC Editor)</td><td> </td><td class="right">Editorial Note (to be removed by RFC Editor)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">   To provide feedback on this Internet-Draft, join the W3C URI mailing</td><td> </td><td class="right">   To provide feedback on this Internet-Draft, join the W3C URI mailing</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">   list (http://lists.w3.org/Archives/Public/uri/) [1].</td><td> </td><td class="right">   list (http://lists.w3.org/Archives/Public/uri/) [1].</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">Status of this Memo</td><td> </td><td class="right">Status of this Memo</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0007" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">   This Internet-Draft is submitted <span class="delete">to IETF </span>in full conformance with the</td><td> </td><td class="rblock">   This Internet-Draft is submitted in full conformance with the</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">   provisions of BCP 78 and BCP 79.</td><td> </td><td class="right">   provisions of BCP 78 and BCP 79.</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">   Internet-Drafts are working documents of the Internet Engineering</td><td> </td><td class="right">   Internet-Drafts are working documents of the Internet Engineering</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0008" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">   Task Force <span class="delete">(IETF), its areas, and its working groups.</span>  Note that</td><td> </td><td class="rblock">   Task Force <span class="insert">(IETF).</span>  Note that other groups may also distribute</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">   other groups may also distribute working documents as Internet-</td><td> </td><td class="rblock">   working documents as <span class="insert">Internet-Drafts.  The list of current</span> Internet-</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">   <span class="delete">Drafts.</span></td><td> </td><td class="rblock">   <span class="insert">Drafts is at http://datatracker.ietf.org/drafts/current/.</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">   Internet-Drafts are draft documents valid for a maximum of six months</td><td> </td><td class="right">   Internet-Drafts are draft documents valid for a maximum of six months</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">   and may be updated, replaced, or obsoleted by other documents at any</td><td> </td><td class="right">   and may be updated, replaced, or obsoleted by other documents at any</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">   time.  It is inappropriate to use Internet-Drafts as reference</td><td> </td><td class="right">   time.  It is inappropriate to use Internet-Drafts as reference</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">   material or to cite them other than as "work in progress."</td><td> </td><td class="right">   material or to cite them other than as "work in progress."</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0009" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">   <span class="delete">The list of current Internet-Drafts can be accessed at</span></td><td> </td><td class="rblock">   This Internet-Draft will expire on <span class="insert">January 12, 2012.</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">   http://www.ietf.org/ietf/1id-abstracts.txt.</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete"></span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">   The list of Internet-Draft Shadow Directories can be accessed at</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">   http://www.ietf.org/shadow.html.</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">                                                                         </td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">   This Internet-Draft will expire on <span class="delete">September 9, 2010.</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">Copyright Notice</td><td> </td><td class="right">Copyright Notice</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0010" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">   Copyright (c) 201<span class="delete">0</span> IETF Trust and the persons identified as the</td><td> </td><td class="rblock">   Copyright (c) 201<span class="insert">1</span> IETF Trust and the persons identified as the</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">   document authors.  All rights reserved.</td><td> </td><td class="right">   document authors.  All rights reserved.</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">   This document is subject to BCP 78 and the IETF Trust's Legal</td><td> </td><td class="right">   This document is subject to BCP 78 and the IETF Trust's Legal</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">   Provisions Relating to IETF Documents</td><td> </td><td class="right">   Provisions Relating to IETF Documents</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">   (http://trustee.ietf.org/license-info) in effect on the date of</td><td> </td><td class="right">   (http://trustee.ietf.org/license-info) in effect on the date of</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">   publication of this document.  Please review these documents</td><td> </td><td class="right">   publication of this document.  Please review these documents</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">   carefully, as they describe your rights and restrictions with respect</td><td> </td><td class="right">   carefully, as they describe your rights and restrictions with respect</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">   to this document.  Code Components extracted from this document must</td><td> </td><td class="right">   to this document.  Code Components extracted from this document must</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">   include Simplified BSD License text as described in Section 4.e of</td><td> </td><td class="right">   include Simplified BSD License text as described in Section 4.e of</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">   the Trust Legal Provisions and are provided without warranty as</td><td> </td><td class="right">   the Trust Legal Provisions and are provided without warranty as</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0011" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">   described in the BSD License.</td><td> </td><td class="rblock">   described in the <span class="insert">Simplified </span>BSD License.</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">   This document may contain material from IETF Documents or IETF</td><td> </td><td class="right">   This document may contain material from IETF Documents or IETF</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">   Contributions published or made publicly available before November</td><td> </td><td class="right">   Contributions published or made publicly available before November</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">   10, 2008.  The person(s) controlling the copyright in some of this</td><td> </td><td class="right">   10, 2008.  The person(s) controlling the copyright in some of this</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">   material may not have granted the IETF Trust the right to allow</td><td> </td><td class="right">   material may not have granted the IETF Trust the right to allow</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">   modifications of such material outside the IETF Standards Process.</td><td> </td><td class="right">   modifications of such material outside the IETF Standards Process.</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">   Without obtaining an adequate license from the person(s) controlling</td><td> </td><td class="right">   Without obtaining an adequate license from the person(s) controlling</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">   the copyright in such materials, this document may not be modified</td><td> </td><td class="right">   the copyright in such materials, this document may not be modified</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">   outside the IETF Standards Process, and derivative works of it may</td><td> </td><td class="right">   outside the IETF Standards Process, and derivative works of it may</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">   not be created outside the IETF Standards Process, except to format</td><td> </td><td class="right">   not be created outside the IETF Standards Process, except to format</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">   it for publication as an RFC or to translate it into languages other</td><td> </td><td class="right">   it for publication as an RFC or to translate it into languages other</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">   than English.</td><td> </td><td class="right">   than English.</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">Table of Contents</td><td> </td><td class="right">Table of Contents</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">   1.  Introduction . . . . . . . . . . . . . . . . . . . . . . . . .  4</td><td> </td><td class="right">   1.  Introduction . . . . . . . . . . . . . . . . . . . . . . . . .  4</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">     1.1.  Overview . . . . . . . . . . . . . . . . . . . . . . . . .  4</td><td> </td><td class="right">     1.1.  Overview . . . . . . . . . . . . . . . . . . . . . . . . .  4</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0012" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">     1.2.  Expression Types . . . . . . . . . . . . . . . <span class="delete">. . . . . .  5</span></td><td> </td><td class="rblock">     1.2.  <span class="insert">Levels and</span> Expression Types  . . . . . . . . . . . . . . .  <span class="insert">6</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">     1.3.  Design Considerations  . . . . . . . . . . . . . . . . . .  <span class="delete">8</span></td><td> </td><td class="rblock">     1.3.  Design Considerations  . . . . . . . . . . . . . . . . . . <span class="insert">10</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">     1.4.  Limitations  . . . . . . . . . . . . . . . . . . . . . . .  <span class="delete">9</span></td><td> </td><td class="rblock">     1.4.  Limitations  . . . . . . . . . . . . . . . . . . . . . . . <span class="insert">11</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">     1.5.  Notational Conventions . . . . . . . . . . . . . . . . . .  <span class="delete">9</span></td><td> </td><td class="rblock">     1.5.  Notational Conventions . . . . . . . . . . . . . . . . . . <span class="insert">11</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">   2.  <span class="delete">URI Template</span> Syntax  . . . . . . . . . . . . . . . . . . . . . <span class="delete">11</span></td><td> </td><td class="rblock"><span class="insert">     1.6.  Character Encoding and Unicode Normalization . . . . . . . 12</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">     2.1.  Literals . . . . . . . . . . . . . . . . . . . . . . . . . <span class="delete">11</span></td><td> </td><td class="rblock">   2.  Syntax . . . . . . . . . . . . . . . . . . . . . <span class="insert">. . . . . . . 13</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">     2.2.  Expressions  . . . . . . . . . . . . . . . . . . . . . . . <span class="delete">11</span></td><td> </td><td class="rblock">     2.1.  Literals . . . . . . . . . . . . . . . . . . . . . . . . . <span class="insert">14</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">     2.3.  Variables  . . . . . . . . . . . . . . . . . . . . . . . . <span class="delete">12</span></td><td> </td><td class="rblock">     2.2.  Expressions  . . . . . . . . . . . . . . . . . . . . . . . <span class="insert">14</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">     2.4.  Value Modifiers  . . . . . . . . . . . . . . . . . . . . . <span class="delete">13</span></td><td> </td><td class="rblock">     2.3.  Variables  . . . . . . . . . . . . . . . . . . . . . . . . <span class="insert">15</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       2.4.1.  <span class="delete">Component</span> Values . . . . . . . . . . . . . . . . . . . <span class="delete">13</span></td><td> </td><td class="rblock">     2.4.  Value Modifiers  . . . . . . . . . . . . . . . . . . . . . <span class="insert">16</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       2.4.2.  <span class="delete">Prefix and Suffix</span> Values . . . . . . . . . . . . . . . <span class="delete">14</span></td><td> </td><td class="rblock">       2.4.1.  <span class="insert">Prefix</span> Values  . . . . . . . . . . . . . . . . . . . <span class="insert">. 16</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">     2.5.  Value Defaults . . . . . . . . . . . . . . . . . . . . . . <span class="delete">15</span></td><td> </td><td class="rblock">       2.4.2.  <span class="insert">Component</span> Values . . . . . . . . . . . . . . . <span class="insert">. . . . 17</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">   3.  <span class="delete">URI Template</span> Expansion . . . . . . . . . . . . . . . . . . . . <span class="delete">18</span></td><td> </td><td class="rblock">     2.5.  Value Defaults . . . . . . . . . . . . . . . . . . . . . . <span class="insert">17</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">     3.1.  Unicode normalization  . . . . . . . . . . . .</span> . . . . . . <span class="delete">18</span></td><td> </td><td class="rblock">   3.  Expansion  . . . . . . . . . . . . . . . . . . . . . . . . . . <span class="insert">19</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">     3.2.</span>  Literal <span class="delete">expansion</span>  . . . . . . . . . . . . . . . . . . . . <span class="delete">18</span></td><td> </td><td class="rblock"><span class="insert">     3.1.</span>  Literal <span class="insert">Expansion</span>  . . . . . . . . . . . . . . . . . . . . <span class="insert">19</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">     3.3.</span>  Expression <span class="delete">expansion</span> . . . . . . . . . . . . . . . . . . . <span class="delete">19</span></td><td> </td><td class="rblock"><span class="insert">     3.2.</span>  Expression <span class="insert">Expansion</span> . . . . . . . . . . . . . . . . . . . <span class="insert">20</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">     3.4.</span>  Variable <span class="delete">and modifier expansion</span>  . . . . . . . . . . . . . <span class="delete">19</span></td><td> </td><td class="rblock"><span class="insert">       3.2.1.  Undefined</span> Variable <span class="insert">Expansion</span> . . . . . . . . . . . . . <span class="insert">20</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">     3.5.</span>  Simple <span class="delete">expansion:</span> {var}  . . . . . . . . . . . . <span class="delete">. . . . .</span> 20</td><td> </td><td class="rblock"><span class="insert">       3.2.2.</span>  Simple <span class="insert">String Expansion:</span> {var} . . . . . . . . . . . . 20</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">     <span class="delete">3.6.</span>  Reserved expansion: {+var} . . . . . . . . . . . . . . <span class="delete">. .</span> 21</td><td> </td><td class="rblock">       <span class="insert">3.2.3.</span>  Reserved expansion: {+var} . . . . . . . . . . . . . . 21</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">     <span class="delete">3.7.  Path-style parameter expansion: {;var} . . . . . . . . . . 21</span></td><td> </td><td class="rblock">       <span class="insert">3.2.4.</span>  Label expansion with dot-prefix: {.var}  . . . . . . . <span class="insert">22</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">     3.8.  Form-style parameter expansion: {?var} . . . . . . . . . . 21</span></td><td> </td><td class="rblock"><span class="insert">       3.2.5.  Path segment expansion: {/var} .</span> . . . . . . . . . . . <span class="insert">23</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">     3.9.  Hierarchical path expansion: {/var}  . . . . . . . . . . . 21</span></td><td> </td><td class="rblock"><span class="insert">       3.2.6.  Path-style parameter expansion: {;var}</span> . . . . . . . . <span class="insert">25</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">     3.10.</span> Label expansion with dot-prefix: {.var}  . . . . . . . . . <span class="delete">22</span></td><td> </td><td class="rblock"><span class="insert">       3.2.7.  Form-style query expansion: {?var}</span> . . . . . . . . . . <span class="insert">25</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">   4.  Examples</span> . . . . . . . . . . . . . . . . . . . . . . . . . . . <span class="delete">22</span></td><td> </td><td class="rblock"><span class="insert">   4.</span>  Security Considerations  . . . . . . . . . . . . . . . . . . . <span class="insert">25</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">   5.</span>  Security Considerations  . . . . . . . . . . . . . . . . . . . <span class="delete">22</span></td><td> </td><td class="rblock"><span class="insert">   5.</span>  IANA Considerations  . . . . . . . . . . . . . . . . . . . . . <span class="insert">25</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">   6.</span>  IANA Considerations  . . . . . . . . . . . . . . . . . . . . . <span class="delete">22</span></td><td> </td><td class="rblock"><span class="insert">   6.</span>  Acknowledgments  . . . . . . . . . . . . . . . . . . . . . . . <span class="insert">25</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">   7.</span>  Acknowledgments  . . . . . . . . . . . . . . . . . . . . . . . <span class="delete">22</span></td><td> </td><td class="rblock"><span class="insert">   7.</span>  Normative References . . . . . . . . . . . . . . . . . . . . . <span class="insert">25</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">   8.</span>  Normative References . . . . . . . . . . . . . . . . . . . . . <span class="delete">22</span></td><td> </td><td class="rblock">   Appendix A.  Example URI Template Parser . . . . . . . . . . . . . <span class="insert">26</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">   Appendix A.  Example URI Template Parser . . . . . . . . . . . . . <span class="delete">23</span></td><td> </td><td class="rblock">   Appendix B.  Revision History (to be removed by RFC Editor)  . . . <span class="insert">27</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">   Appendix B.  Revision History (to be removed by RFC Editor)  . . . <span class="delete">23</span></td><td> </td><td class="rblock">   Authors' Addresses . . . . . . . . . . . . . . . . . . . . . . . . <span class="insert">27</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">   Authors' Addresses . . . . . . . . . . . . . . . . . . . . . . . . <span class="delete">24</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">1.  Introduction</td><td> </td><td class="right">1.  Introduction</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">1.1.  Overview</td><td> </td><td class="right">1.1.  Overview</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">   A Uniform Resource Identifier (URI) [RFC3986] is often used to</td><td> </td><td class="right">   A Uniform Resource Identifier (URI) [RFC3986] is often used to</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">   identify a specific resource within a common space of similar</td><td> </td><td class="right">   identify a specific resource within a common space of similar</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">   resources.  For example, personal web spaces are often delegated</td><td> </td><td class="right">   resources.  For example, personal web spaces are often delegated</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">   using a common pattern, such as</td><td> </td><td class="right">   using a common pattern, such as</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr bgcolor="gray" ><td></td><th><a name="part-l2" /><small>skipping to change at</small><em> page 5, line 11</em></th><th> </th><th><a name="part-r2" /><small>skipping to change at</small><em> page 5, line 11</em></th><td></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">      template string into a URI-reference by parsing the template for</td><td> </td><td class="right">      template string into a URI-reference by parsing the template for</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">      expressions and substituting each one with its corresponding</td><td> </td><td class="right">      expressions and substituting each one with its corresponding</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">      expansion.</td><td> </td><td class="right">      expansion.</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">   A URI Template provides both a structural description of a URI space</td><td> </td><td class="right">   A URI Template provides both a structural description of a URI space</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">   and, when variable values are provided, a simple instruction on how</td><td> </td><td class="right">   and, when variable values are provided, a simple instruction on how</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">   to construct a URI corresponding to those values.  A URI Template is</td><td> </td><td class="right">   to construct a URI corresponding to those values.  A URI Template is</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">   transformed into a URI-reference by replacing each delimited</td><td> </td><td class="right">   transformed into a URI-reference by replacing each delimited</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">   expression with its value as defined by the expression type and the</td><td> </td><td class="right">   expression with its value as defined by the expression type and the</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">   values of variables named within the expression.  The expression</td><td> </td><td class="right">   values of variables named within the expression.  The expression</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0013" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">   types range from simple <span class="delete">value</span> expansion to multiple key=value lists.</td><td> </td><td class="rblock">   types range from simple <span class="insert">string</span> expansion to multiple key=value lists.</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">   The expansions are based on the URI generic syntax, allowing an</td><td> </td><td class="right">   The expansions are based on the URI generic syntax, allowing an</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">   implementation to process any URI Template without knowing the</td><td> </td><td class="right">   implementation to process any URI Template without knowing the</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">   scheme-specific requirements of every possible resulting URI.</td><td> </td><td class="right">   scheme-specific requirements of every possible resulting URI.</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0014" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">   <span class="delete">A URI Template may be provided in absolute form, as in the examples</span></td><td> </td><td class="rblock">   For example, the following URI Template includes a <span class="insert">form-style</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">   above, or in relative form if a suitable base URI is defined.</span></td><td> </td><td class="rblock">   parameter expression, as indicated by the "?" operator appearing</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete"></span></td><td> </td><td class="rblock">   before the variable names.</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">   Although the URI syntax is used for the result, the template string</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">   is allowed to contain the broader set of characters that can be found</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">   in IRI references [RFC3987].  A URI Template is therefore also an IRI</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">   template, and the result of template processing can be rendered as an</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">   IRI by transforming the pct-encoded sequences to their corresponding</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">   Unicode character if the character is not in the reserved set.</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete"></span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">1.2.  Expression Types</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete"></span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">   URI Templates are similar to a macro language with a fixed set of</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">   macro definitions: the expression type determines the expansion</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">   process.</span>  For example, the following URI Template includes a <span class="delete">form-</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">   style</span> parameter expression, as indicated by the "?" operator</td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">   appearing before the variable names.</td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">     http://www.example.com/foo{?query,number}</td><td> </td><td class="right">     http://www.example.com/foo{?query,number}</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">   Each template expression describes, in a machine-readable manner, how</td><td> </td><td class="right">   Each template expression describes, in a machine-readable manner, how</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">   a URI is to be constructed.  In this example, the expansion process</td><td> </td><td class="right">   a URI is to be constructed.  In this example, the expansion process</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">   for templates beginning with the question-mark ("?") operator follows</td><td> </td><td class="right">   for templates beginning with the question-mark ("?") operator follows</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">   the same pattern as form-style interfaces on the World Wide Web.</td><td> </td><td class="right">   the same pattern as form-style interfaces on the World Wide Web.</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">     http://www.example.com/foo{?query,number}</td><td> </td><td class="right">     http://www.example.com/foo{?query,number}</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                               \_____________/</td><td> </td><td class="right">                               \_____________/</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr bgcolor="gray" ><td></td><th><a name="part-l3" /><small>skipping to change at</small><em> page 6, line 17</em></th><th> </th><th><a name="part-r3" /><small>skipping to change at</small><em> page 6, line 4</em></th><td></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">     http://www.example.com/foo?query=mycelium&amp;number=100</td><td> </td><td class="right">     http://www.example.com/foo?query=mycelium&amp;number=100</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">   Alternatively, if 'query' is undefined, then the expansion would be</td><td> </td><td class="right">   Alternatively, if 'query' is undefined, then the expansion would be</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">     http://www.example.com/foo?number=100</td><td> </td><td class="right">     http://www.example.com/foo?number=100</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">   or if both variables are undefined, then it would be</td><td> </td><td class="right">   or if both variables are undefined, then it would be</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">     http://www.example.com/foo</td><td> </td><td class="right">     http://www.example.com/foo</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0015" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock">   <span class="insert">A URI Template may be provided in absolute form, as in the examples</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">   above, or in relative form.  A template MUST be expanded before the</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">   resulting reference can be resolved from relative to absolute form.</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0016" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">   <span class="delete">The following table summarizes each type of</span> template <span class="delete">expression by</span></td><td> </td><td class="rblock">   <span class="insert">Although the URI syntax is used for the result, the</span> template <span class="insert">string</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">   its associated operator and cross-references</span> the <span class="delete">section</span> of <span class="delete">this</span></td><td> </td><td class="rblock"><span class="insert">   is allowed to contain</span> the <span class="insert">broader set</span> of <span class="insert">characters</span> that <span class="insert">can be found</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">   document</span> that <span class="delete">defines the operator</span> and <span class="delete">its specific expansion</span></td><td> </td><td class="rblock"><span class="insert">   in IRI references [RFC3987].  A URI Template is therefore also an IRI</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">   process.  The example expansions are based on</span> the <span class="delete">following variables</span></td><td> </td><td class="rblock"><span class="insert">   template,</span> and the <span class="insert">result of template processing can be rendered as an</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">   and values:</span></td><td> </td><td class="rblock"><span class="insert">   IRI by transforming each of the pct-encoded sequences to their</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">   corresponding Unicode character if that character is not in the</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">   reserved set.</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0017" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">      <span class="delete">var   := "value";</span></td><td> </td><td class="rblock"><span class="insert">1.2.  Levels and Expression Types</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">      hello := "Hello World!";</span></td><td> </td><td class="rblock"><span class="insert"></span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">      undef := null;</span></td><td> </td><td class="rblock"><span class="insert">   URI Templates are similar to a macro language with a fixed set of</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">      empty := "";</span></td><td> </td><td class="rblock"><span class="insert">   macro definitions: the expression type determines the expansion</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">      list  := [ "val1", "val2", "val3" ];</span></td><td> </td><td class="rblock"><span class="insert">   process.  The default expression type is simple string expansion,</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">      keys  := [("key1", "val1"), ("key2", "val2")];</span></td><td> </td><td class="rblock"><span class="insert">   wherein a single named variable is replaced by its value as a string</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">      path  := "/foo/bar"</span></td><td> </td><td class="rblock"><span class="insert">   after UTF-8 encoding the characters and then pct-encoding any octets</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">      x     := "1024";</span></td><td> </td><td class="rblock"><span class="insert">   that are not in the unreserved set.</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">      y     := "768";</span></td><td> </td><td class="rblock"><span class="insert"></span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">   Since most template processors implemented prior to this</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">   specification have only implemented the default expression type, we</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">   refer to these as Level 1 templates.</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">   .-----------------------------------------------------------------.</td><td> </td><td class="right">   .-----------------------------------------------------------------.</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0018" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">   | <span class="delete">Sec</span> | <span class="delete">Op</span>  | <span class="delete">Description</span>                                         |</td><td> </td><td class="rblock">   | <span class="insert">Level 1 examples, with variables having values of</span>               |</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">   |     |     |    <span class="delete">Expression</span>      | <span class="delete">Expansion</span>                      |</td><td> </td><td class="rblock">   |                                                                 |</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">   <span class="delete">|-----+-----+-----------------------------------------------------|</span></td><td> </td><td class="rblock">   |             <span class="insert">var   := "value"</span>                                    |</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">   | <span class="delete">3.3</span> |     | Simple expansion with <span class="delete">comma-separated</span> values        |</td><td> </td><td class="rblock">   |             <span class="insert">hello := "Hello World!"                             |</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">   |     |     |                                                     |</td><td> </td><td class="rblock"><span class="insert">   |             empty := ""                                         |</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">   |     |     |    <span class="delete">{var}</span>             value                          |</td><td> </td><td class="rblock"><span class="insert">   |             undef := null</span>                                       |</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">   |     |     |    <span class="delete">{hello}           Hello%20World%21</span>               |</td><td> </td><td class="rblock">   |                                                                 |</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">   |     |     |    <span class="delete">{path}/here       %2Ffoo%2Fbar/here</span>              |</td><td> </td><td class="rblock">   <span class="insert">|-----------------------------------------------------------------|</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">   |     |     |    <span class="delete">{x,y}             1024,768</span>                       |</td><td> </td><td class="rblock"><span class="insert">   | Op       Expression            Expansion                        |</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">   |     |     |    <span class="delete">{var=default}</span>     value                          |</td><td> </td><td class="rblock"><span class="insert">   |-----------------------------------------------------------------|</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">   |     |     |    <span class="delete">{undef=default}   default</span>                        |</td><td> </td><td class="rblock">   |     | Simple <span class="insert">string</span> expansion                       <span class="insert">(Sec 3.2.2) |</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">   |     |     |    <span class="delete">{list}            val1,val2,val3</span>                 |</td><td> </td><td class="rblock"><span class="insert">   |     |                                                           |</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">   |     |     |    <span class="delete">{list*}           val1,val2,val3</span>                 |</td><td> </td><td class="rblock"><span class="insert">   |     |    {var}                 value                            |</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">   |     |     |    <span class="delete">{list+}           list.val1,list.val2,list.val3</span>  |</td><td> </td><td class="rblock"><span class="insert">   |     |    {hello}               Hello%20World%21                 |</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">   |     |     |    <span class="delete">{keys}            key1,val1,key2,val2</span>            |</td><td> </td><td class="rblock"><span class="insert">   |     |    O{empty}X             OX                               |</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">   |     |     |    <span class="delete">{keys*}           key1,val1,key2,val2</span>            |</td><td> </td><td class="rblock"><span class="insert">   |     |    O{undef}X             OX                               |</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">   |     |     |    <span class="delete">{keys+}           keys.key1,val1,keys.key2,val2</span>  |</td><td> </td><td class="rblock"><span class="insert">   `-----------------------------------------------------------------'</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">   |     |     |                                                     |</td><td> </td><td class="rblock"><span class="insert"></span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">   <span class="delete">|-----+-----+-----------------------------------------------------|</span></td><td> </td><td class="rblock"><span class="insert">   Level 2 templates add the ability to define a default string, which</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">   | <span class="delete">3.4</span> |  <span class="delete">+</span>  | <span class="delete">Reserved</span> expansion with <span class="delete">comma-separated values</span>      |</td><td> </td><td class="rblock"><span class="insert">   is substituted if the variable is undefined, and the plus ("+")</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">   |     |     |                                                     |</td><td> </td><td class="rblock"><span class="insert">   operator for expansion values that are allowed to include reserved</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">   |     |     |    <span class="delete">{+var}            value</span>                          |</td><td> </td><td class="rblock"><span class="insert">   characters.</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">   |     |     |    <span class="delete">{+hello}          Hello%20World!</span>                 |</td><td> </td><td class="rblock"><span class="insert"></span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">   |     |     |    <span class="delete">{+path}/here      /foo/bar/here</span>                  |</td><td> </td><td class="rblock"><span class="insert">   .-----------------------------------------------------------------.</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">   |     |     |    <span class="delete">{+path,x}/here    /foo/bar,1024/here</span>             |</td><td> </td><td class="rblock"><span class="insert">   | Level 2 examples,</span> with <span class="insert">variables having</span> values <span class="insert">of</span>               |</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">   |     |     |    <span class="delete">{+path}{x}/here   /foo/bar1024/here</span>              |</td><td> </td><td class="rblock">   |                                                                 |</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">   |     |     |    <span class="delete">{+empty}/here     /here</span>                          |</td><td> </td><td class="rblock">   |             <span class="insert">var   := "value"</span>                                    |</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">   |     |     |    <span class="delete">{+undef}/here     /here</span>                          |</td><td> </td><td class="rblock">   |             <span class="insert">hello := "Hello World!"</span>                             |</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">   |     |     |    <span class="delete">{+list}           val1,val2,val3</span>                 |</td><td> </td><td class="rblock">   |             <span class="insert">empty := ""                                         |</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">   |     |     |    <span class="delete">{+list*}          val1,val2,val3</span>                 |</td><td> </td><td class="rblock"><span class="insert">   |             undef := null                                       |</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">   |     |     |    <span class="delete">{+list+}          list.val1,list.val2,list.val3</span>  |</td><td> </td><td class="rblock"><span class="insert">   |             path  := "/foo/bar"                                 |</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">   |     |     |    <span class="delete">{+keys}           key1,val1,key2,val2</span>            |</td><td> </td><td class="rblock"><span class="insert">   |                                                                 |</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">   |     |     |    <span class="delete">{+keys*}          key1,val1,key2,val2</span>            |</td><td> </td><td class="rblock"><span class="insert">   |-----------------------------------------------------------------|</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">   |     |     |    <span class="delete">{+keys+}          keys.key1,val1,keys.key2,val2</span>  |</td><td> </td><td class="rblock"><span class="insert">   | Op       Expression            Expansion                        |</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">   |     |     |                                                     |</td><td> </td><td class="rblock"><span class="insert">   |-----------------------------------------------------------------|</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">   <span class="delete">|-----+-----+-----------------------------------------------------|</span></td><td> </td><td class="rblock"><span class="insert">   |     | String expansion with defaults                (Sec 3.2.2) |</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">   | <span class="delete">3.5</span> |  ;  | Path-style parameters, semicolon-prefixed           <span class="delete">|</span></td><td> </td><td class="rblock"><span class="insert">   |     |                                                           |</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">   |</span>     |     |                                                     |</td><td> </td><td class="rblock"><span class="insert">   |     |    {var|default}</span>         value                            |</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">   |     |     |    {;x,y}            ;x=1024;y=768                  |</td><td> </td><td class="rblock">   |     |    <span class="insert">O{empty|default}X     OX</span>                               |</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">   |     |     <span class="delete">|</span>    {;x,y,empty}      ;x=1024;y=768;empty            |</td><td> </td><td class="rblock">   |     |    <span class="insert">O{undef|default}X     OdefaultX</span>                        |</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">   |     |     <span class="delete">|</span>    {;x,y,undef}      ;x=1024;y=768                  |</td><td> </td><td class="rblock">   |     |                                                           |</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">   |     |     |    <span class="delete">{;list}           ;val1,val2,val3</span>                |</td><td> </td><td class="rblock">   <span class="insert">|-----+-----------------------------------------------------------|</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">   |     |     |    <span class="delete">{;list*}          ;val1;val2;val3</span>                |</td><td> </td><td class="rblock">   |  <span class="insert">+</span>  | <span class="insert">Reserved expansion with defaults              (Sec 3.2.3)</span> |</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">   |     |     |    <span class="delete">{;list+}          ;list=val1;list=val2;list=val3</span> |</td><td> </td><td class="rblock">   |     |                                                           |</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">   |     |     |    <span class="delete">{;keys}           ;key1,val1,key2,val2</span>           |</td><td> </td><td class="rblock">   <span class="insert">|     |    {+var}</span>                value                            |</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">   |     |     |    <span class="delete">{;keys*}          ;key1=val1;key2=val2</span>           |</td><td> </td><td class="rblock">   |     |    <span class="insert">{+hello}              Hello%20World!</span>                   |</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">   |     |     |    <span class="delete">{;keys+}          ;keys.key1=val1;keys.key2=val2</span> |</td><td> </td><td class="rblock">   |     |    <span class="insert">{+path}/here          /foo/bar/here</span>                    |</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">   |     |     |                                                     |</td><td> </td><td class="rblock">   |     |    <span class="insert">here?ref={+path}      here?ref=/foo/bar</span>                |</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">   <span class="delete">|-----+-----+-----------------------------------------------------|</span></td><td> </td><td class="rblock">   |     |    <span class="insert">up{+path}{x}/here     up/foo/bar1024/here</span>              |</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">   | <span class="delete">3.6</span> |  <span class="delete">?</span>  | <span class="delete">Form-style parameters, ampersand-separated</span>          |</td><td> </td><td class="rblock">   |     |    <span class="insert">up{+empty|/1}/here    up/here</span>                          |</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">   |     |     |                                                     |</td><td> </td><td class="rblock">   |     |    <span class="insert">up{+undef|/1}/here    up/1/here</span>                        |</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">   |     |     |    <span class="delete">{?x,y}            ?x=1024&amp;y=768</span>                  |</td><td> </td><td class="rblock">   |     |                                                           |</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">   |     |     |    <span class="delete">{?x,y,empty}      ?x=1024&amp;y=768&amp;empty=</span>           |</td><td> </td><td class="rblock">   <span class="insert">`-----------------------------------------------------------------'</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">   |     |     |    <span class="delete">{?x,y,undef}      ?x=1024&amp;y=768</span>                  |</td><td> </td><td class="rblock"><span class="insert"></span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">   |     |     |    <span class="delete">{?list}           ?list=val1,val2,val3</span>           |</td><td> </td><td class="rblock"><span class="insert">   Level 3 templates add more complex operators for lists of comma-</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">   |     |     |    <span class="delete">{?list*}          ?val1&amp;val2&amp;val3</span>                |</td><td> </td><td class="rblock"><span class="insert">   separated values, dot-prefixed labels, slash-prefixed path segments,</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">   |     |     |    <span class="delete">{?list+}          ?list=val1&amp;list=val2&amp;list=val3</span> |</td><td> </td><td class="rblock"><span class="insert">   semicolon-prefixed path parameters, and the forms-style construction</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">   |     |     |    <span class="delete">{?keys}           ?keys=key1,val1,key2,val2</span>      |</td><td> </td><td class="rblock"><span class="insert">   of a query syntax consisting of key=value pairs that are separated by</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">   |     |     |    <span class="delete">{?keys*}          ?key1=val1&amp;key2=val2</span>           |</td><td> </td><td class="rblock"><span class="insert">   an ampersand character.</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">   |     |     |    <span class="delete">{?keys+}          ?keys.key1=val1&amp;keys.key2=val2</span> |</td><td> </td><td class="rblock"><span class="insert"></span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">   |     |     |                                                     |</td><td> </td><td class="rblock"><span class="insert">   .-----------------------------------------------------------------.</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">   <span class="delete">|-----+-----+-----------------------------------------------------|</span></td><td> </td><td class="rblock"><span class="insert">   | Level 3 examples, with variables having values of</span>               |</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">   | <span class="delete">3.7</span> |  <span class="delete">/</span>  | <span class="delete">Hierarchical path segments, slash-separated</span>         |</td><td> </td><td class="rblock">   |                                                                 |</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">   |     |     |                                                     |</td><td> </td><td class="rblock">   |             <span class="insert">var   := "value"</span>                                    |</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">   |     |     |    <span class="delete">{/var}            /value</span>                         |</td><td> </td><td class="rblock">   |             <span class="insert">hello := "Hello World!"</span>                             |</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">   |     |     |    <span class="delete">{/var,empty}      /value/</span>                        |</td><td> </td><td class="rblock">   |             <span class="insert">empty := ""</span>                                         |</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">   |     |     |    <span class="delete">{/var,undef}      /value</span>                         |</td><td> </td><td class="rblock">   |             <span class="insert">undef := null</span>                                       |</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">   |     |     |    <span class="delete">{/list}           /val1,val2,val3</span>                |</td><td> </td><td class="rblock">   |             <span class="insert">path  := "/foo/bar"</span>                                 |</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">   |     |     |    <span class="delete">{/list*}          /val1/val2/val3</span>                |</td><td> </td><td class="rblock">   |             <span class="insert">x     := "1024"                                     |</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">   |     |     |    <span class="delete">{/list*,x}        /val1/val2/val3/1024</span>           |</td><td> </td><td class="rblock"><span class="insert">   |             y     := "768"                                      |</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">   |     |     |    <span class="delete">{/list+}          /list.val1/list.val2/list.val3</span> |</td><td> </td><td class="rblock"><span class="insert">   |                                                                 |</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">   |     |     |    <span class="delete">{/keys}           /key1,val1,key2,val2</span>           |</td><td> </td><td class="rblock"><span class="insert">   |-----------------------------------------------------------------|</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">   |     |     |    <span class="delete">{/keys*}          /key1/val1/key2/val2</span>           |</td><td> </td><td class="rblock"><span class="insert">   | Op       Expression            Expansion                        |</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">   |     |     |    <span class="delete">{/keys+}          /keys.key1/val1/keys.key2/val2</span> |</td><td> </td><td class="rblock"><span class="insert">   |-----------------------------------------------------------------|</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">   |     |     |                                                     |</td><td> </td><td class="rblock"><span class="insert">   |     | String</span> expansion with <span class="insert">multiple variables      (Sec 3.2.2)</span> |</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">   <span class="delete">|-----+-----+-----------------------------------------------------|</span></td><td> </td><td class="rblock">   |     |                                                           |</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">   | <span class="delete">3.8</span> |  <span class="delete">.</span>  | <span class="delete">Label expansion, dot-prefixed</span>                       |</td><td> </td><td class="rblock">   |     |    <span class="insert">{x,y}                 1024,768</span>                         |</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">   |     |     |                                                     |</td><td> </td><td class="rblock">   |     |    <span class="insert">{x,hello,y}           1024,Hello%20World%21,768</span>        |</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">   |     |     |    <span class="delete">X{.var}          X.value</span>                         |</td><td> </td><td class="rblock">   |     |    <span class="insert">?{x,empty}            ?1024,</span>                           |</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">   |     |     |    <span class="delete">X{.empty}        X.</span>                              |</td><td> </td><td class="rblock">   |     |    <span class="insert">?{x,undef}            ?1024</span>                            |</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">   |     |     |    <span class="delete">X{.undef}        X</span>                               |</td><td> </td><td class="rblock">   |     |    <span class="insert">?{undef,y}            ?768</span>                             |</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">   |     |     |    <span class="delete">X{.list}         X.val1,val2,val3</span>                |</td><td> </td><td class="rblock">   |     |    <span class="insert">?{x,undef|0}          ?1024,0</span>                          |</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">   |     |     |    <span class="delete">X{.list*}        X.val1.val2.val3</span>                |</td><td> </td><td class="rblock">   |     |                                                           |</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">   |     |     |    <span class="delete">X{.list*,x}      X.val1.val2.val3.1024</span>           |</td><td> </td><td class="rblock">   <span class="insert">|-----+-----------------------------------------------------------|</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">   |     |     |    <span class="delete">X{.list+}        X.list.val1.list.val2.list.val3</span> |</td><td> </td><td class="rblock">   |  <span class="insert">+</span>  | <span class="insert">Reserved expansion with multiple variables    (Sec 3.2.3)</span> |</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">   |     |     |    <span class="delete">X{.keys}         X.key1,val1,key2,val2</span>           |</td><td> </td><td class="rblock">   |     |                                                           |</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">   |     |     |    <span class="delete">X{.keys*}        X.key1.val1.key2.val2</span>           |</td><td> </td><td class="rblock">   |     |    <span class="insert">{+x,hello,y}          1024,Hello%20World!,768</span>          |</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">   |     |     |    <span class="delete">X{.keys+}        X.keys.key1.val1.keys.key2.val2</span> |</td><td> </td><td class="rblock">   |     |    <span class="insert">{+path,x}/here        /foo/bar/1024/here</span>               |</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">   |     |     |                                                     |</td><td> </td><td class="rblock">   |     |                                                           |</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">   <span class="delete">`-----+-----+-----------------------------------------------------'</span></td><td> </td><td class="rblock">   <span class="insert">|-----+-----------------------------------------------------------|</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock">   |  <span class="insert">.</span>  | <span class="insert">Label expansion, dot-prefixed                 (Sec 3.2.4)</span> |</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock">   |     |                                                           |</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock">   |     |    <span class="insert">X{.var}               X.value</span>                          |</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock">   |     |    <span class="insert">X{.empty}             X.                               |</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">   |     |    X{.undef}             X                                |</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">   |</span>     |                                                           |</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock">   <span class="insert">|-----+-----------------------------------------------------------|</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock">   |  <span class="insert">/  | Path segments, slash-prefixed                 (Sec 3.2.5) |</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">   |     |                                                           |</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">   |     |    {/var}                /value</span>                           |</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock">   |     |    <span class="insert">{/var,empty}          /value/</span>                          |</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock">   |     |    <span class="insert">{/var,undef}          /value                           |</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock">   |     |                                                           <span class="insert">|</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">   |-----+-----------------------------------------------------------|</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock">   |  ;  | Path-style parameters, semicolon-prefixed     <span class="insert">(Sec 3.2.6)</span> |</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock">   |     |                                                           |</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock">   |     |    {;x,y}                ;x=1024;y=768                    |</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock">   |     |    {;x,y,empty}          ;x=1024;y=768;empty              |</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock">   |     |    {;x,y,undef}          ;x=1024;y=768                    |</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock">   |     |                                                           |</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock">   <span class="insert">|-----+-----------------------------------------------------------|</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock">   |  <span class="insert">?</span>  | <span class="insert">Form-style query, ampersand-separated         (Sec 3.2.7)</span> |</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock">   |     |                                                           |</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock">   |     |    <span class="insert">{?x,y}                ?x=1024&amp;y=768</span>                    |</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock">   |     |    <span class="insert">{?x,y,empty}          ?x=1024&amp;y=768&amp;empty=</span>             |</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock">   |     |    <span class="insert">{?x,y,undef}          ?x=1024&amp;y=768</span>                    |</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock">   |     |                                                           |</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock">   <span class="insert">`-----------------------------------------------------------------'</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">   Finally, Level 4 templates add the ability to specify value modifiers</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">   as a suffix to the variable name.  The prefix modifier (":")</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">   indicates that only a limited number of characters from the beginning</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">   of the value are used by the expansion.  The explode ("*") modifier</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">   tells the expansion process to treat the value as a multivalued</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">   structure --- a list of values or key=value pairs -- rather than as a</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">   single string.</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert"></span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">   .-----------------------------------------------------------------.</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">   | Level 4 examples, with variables having values of</span>               |</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock">   |                                                                 |</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock">   |             <span class="insert">var   := "value"</span>                                    |</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock">   |             <span class="insert">hello := "Hello World!"</span>                             |</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock">   |             <span class="insert">path  := "/foo/bar"                                 |</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">   |             list  := [ "red", "green", "blue" ]                 |</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">   |             keys  := [("semi", ";"), ("dot", ".")]</span>              |</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock">   |                                                                 |</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock">   | <span class="insert">Op       Expression            Expansion</span>                        |</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock">   <span class="insert">|-----------------------------------------------------------------|</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock">   |     | <span class="insert">String expansion with value modifiers         (Sec 3.2.2)</span> |</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock">   |     |                                                           |</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock">   |     |    <span class="insert">{var:3}               val</span>                              |</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock">   |     |    <span class="insert">{var:30}              value</span>                            |</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock">   |     |    <span class="insert">{list}                red,green,blue</span>                   |</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock">   |     |    <span class="insert">{list*}               red,green,blue</span>                   |</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock">   |     |    <span class="insert">{keys}                semi,%3B,dot,.,comma,%2C</span>         |</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock">   |     |    <span class="insert">{keys*}               semi=%3B,dot=.,comma=%2C</span>         |</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock">   |     |                                                           |</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock">   <span class="insert">|-----+-----------------------------------------------------------|</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock">   |  <span class="insert">+</span>  | <span class="insert">Reserved expansion with value modifiers       (Sec 3.2.3)</span> |</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock">   |     |                                                           |</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock">   |     |    <span class="insert">{+path:6}/here        /foo/b/here</span>                      |</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock">   |     |    <span class="insert">{+list}               red,green,blue</span>                   |</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock">   |     |    <span class="insert">{+list*}              red,green,blue</span>                   |</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock">   |     |    <span class="insert">{+keys}               semi,;,dot,.,comma,,</span>             |</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock">   |     |    <span class="insert">{+keys*}              semi=;,dot=.,comma=,</span>             |</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock">   |     |                                                           |</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock">   <span class="insert">|-----+-----------------------------------------------------------|</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock">   |  <span class="insert">.</span>  | <span class="insert">Label expansion, dot-prefixed                 (Sec 3.2.4)</span> |</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock">   |     |                                                           |</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock">   |     |    <span class="insert">X{.var:3}             X.val</span>                            |</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock">   |     |    <span class="insert">X{.list}              X.red,green,blue</span>                 |</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock">   |     |    <span class="insert">X{.list*}             X.red.green.blue</span>                 |</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock">   |     |    <span class="insert">X{.keys}              X.semi,%3B,dot,.,comma,%2C</span>       |</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock">   |     |    <span class="insert">X{.keys*}             X.semi=%3B.dot=..comma=%2C</span>       |</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock">   |     |                                                           |</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock">   <span class="insert">|-----+-----------------------------------------------------------|</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock">   |  <span class="insert">/</span>  | <span class="insert">Path segments, slash-prefixed                 (Sec 3.2.5)</span> |</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock">   |     |                                                           |</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock">   |     |    <span class="insert">{/var:1,var}          /v/value</span>                         |</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock">   |     |    <span class="insert">{/list}               /red,green,blue</span>                  |</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock">   |     |    <span class="insert">{/list*}              /red/green/blue</span>                  |</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock">   |     |    <span class="insert">{/list*,path:4}       /red/green/blue/%2Ffoo</span>           |</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock">   |     |    <span class="insert">{/keys}               /semi,%3B,dot,.,comma,%2C</span>        |</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock">   |     |    <span class="insert">{/keys*}              /semi=%3B/dot=./comma=%2C</span>        |</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock">   |     |                                                           |</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock">   <span class="insert">|-----+-----------------------------------------------------------|</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock">   |  <span class="insert">;</span>  | <span class="insert">Path-style parameters, semicolon-prefixed     (Sec 3.2.6)</span> |</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock">   |     |                                                           |</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock">   |     |    <span class="insert">{;hello:5}            ;hello=Hello</span>                     |</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock">   |     |    <span class="insert">{;list}               ;red,green,blue                  |</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock">   |     |    <span class="insert">{;list*}              ;red;green;blue</span>                  |</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock">   |     |    <span class="insert">{;keys}               ;semi,%3B,dot,.,comma,%2C</span>        |</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock">   |     |    <span class="insert">{;keys*}              ;semi=%3B;dot=.;comma=%2C</span>        |</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock">   |     |                                                           |</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock">   <span class="insert">|-----+-----------------------------------------------------------|</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock">   |  <span class="insert">?</span>  | <span class="insert">Form-style query, ampersand-separated         (Sec 3.2.7)</span> |</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock">   |     |                                                           |</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock">   |     |    <span class="insert">{?var:3}              ?var=val</span>                         |</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock">   |     |    <span class="insert">{?list}               ?list=red,green,blue             |</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">   |     |    {?list*}              ?list=red&amp;list=green&amp;list=blue</span>   |</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock">   |     |    <span class="insert">{?keys}               ?keys=semi,%3B,dot,.,comma,%2C</span>   |</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock">   |     |    <span class="insert">{?keys*}              ?semi=%3B&amp;dot=.&amp;comma=%2C</span>        |</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock">   |     |                                                           |</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock">   <span class="insert">`-----------------------------------------------------------------'</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">1.3.  Design Considerations</td><td> </td><td class="right">1.3.  Design Considerations</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0019" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock">   <span class="insert">Mechanisms similar to URI Templates have been defined within several</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">   specifications, including WSDL, WADL and OpenSearch.  This</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">   specification extends and formally defines the syntax so that URI</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">   Templates can be used consistently across multiple Internet</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">   applications and within Internet message fields, while at the same</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">   time retaining compatibility with those earlier definitions.</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock">                                                                         </td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">   The URI Template syntax has been designed to carefully balance the</td><td> </td><td class="right">   The URI Template syntax has been designed to carefully balance the</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">   need for a powerful expansion mechanism with the need for ease of</td><td> </td><td class="right">   need for a powerful expansion mechanism with the need for ease of</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">   implementation.  The syntax is designed to be trivial to parse while</td><td> </td><td class="right">   implementation.  The syntax is designed to be trivial to parse while</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">   at the same time providing enough flexibility to express many common</td><td> </td><td class="right">   at the same time providing enough flexibility to express many common</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">   template scenarios.  Implementations are able to parse the template</td><td> </td><td class="right">   template scenarios.  Implementations are able to parse the template</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">   and perform the expansions in a single pass.</td><td> </td><td class="right">   and perform the expansions in a single pass.</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">   Templates are simple and readable when used with common examples</td><td> </td><td class="right">   Templates are simple and readable when used with common examples</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">   because the single-character operators match the URI generic syntax</td><td> </td><td class="right">   because the single-character operators match the URI generic syntax</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">   delimiters.  The operator's associated delimiter (";", "?", "/", and</td><td> </td><td class="right">   delimiters.  The operator's associated delimiter (";", "?", "/", and</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr bgcolor="gray" ><td></td><th><a name="part-l4" /><small>skipping to change at</small><em> page 9, line 5</em></th><th> </th><th><a name="part-r4" /><small>skipping to change at</small><em> page 11, line 15</em></th><td></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">   Likewise, the expansion process for ";" (path-style parameters) will</td><td> </td><td class="right">   Likewise, the expansion process for ";" (path-style parameters) will</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">   omit the "=" when the variable value is empty, whereas the process</td><td> </td><td class="right">   omit the "=" when the variable value is empty, whereas the process</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">   for "?" (form-style parameters) will not omit the "=" when the value</td><td> </td><td class="right">   for "?" (form-style parameters) will not omit the "=" when the value</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">   is empty.  Multiple variables and list values have their values</td><td> </td><td class="right">   is empty.  Multiple variables and list values have their values</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">   joined with "," if there is no predefined joining mechanism for the</td><td> </td><td class="right">   joined with "," if there is no predefined joining mechanism for the</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">   operator.  Only one operator, plus ("+"), will substitute unencoded</td><td> </td><td class="right">   operator.  Only one operator, plus ("+"), will substitute unencoded</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">   reserved characters found inside the variable values; the other</td><td> </td><td class="right">   reserved characters found inside the variable values; the other</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">   operators will pct-encode reserved characters found in the variable</td><td> </td><td class="right">   operators will pct-encode reserved characters found in the variable</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">   values prior to expansion.</td><td> </td><td class="right">   values prior to expansion.</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0020" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">   The most common cases for URI spaces can be described with <span class="delete">simple URI</span></td><td> </td><td class="rblock">   The most common cases for URI spaces can be described with <span class="insert">Level 1</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">   Template</span> expressions.  If we were only concerned with URI generation,</td><td> </td><td class="rblock"><span class="insert">   template</span> expressions.  If we were only concerned with URI generation,</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">   then the template syntax could be limited to just simple variable</td><td> </td><td class="right">   then the template syntax could be limited to just simple variable</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">   expansion, since more complex forms could be generated by changing</td><td> </td><td class="right">   expansion, since more complex forms could be generated by changing</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">   the variable values.  However, URI Templates have the additional goal</td><td> </td><td class="right">   the variable values.  However, URI Templates have the additional goal</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">   of describing the layout of identifiers in terms of preexisting data</td><td> </td><td class="right">   of describing the layout of identifiers in terms of preexisting data</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">   values.  The template syntax therefore includes operators that</td><td> </td><td class="right">   values.  The template syntax therefore includes operators that</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">   reflect how resource identifiers are commonly allocated.  Likewise,</td><td> </td><td class="right">   reflect how resource identifiers are commonly allocated.  Likewise,</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0021" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">   since prefix <span class="delete">and suffix</span> substrings are often used to partition large</td><td> </td><td class="rblock">   since prefix substrings are often used to partition large spaces of</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">   spaces of resources, modifiers on variable values provide a way to</td><td> </td><td class="rblock">   resources, modifiers on variable values provide a way to specify <span class="insert">both</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">   specify <span class="delete">those substrings.</span></td><td> </td><td class="rblock">   the <span class="insert">substring</span> and <span class="insert">the full value string with a single variable name.</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete"></span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">   Mechanisms similar to URI Templates have been defined within several</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">   specifications, including WSDL, WADL and OpenSearch.  This</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">   specification extends and formally defines</span> the <span class="delete">syntax so that URI</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">   Templates can be used consistently across multiple Internet</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">   applications</span> and <span class="delete">within Internet message fields.</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">1.4.  Limitations</td><td> </td><td class="right">1.4.  Limitations</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">   Since a URI Template describes a superset of the identifiers, there</td><td> </td><td class="right">   Since a URI Template describes a superset of the identifiers, there</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">   is no implication that every possible expansion for each delimited</td><td> </td><td class="right">   is no implication that every possible expansion for each delimited</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">   variable expression corresponds to a URI of an existing resource.</td><td> </td><td class="right">   variable expression corresponds to a URI of an existing resource.</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">   Our expectation is that an application constructing URIs according to</td><td> </td><td class="right">   Our expectation is that an application constructing URIs according to</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">   the template will be provided with an appropriate set of values for</td><td> </td><td class="right">   the template will be provided with an appropriate set of values for</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">   the variables being substituted and will be able to cope with any</td><td> </td><td class="right">   the variables being substituted and will be able to cope with any</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">   errors that might occur when the resulting URI is used for name</td><td> </td><td class="right">   errors that might occur when the resulting URI is used for name</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">   resolution or access.</td><td> </td><td class="right">   resolution or access.</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0022" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">   URI <span class="delete">Template expressions</span> are not URIs: they do not identify an</td><td> </td><td class="rblock">   URI <span class="insert">Templates</span> are not URIs: they do not identify an abstract or</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">   abstract or physical resource, they are not parsed as URIs, and</td><td> </td><td class="rblock">   physical resource, they are not parsed as URIs, and should not be</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">   should not be used in places where a URI would be expected unless the</td><td> </td><td class="rblock">   used in places where a URI would be expected unless the template</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">   template expressions will be expanded by a template processor prior</td><td> </td><td class="rblock">   expressions will be expanded by a template processor prior to use.</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">   to use.  Distinct field, element, or attribute names should be used</td><td> </td><td class="rblock">   Distinct field, element, or attribute names should be used to</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">   to differentiate protocol elements that carry a URI Template from</td><td> </td><td class="rblock">   differentiate protocol elements that carry a URI Template from those</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">   those that expect a <span class="delete">URI-reference.</span></td><td> </td><td class="rblock">   that expect a <span class="insert">URI reference.</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">1.5.  Notational Conventions</td><td> </td><td class="right">1.5.  Notational Conventions</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">   The key words "MUST", "MUST NOT", "REQUIRED", "SHALL", "SHALL NOT",</td><td> </td><td class="right">   The key words "MUST", "MUST NOT", "REQUIRED", "SHALL", "SHALL NOT",</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">   "SHOULD", "SHOULD NOT", "RECOMMENDED", "MAY", and "OPTIONAL" in this</td><td> </td><td class="right">   "SHOULD", "SHOULD NOT", "RECOMMENDED", "MAY", and "OPTIONAL" in this</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">   document are to be interpreted as described in [RFC2119].</td><td> </td><td class="right">   document are to be interpreted as described in [RFC2119].</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">   This specification uses the Augmented Backus-Naur Form (ABNF)</td><td> </td><td class="right">   This specification uses the Augmented Backus-Naur Form (ABNF)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">   notation of [RFC5234].  The following ABNF rules are imported from</td><td> </td><td class="right">   notation of [RFC5234].  The following ABNF rules are imported from</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">   the normative references [RFC5234], [RFC3986], and [RFC3987].</td><td> </td><td class="right">   the normative references [RFC5234], [RFC3986], and [RFC3987].</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr bgcolor="gray" ><td></td><th><a name="part-l5" /><small>skipping to change at</small><em> page 10, line 25</em></th><th> </th><th><a name="part-r5" /><small>skipping to change at</small><em> page 12, line 27</em></th><td></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">     ucschar        =  %xA0-D7FF / %xF900-FDCF / %xFDF0-FFEF</td><td> </td><td class="right">     ucschar        =  %xA0-D7FF / %xF900-FDCF / %xFDF0-FFEF</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                    /  %x10000-1FFFD / %x20000-2FFFD / %x30000-3FFFD</td><td> </td><td class="right">                    /  %x10000-1FFFD / %x20000-2FFFD / %x30000-3FFFD</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                    /  %x40000-4FFFD / %x50000-5FFFD / %x60000-6FFFD</td><td> </td><td class="right">                    /  %x40000-4FFFD / %x50000-5FFFD / %x60000-6FFFD</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                    /  %x70000-7FFFD / %x80000-8FFFD / %x90000-9FFFD</td><td> </td><td class="right">                    /  %x70000-7FFFD / %x80000-8FFFD / %x90000-9FFFD</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                    /  %xA0000-AFFFD / %xB0000-BFFFD / %xC0000-CFFFD</td><td> </td><td class="right">                    /  %xA0000-AFFFD / %xB0000-BFFFD / %xC0000-CFFFD</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                    /  %xD0000-DFFFD / %xE1000-EFFFD</td><td> </td><td class="right">                    /  %xD0000-DFFFD / %xE1000-EFFFD</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">     iprivate       =  %xE000-F8FF / %xF0000-FFFFD / %x100000-10FFFD</td><td> </td><td class="right">     iprivate       =  %xE000-F8FF / %xF0000-FFFFD / %x100000-10FFFD</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0023" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">1.6.  Character Encoding and Unicode Normalization</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock">                                                                         </td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">   This specification uses the terms "character" and "coded character</td><td> </td><td class="right">   This specification uses the terms "character" and "coded character</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">   set" in accordance with the definitions provided in [RFC2978], and</td><td> </td><td class="right">   set" in accordance with the definitions provided in [RFC2978], and</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">   "character encoding" in place of what [RFC2978] refers to as a</td><td> </td><td class="right">   "character encoding" in place of what [RFC2978] refers to as a</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">   "charset".</td><td> </td><td class="right">   "charset".</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0024" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">   <span class="delete">A URI Template is defined as</span> a <span class="delete">sequence</span> of <span class="delete">characters and therefore</span></td><td> </td><td class="rblock">   <span class="insert">The ABNF notation defines its terminal values to be non-negative</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">   has</span> the <span class="delete">same issues</span> as <span class="delete">URIs with regard to</span> codepoints <span class="delete">and</span> character</td><td> </td><td class="rblock"><span class="insert">   integers (codepoints) that are</span> a <span class="insert">superset</span> of the <span class="insert">US-ASCII coded</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">   <span class="delete">sets.  That is, URI Template characters are frequently encoded</span> as</td><td> </td><td class="rblock"><span class="insert">   character set [ASCII].  This specification defines terminal values</span> as</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">   <span class="delete">octets</span> for <span class="delete">transport</span> or <span class="delete">presentation.</span>  This specification does not</td><td> </td><td class="rblock">   codepoints <span class="insert">within the Unicode coded</span> character <span class="insert">set [UNIV4].</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert"></span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">   In spite of the syntax and template expansion process being defined</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">   in terms of Unicode codepoints, it should be understood that</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">   templates occur in practice</span> as <span class="insert">a sequence of characters in whatever</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">   form or encoding is suitable</span> for <span class="insert">the context in which they occur,</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">   whether that be octets embedded in a network protocol element</span> or</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock">   <span class="insert">paint applied to the side of a bus.</span>  This specification does not</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">   mandate any particular character encoding for mapping between URI</td><td> </td><td class="right">   mandate any particular character encoding for mapping between URI</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">   Template characters and the octets used to store or transmit those</td><td> </td><td class="right">   Template characters and the octets used to store or transmit those</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">   characters.  When a URI Template appears in a protocol element, the</td><td> </td><td class="right">   characters.  When a URI Template appears in a protocol element, the</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">   character encoding is defined by that protocol; without such a</td><td> </td><td class="right">   character encoding is defined by that protocol; without such a</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">   definition, a URI Template is assumed to be in the same character</td><td> </td><td class="right">   definition, a URI Template is assumed to be in the same character</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0025" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">   encoding as the surrounding text.</td><td> </td><td class="rblock">   encoding as the surrounding text.  <span class="insert">It is only during the process of</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">   template expansion that a string of characters in a URI Template MUST</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">   be transformed into its corresponding sequence of normalized Unicode</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">   codepoints.</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0026" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">   <span class="delete">A URI Template and its associated variable values are converted to a</span></td><td> </td><td class="rblock">   <span class="insert">The Unicode Standard [UNIV4] defines various equivalences between</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">   normal form</span> of <span class="delete">UTF-8 [RFC3629] prior to template processing, as</span></td><td> </td><td class="rblock"><span class="insert">   sequences</span> of <span class="insert">characters for various purposes.  Unicode Standard Annex</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">   defined</span> in <span class="delete">Section 3.1.</span></td><td> </td><td class="rblock"><span class="insert">   #15 [UTR15] defines various Normalization Forms for these</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">   equivalences,</span> in <span class="insert">particular Normalization Form KC (NFKC:</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">   Compatibility Decomposition followed by Canonical Composition).  The</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">   normalization form determines how to consistently encode the</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">   equivalent strings.</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0027" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">   <span class="delete">The ABNF notation defines its terminal</span> values to <span class="delete">be non-negative</span></td><td> </td><td class="rblock">   <span class="insert">In theory, all URI processing implementations, including template</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">   integers (codepoints)</span> that are a <span class="delete">superset</span> of the <span class="delete">US-ASCII coded</span></td><td> </td><td class="rblock"><span class="insert">   processors, should use the same normalization form for generating or</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">   character set [ASCII].  This specification defines terminal values</span> as</td><td> </td><td class="rblock"><span class="insert">   handling a URI reference.  In practice, they do not.  However,</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">   <span class="delete">codepoints</span> within the <span class="delete">Unicode coded character set [UNIV4].  Thus, a</span></td><td> </td><td class="rblock"><span class="insert">   template processors transform the template literals and variable</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">   string <span class="delete">of characters</span> in a <span class="delete">URI Template is assumed to be transformed</span></td><td> </td><td class="rblock">   values <span class="insert">from characters</span> to <span class="insert">codepoints, expand the expressions, and</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">   into its corresponding sequence of Unicode codepoints prior to</span></td><td> </td><td class="rblock"><span class="insert">   then transform the resulting codepoints back to characters again.  In</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">   testing for a match with the URI Template grammar.</span></td><td> </td><td class="rblock"><span class="insert">   order to promote consistent generation of URI references from</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">   templates, template processors MUST ensure</span> that <span class="insert">the template and each</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">   variable value is in NFKC when they</span> are <span class="insert">transformed to</span> a <span class="insert">sequence of</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">   Unicode codepoints.  The final step</span> of <span class="insert">template processing will</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">   encode</span> the <span class="insert">expanded sequence of Unicode codepoints, which should</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">   still be in NFKC,</span> as <span class="insert">UTF-8 [RFC3629] and then further pct-encode any</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">   octets</span> within the <span class="insert">UTF-8</span> string <span class="insert">that are not allowed</span> in a <span class="insert">URI.</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0028" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">2.  <span class="delete">URI Template </span>Syntax</td><td> </td><td class="rblock">2.  Syntax</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">   A URI Template is a string of printable Unicode characters that</td><td> </td><td class="right">   A URI Template is a string of printable Unicode characters that</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">   contains zero or more embedded variable expressions, each expression</td><td> </td><td class="right">   contains zero or more embedded variable expressions, each expression</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">   being delimited by a matching pair of braces ('{', '}').</td><td> </td><td class="right">   being delimited by a matching pair of braces ('{', '}').</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">     URI-Template  = *( literals / expression )</td><td> </td><td class="right">     URI-Template  = *( literals / expression )</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0029" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock">   <span class="insert">Although templates (and template processor implementations) are</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">   described above in terms of four gradual levels, we define the URI-</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">   Template syntax in terms of the ABNF for Level 4.  A template</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">   processor limited to lower level templates MAY exclude the ABNF rules</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">   applicable only to higher levels.  However, it is RECOMMENDED that</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">   all parsers implement the full syntax such that unsupported levels</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">   can be properly identified as such to the end user.</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert"></span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">   Each character in a URI Template MUST be transcoded to an NFKC</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">   Unicode codepoint prior to evaluation.  If a character sequence in</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">   the template consists of pct-encoded triplets corresponding to a</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">   valid sequence of octets in UTF-8 that represent a character not in</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">   the reserved set, then the triplets MUST be replaced with their</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">   corresponding Unicode codepoint.  In other words, pct-encoded UTF-8</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">   found within the template is decoded prior to further processing</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">   unless the corresponding character is in the reserved set.</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock">                                                                         </td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">2.1.  Literals</td><td> </td><td class="right">2.1.  Literals</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">   The characters outside of expressions in a URI Template string are</td><td> </td><td class="right">   The characters outside of expressions in a URI Template string are</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">   intended to be translated literally to the URI-reference.</td><td> </td><td class="right">   intended to be translated literally to the URI-reference.</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">     literals      =  %x21 / %x23-24 / %x26 / %x28-3B / %x3D / %x3F-5B</td><td> </td><td class="right">     literals      =  %x21 / %x23-24 / %x26 / %x28-3B / %x3D / %x3F-5B</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                   /  %x5D-5F / %x61-7A / %x7E / ucschar / iprivate</td><td> </td><td class="right">                   /  %x5D-5F / %x61-7A / %x7E / ucschar / iprivate</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                   /  pct-encoded</td><td> </td><td class="right">                   /  pct-encoded</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                        ; any Unicode character except: CTL, SP,</td><td> </td><td class="right">                        ; any Unicode character except: CTL, SP,</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                        ;  DQUOTE, "'", "%" (aside from pct-encoded),</td><td> </td><td class="right">                        ;  DQUOTE, "'", "%" (aside from pct-encoded),</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                        ;  "&lt;", "&gt;", "\", "^", "`", "{", "|", "}"</td><td> </td><td class="right">                        ;  "&lt;", "&gt;", "\", "^", "`", "{", "|", "}"</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0030" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock">   <span class="insert">A sequence of pct-encoded literals that corresponds to a UTF-8</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">   encoded character that is not within the reserved set will be</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">   transcoded during template processing, as describe above.  If such a</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">   character is not in the unreserved set, it will be re-pct-encoded</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">   during the final step of template processing.  Unreserved characters</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">   will therefore be normalized to their unencoded form as a side-effect</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">   of template processing.</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock">                                                                         </td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">2.2.  Expressions</td><td> </td><td class="right">2.2.  Expressions</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">   Template expressions are the parameterized parts of a URI Template.</td><td> </td><td class="right">   Template expressions are the parameterized parts of a URI Template.</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">   Each expression contains an optional operator, which defines the</td><td> </td><td class="right">   Each expression contains an optional operator, which defines the</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">   expression type and its corresponding expansion process, followed by</td><td> </td><td class="right">   expression type and its corresponding expansion process, followed by</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">   a comma-separated list of variable specifiers (variable names and</td><td> </td><td class="right">   a comma-separated list of variable specifiers (variable names and</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">   optional value modifiers).  If no operator is provided, the</td><td> </td><td class="right">   optional value modifiers).  If no operator is provided, the</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">   expression defaults to simple variable expansion of unreserved</td><td> </td><td class="right">   expression defaults to simple variable expansion of unreserved</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">   values.</td><td> </td><td class="right">   values.</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">     expression    =  "{" [ operator ] variable-list "}"</td><td> </td><td class="right">     expression    =  "{" [ operator ] variable-list "}"</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">     operator      =  "+" / "." / "/" / ";" / "?" / op-reserve</td><td> </td><td class="right">     operator      =  "+" / "." / "/" / ";" / "?" / op-reserve</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0031" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">     op-reserve    =  "<span class="delete">|</span>" / "!" / "@"</td><td> </td><td class="rblock">     op-reserve    =  "<span class="insert">,</span>" / "!" / "@"</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                          ; reserved for local use: "$" / "(" / ")"</td><td> </td><td class="right">                          ; reserved for local use: "$" / "(" / ")"</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">   The operator characters have been chosen to reflect each of their</td><td> </td><td class="right">   The operator characters have been chosen to reflect each of their</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">   roles as reserved characters in the URI generic syntax.  The</td><td> </td><td class="right">   roles as reserved characters in the URI generic syntax.  The</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">   operators defined by this specification include: plus ("+") for</td><td> </td><td class="right">   operators defined by this specification include: plus ("+") for</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">   substituting values that may contain reserved characters; dot (".")</td><td> </td><td class="right">   substituting values that may contain reserved characters; dot (".")</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">   for substituting values as a sequence of name labels prefixed by ".";</td><td> </td><td class="right">   for substituting values as a sequence of name labels prefixed by ".";</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">   slash ("/") for substituting values as a sequence of path segments</td><td> </td><td class="right">   slash ("/") for substituting values as a sequence of path segments</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">   separated by "/"; semicolon (";") for substituting key=value pairs as</td><td> </td><td class="right">   separated by "/"; semicolon (";") for substituting key=value pairs as</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">   path parameters prefixed by ";"; and, question-mark ("?") for</td><td> </td><td class="right">   path parameters prefixed by ";"; and, question-mark ("?") for</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">   substituting a query component beginning with "?" and consisting of</td><td> </td><td class="right">   substituting a query component beginning with "?" and consisting of</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">   key=value pairs separated by "&amp;".  These operators will be described</td><td> </td><td class="right">   key=value pairs separated by "&amp;".  These operators will be described</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">   in detail in Section 3.</td><td> </td><td class="right">   in detail in Section 3.</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0032" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">   The operator characters <span class="delete">pipe ("|</span>"), exclamation ("!"), and at-sign</td><td> </td><td class="rblock">   The operator characters <span class="insert">comma (",</span>"), exclamation ("!"), and at-sign</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">   ("@") are reserved for future extensions.  A processor that</td><td> </td><td class="right">   ("@") are reserved for future extensions.  A processor that</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">   unexpectedly encounters such an extension operator SHOULD pass the</td><td> </td><td class="right">   unexpectedly encounters such an extension operator SHOULD pass the</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">   expression through unexpanded and MAY also indicate a warning to the</td><td> </td><td class="right">   expression through unexpanded and MAY also indicate a warning to the</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">   invoking application.</td><td> </td><td class="right">   invoking application.</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">   The expression syntax specifically excludes use of the dollar ("$")</td><td> </td><td class="right">   The expression syntax specifically excludes use of the dollar ("$")</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">   and parentheses ["(" and ")"] characters so that they remain</td><td> </td><td class="right">   and parentheses ["(" and ")"] characters so that they remain</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">   available for local language extensions outside the scope of this</td><td> </td><td class="right">   available for local language extensions outside the scope of this</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">   specification.</td><td> </td><td class="right">   specification.</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">2.3.  Variables</td><td> </td><td class="right">2.3.  Variables</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">   After the operator (if any), each expression contains a list of one</td><td> </td><td class="right">   After the operator (if any), each expression contains a list of one</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">   or more comma-separated variable specifiers (varspec).  The variable</td><td> </td><td class="right">   or more comma-separated variable specifiers (varspec).  The variable</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">   names serve multiple purposes: documentation for what kinds of values</td><td> </td><td class="right">   names serve multiple purposes: documentation for what kinds of values</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0033" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">   are expected, identifiers for associating values within a <span class="delete">URI</span></td><td> </td><td class="rblock">   are expected, identifiers for associating values within a <span class="insert">template</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">   Template</span> processor, and the string to use for each key on key=value</td><td> </td><td class="rblock">   processor, and the string to use for each key on key=value</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">   expansions.</td><td> </td><td class="right">   expansions.</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">     variable-list =  varspec *( "," varspec )</td><td> </td><td class="right">     variable-list =  varspec *( "," varspec )</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0034" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">     varspec       =  varname [ modifier ] [ "<span class="delete">=</span>" default ]</td><td> </td><td class="rblock">     varspec       =  varname [ modifier ] [ "<span class="insert">|</span>" default ]</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">     varname       =  varchar *( varchar / "." )</td><td> </td><td class="right">     varname       =  varchar *( varchar / "." )</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">     varchar       =  ALPHA / DIGIT / "_" / ucschar / iprivate</td><td> </td><td class="right">     varchar       =  ALPHA / DIGIT / "_" / ucschar / iprivate</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                   /  pct-encoded</td><td> </td><td class="right">                   /  pct-encoded</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">   An expression MAY reference variables that are unknown to the</td><td> </td><td class="right">   An expression MAY reference variables that are unknown to the</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">   template processor or whose value is set to a special "undefined"</td><td> </td><td class="right">   template processor or whose value is set to a special "undefined"</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">   value, such as undef or null.  Such undefined variables are given</td><td> </td><td class="right">   value, such as undef or null.  Such undefined variables are given</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">   special treatment by the expansion process.</td><td> </td><td class="right">   special treatment by the expansion process.</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">   A variable value that is a string of length zero is not considered</td><td> </td><td class="right">   A variable value that is a string of length zero is not considered</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr bgcolor="gray" ><td></td><th><a name="part-l6" /><small>skipping to change at</small><em> page 13, line 7</em></th><th> </th><th><a name="part-r6" /><small>skipping to change at</small><em> page 16, line 7</em></th><td></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">   member values is considered undefined.</td><td> </td><td class="right">   member values is considered undefined.</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">   If a variable appears more than once in an expression or within</td><td> </td><td class="right">   If a variable appears more than once in an expression or within</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">   multiple expressions of a URI Template, the value of that variable</td><td> </td><td class="right">   multiple expressions of a URI Template, the value of that variable</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">   MUST remain static throughout the expansion process (i.e., the</td><td> </td><td class="right">   MUST remain static throughout the expansion process (i.e., the</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">   variable must have the same value for the purpose of calculating each</td><td> </td><td class="right">   variable must have the same value for the purpose of calculating each</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">   expansion).</td><td> </td><td class="right">   expansion).</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">2.4.  Value Modifiers</td><td> </td><td class="right">2.4.  Value Modifiers</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0035" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">   <span class="delete">Any</span> of the variables can have a modifier indicating that its <span class="delete">value is</span></td><td> </td><td class="rblock">   <span class="insert">Each</span> of the variables <span class="insert">in a Level 4 template expression</span> can have a</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">   exploded into components or</span> is limited to a <span class="delete">prefix, suffix, or the</span></td><td> </td><td class="rblock">   modifier indicating <span class="insert">either</span> that its <span class="insert">expansion</span> is limited to a prefix</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">   remainder of a</span> prefix <span class="delete">or suffix</span> of the <span class="delete">variable value.</span></td><td> </td><td class="rblock">   of the variable's <span class="insert">value string</span> or that <span class="insert">its expansion</span> is <span class="insert">exploded into</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete"></span></td><td> </td><td class="rblock"><span class="insert">   components based</span> on an <span class="insert">external type</span> or <span class="insert">schema associated</span> with that</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">     modifier      =  explode / partial</span></td><td> </td><td class="rblock">   <span class="insert">variable.</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete"></span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">2.4.1.  Component Values</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete"></span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">   The explode modifiers ("*" and "+") indicate that the variable</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">   represents a composite value that may be substituted in full or</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">   partial forms, depending on the</span> variable's <span class="delete">type or schema.  Since URI</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">   Templates do not contain an indication of type or schema, this is</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">   assumed to be determined by context.  An example context is a mark-up</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">   element or header field that contains one attribute that is a</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">   template and one</span> or <span class="delete">more other attributes</span> that <span class="delete">define the schema</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">   applicable to variables found in the template.  Likewise, a typed</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">   programming language might differentiate variables as strings, lists,</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">   associative arrays, or structures.</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete"></span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">     explode       =  ( "*" / "+" )</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete"></span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">   The primary difference between the two explode modifiers is that an</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">   asterisk ("*") indicates that just the component names and values are</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">   included in the expansion, whereas the plus ("+") indicates that each</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">   component name</span> is <span class="delete">prefixed with the given variable name and a period</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">   ("."), thereby enabling multiple variables with the same component</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">   names to be disambiguated.</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete"></span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">   Component modifiers improve brevity in the URI Template syntax.  For</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">   example, a resource that provides a geographic map for a given street</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">   address might accept a hundred permutations</span> on <span class="delete">fields for address</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">   input, including partial addresses (e.g., just the city or postal</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">   code).  Such a resource could be described as a template with each</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">   and every address component listed in order, or with a far more</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">   simple template that makes use of</span> an <span class="delete">explode modifier, as in</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete"></span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">      /mapper{?address*}</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">                                                                         </td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">   or</td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">                                                                         </td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">      <span class="delete">/directions{?from+,to+}</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete"></span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">   along</span> with <span class="delete">some context</span> that <span class="delete">defines each variable (address, from,</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">   and to) as adhering to a given addressing standard (e.g., UPU S42 or</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">   AS/NZS 4819:2003).  A recipient aware of the schema can then provide</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">   appropriate expansions, such as:</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete"></span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">      /mapper?city=Newport%20Beach&amp;state=CA</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">      /directions?from.zipcode=92660&amp;to.zipcode=90210</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0036" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">   <span class="delete">The expansion process for variables, as defined in Section 3, is</span></td><td> </td><td class="rblock">     <span class="insert">modifier      =  prefix /</span> explode</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">   dependent on both the operator being used and, if one of the</span> explode</td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">   <span class="delete">modifiers is used, the type and schema of the variable being</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">   substituted.</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0037" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">2.4.<span class="delete">2.  Prefix and Suf</span>fix Values</td><td> </td><td class="rblock">2.4.<span class="insert">1.  Pre</span>fix Values</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0038" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">   Prefix <span class="delete">and suffix</span> modifiers are often used to partition an identifier</td><td> </td><td class="rblock">   <span class="insert">A prefix modifier indicates that the variable expansion is limited to</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">   space hierarchically, as is common in reference indices and <span class="delete">hash-</span></td><td> </td><td class="rblock"><span class="insert">   a prefix of the variable's value string.</span>  Prefix modifiers are often</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">   based storage, or</span> to limit the <span class="delete">substituted</span> value to a maximum number</td><td> </td><td class="rblock">   used to partition an identifier space hierarchically, as is common in</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">   of characters.</td><td> </td><td class="rblock">   reference indices and <span class="insert">hash-based storage.  It also serves</span> to limit</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock">   the <span class="insert">expanded</span> value to a maximum number of characters.</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0039" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">     <span class="delete">partial       =  ( substring / remainder ) offset</span></td><td> </td><td class="rblock">     <span class="insert">prefix</span>        =  ":" offset</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">     substring</span>     =  ":"</td><td> </td><td class="rblock">     <span class="insert">max-length</span>    =  <span class="insert">%x31-39 *DIGIT   ; positive integer</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">     <span class="delete">remainder     =  "^"</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">     offset        =  <span class="delete">[ from-end ] 1*DIGIT</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">     from-end      =  "-"</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0040" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">   The <span class="delete">offset</span> refers to a maximum number of characters from <span class="delete">either</span> the</td><td> </td><td class="rblock">   The <span class="insert">max-length is a positive integer that</span> refers to a maximum number</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">   beginning <span class="delete">(prefix) or end (suffix)</span> of the variable's value as a</td><td> </td><td class="rblock">   of characters from the beginning of the variable's value as a Unicode</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">   Unicode string.  Note that this numbering is in characters, not</td><td> </td><td class="rblock">   string.  Note that this numbering is in characters, not octets, in</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">   octets, in order to avoid <span class="delete">substituting improperly encoded values due</span></td><td> </td><td class="rblock">   order to avoid splitting <span class="insert">between the octets of</span> a multi-octet UTF-8</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">   to</span> splitting a multi-octet UTF-8 encoded character or a pct-encoded</td><td> </td><td class="rblock">   encoded character or <span class="insert">within</span> a pct-encoded triplet.  <span class="insert">If the max-length</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">   triplet.</td><td> </td><td class="rblock"><span class="insert">   is greater than the length of the variable's value, then the entire</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">   value string is used.</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0041" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">   <span class="delete">A substring modifier requires that only the indicated prefix or</span></td><td> </td><td class="rblock">   <span class="insert">For example,</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">   suffix be used in the expansion.  A remainder modifier requires that</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">   only the remainder of the value, excluding the indicated prefix or</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">   suffix, be used in the expansion.  If the offset is greater than the</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">   length of the variable's value, then the entire string is used for a</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">   substring and the empty string is used for a remainder.</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0042" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">   <span class="delete">The following examples illustrate how modifiers work with</span> the</td><td> </td><td class="rblock">     <span class="insert">Given</span> the variable <span class="insert">assignments</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">   <span class="delete">different</span> variable <span class="delete">types.  More complex examples are provided in</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">   Section 4.</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0043" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">     <span class="delete">Given the variable assignments:</span></td><td> </td><td class="rblock">       var   := <span class="insert">"value"</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       var   := <span class="delete">"value";</span></td><td> </td><td class="rblock"><span class="insert">       semi</span>  := <span class="insert">";"</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">       name</span>  := <span class="delete">[ "Fred", "Wilma", "Pebbles" ];</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">     Example Template     Expansion</td><td> </td><td class="right">     Example Template     Expansion</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       {var}              value</td><td> </td><td class="right">       {var}              value</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       {var:20}           value</td><td> </td><td class="right">       {var:20}           value</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       {var:3}            val</td><td> </td><td class="right">       {var:3}            val</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0044" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       <span class="delete">{var^3}            ue</span></td><td> </td><td class="rblock">       <span class="insert">{semi}             %3B</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">       {var:-3}           lue</span></td><td> </td><td class="rblock"><span class="insert">       {semi:2}           %3B</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">       {var^-3}           va</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0045" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       <span class="delete">{?name}            ?name=Fred,Wilma,Pebbles</span></td><td> </td><td class="rblock"><span class="insert">2.4.2.  Component Values</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">       {?name:1}          ?name=F</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0046" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">2.5.  Value Defaults</span></td><td> </td><td class="rblock">   <span class="insert">An explode modifier ("*") indicates that the variable represents a</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">   composite value that may be substituted in full or partial forms,</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">   depending on the variable's type or schema.  Since URI Templates do</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">   not contain an indication of type or schema, this is assumed to be</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">   determined by context.  An example context is a mark-up element or</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">   header field that contains one attribute that is a template and one</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">   or more other attributes that define the schema applicable to</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">   variables found in the template.  Likewise, a typed programming</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">   language might differentiate variables as strings, lists, associative</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">   arrays, or structures.</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0047" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">   <span class="delete">Any of the variables may also be supplied with a default value to be</span></td><td> </td><td class="rblock">     <span class="insert">explode       =  "*"</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">   used when a template processor determines the variable to be</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">   undefined.  The default value is limited to the unreserved and pct-</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">   encoded characters of a URI-reference, since our intention is for the</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">   default to be presented in the exact form that it would appear in the</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">   resulting URI.  The default is not affected by the variable</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">   modifiers; it is assumed that the default string provided in the</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">   expression already reflects any necessary substring or remainder</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">   processing.</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0048" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">     <span class="delete">default       =  *( unreserved / pct-encoded )</span></td><td> </td><td class="rblock">   <span class="insert">Explode modifiers improve brevity in the URI Template syntax.  For</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">   example, a resource that provides a geographic map for a given street</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">   address might accept a hundred permutations on fields for address</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">   input, including partial addresses (e.g., just the city or postal</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">   code).  Such a resource could be described as a template with each</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">   and every address component listed in order, or with a far more</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">   simple template that makes use of an explode modifier, as in</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0049" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">   <span class="delete">The following examples illustrate how default values work with</span></td><td> </td><td class="rblock">      <span class="insert">/mapper{?address*}</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">   different variable types.  More complex examples are provided in</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">   Section 4.</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0050" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">     <span class="delete">Given</span> the variable <span class="delete">assignments:</span></td><td> </td><td class="rblock">   <span class="insert">along with some context that defines what</span> the variable <span class="insert">named</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">       var   := "value";</span></td><td> </td><td class="rblock"><span class="insert">   "address" can include, such as by reference to some other standard</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">       empty := "";</span></td><td> </td><td class="rblock"><span class="insert">   for addressing (e.g., UPU S42 or AS/NZS 4819:2003).  A recipient</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">       undef := null;</span></td><td> </td><td class="rblock"><span class="insert">   aware of the schema can then provide appropriate expansions, such as:</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">       name  := [ "Fred", "Wilma", "Pebbles" ];</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">       favs  := [("color","red"), ("volume","high")];</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">       empty_list := [];</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">       empty_keys := [];</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0051" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">     <span class="delete">Example Template        Expansion</span></td><td> </td><td class="rblock">     <span class="insert"> /mapper?city=Newport%20Beach&amp;state=CA</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0052" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       <span class="delete">{var=default}</span>         value</td><td> </td><td class="rblock">   <span class="insert">If an explode modifier is present, the expansion process for that</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       <span class="delete">{undef=default}       default</span></td><td> </td><td class="rblock"><span class="insert">   variable, as defined in Section 3, is dependent on both the operator</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">       x{empty}y             xy</span></td><td> </td><td class="rblock"><span class="insert">   being used and the type or schema of the</span> value <span class="insert">being substituted.</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">       x{empty=_}y           xy</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">       x{undef}y             xy</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">       x{undef=_}y           x_y</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0053" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       <span class="delete">x{empty_list}y        xy</span></td><td> </td><td class="rblock"><span class="insert">2.5.  Value Defaults</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">       x{empty_list=_}y      xy</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">       x{empty_list*}y       xy</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">       x{empty_list*=_}y     x_y</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">       x{empty_list+}y       xy</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">       x{empty_list+=_}y     xempty_list._y</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0054" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       <span class="delete">x{empty_keys}y        xy</span></td><td> </td><td class="rblock">   <span class="insert">Each of the variables in Level 2 (and above) templates may also be</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">       x{empty_keys=_}y      xy</span></td><td> </td><td class="rblock"><span class="insert">   supplied with a default value to be used when a template processor</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">       x{empty_keys*}y       xy</span></td><td> </td><td class="rblock"><span class="insert">   determines that variable to be undefined.  The default value is</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">       x{empty_keys*=_}y     x_y</span></td><td> </td><td class="rblock"><span class="insert">   limited to unreserved characters, the equal sign ("="), and pct-</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">       x{empty_keys+}y       xy</span></td><td> </td><td class="rblock"><span class="insert">   encoded triplets, since the default is provided in the exact form</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">       x{empty_keys+=_}y     xempty_keys._y</span></td><td> </td><td class="rblock"><span class="insert">   that it would appear in the expanded URI reference.  The default is</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">   not affected by any variable modifiers, since we assume that the</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">   default string provided in the expression already reflects the</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">   desired value.</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0055" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       <span class="delete">x{?name=none}         x?name=Fred,Wilma,Pebbles</span></td><td> </td><td class="rblock">     <span class="insert">default       =  *( unreserved / "=" / pct-encoded )</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">       x{?favs=none}         x?favs=color,red,volume,high</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">       x{?favs*=none}        x?color=red&amp;volume=high</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">       x{?favs+=none}        x?favs.color=red&amp;favs.volume=high</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0056" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       <span class="delete">x{?undef}             x</span></td><td> </td><td class="rblock">   <span class="insert">The following examples illustrate how default values work with</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">       x{?undef=none}        x?undef=none</span></td><td> </td><td class="rblock"><span class="insert">   different variable types.</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">       x{?empty}             x?empty=</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">       x{?empty=none}        x?empty=</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0057" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       <span class="delete">x{?empty_list}        x</span></td><td> </td><td class="rblock">     <span class="insert">Given the variable assignments:</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">       x{?empty_list=none}   x?empty_list=none</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">       x{?empty_list*}       x</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">       x{?empty_list*=none}  x?none</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">       x{?empty_list+}       x</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">       x{?empty_list+=none}  x?empty_list.none</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0058" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       <span class="delete">x{?empty_keys}        x</span></td><td> </td><td class="rblock">       <span class="insert">var   := "value"</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">       x{?empty_keys=none}   x?empty_keys=none</span></td><td> </td><td class="rblock"><span class="insert">       name  := [ "Fred", "Wilma", "Pebbles" ]</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">       x{?empty_keys*}       x</span></td><td> </td><td class="rblock"><span class="insert">       favs  := [("color","red"), ("volume","high")]</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">       x{?empty_keys*=none}  x?none</span></td><td> </td><td class="rblock"><span class="insert">       empty_keys := []</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">       x{?empty_keys+}       x</span></td><td> </td><td class="rblock"><span class="insert">       empty := ""</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">       x{?empty_keys+=none}  x?empty_keys.none</span></td><td> </td><td class="rblock"><span class="insert">       undef := null</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0059" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       <span class="delete">x{;name=none}         x;name=Fred,Wilma,Pebbles</span></td><td> </td><td class="rblock">     <span class="insert">Example Template        Expansion</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">       x{;favs=none}         x;favs=color,red,volume,high</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">       x{;favs*=none}        x;color=red;volume=high</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">       x{;favs+=none}        x;favs.color=red;favs.volume=high</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">       x{;undef}             x</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">       x{;undef=none}        x;undef=none</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">       x{;empty}             x;empty</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">       x{;empty=none}        x;empty</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0060" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       <span class="delete">x{;empty_list}        x</span></td><td> </td><td class="rblock">       <span class="insert">{var|default}         value</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">       x{;empty_list=none}   x;empty_list=none</span></td><td> </td><td class="rblock"><span class="insert">       {undef|default}       default</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">       x{;empty_list*}       x</span></td><td> </td><td class="rblock"><span class="insert">       {undef:3|default}     default</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">       x{;empty_list*=none}  x;none</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">       x{;empty_list+}       x</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">       x{;empty_list+=none}  x;empty_list.none</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0061" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       <span class="delete">x{;empty_keys}        x</span></td><td> </td><td class="rblock">       <span class="insert">x{empty}y             xy</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">       x{;empty_keys=none}   x;empty_keys=none</span></td><td> </td><td class="rblock"><span class="insert">       x{empty|_}y           xy</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">       x{;empty_keys*}       x</span></td><td> </td><td class="rblock"><span class="insert">       x{undef}y             xy</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">       x{;empty_keys*=none}  x;none</span></td><td> </td><td class="rblock"><span class="insert">       x{undef|_}y           x_y</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">       x{;empty_keys+}       x</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">       x{;empty_keys+=none}  x;empty_keys.none</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0062" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       <span class="delete">x{/name=none}         x/Fred,Wilma,Pebbles</span></td><td> </td><td class="rblock">       <span class="insert">x{.name|none}         x.Fred,Wilma,Pebbles</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">       x{/name*=none}        x/Fred/Wilma/Pebbles</span></td><td> </td><td class="rblock"><span class="insert">       x{.name*|none}        x.Fred.Wilma.Pebbles</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">       x{/name+=none}        x/name.Fred/name.Wilma/name.Pebbles</span></td><td> </td><td class="rblock"><span class="insert">       x{.empty}             x.</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">       x{/favs=none}         x/color,red,volume,high</span></td><td> </td><td class="rblock"><span class="insert">       x{.empty|none}        x.</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">       x{/favs*=none}        x/color/red/volume/high</span></td><td> </td><td class="rblock"><span class="insert">       x{.undef}             x</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">       x{/favs+=none}        x/favs.color/red/favs.volume/high</span></td><td> </td><td class="rblock"><span class="insert">       x{.undef|none}        x.none</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0063" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock">       <span class="insert">x{/name|none}         x/Fred,Wilma,Pebbles</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">       x{/name*|none}        x/Fred/Wilma/Pebbles</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       x{/undef}             x</td><td> </td><td class="right">       x{/undef}             x</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0064" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       x{/undef<span class="delete">=</span>none}        x/none</td><td> </td><td class="rblock">       x{/undef<span class="insert">|</span>none}        x/none</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       x{/empty}             x/</td><td> </td><td class="right">       x{/empty}             x/</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0065" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       <span class="delete">x{/empty=none}</span>        x/</td><td> </td><td class="rblock">       <span class="insert">x{/empty|none}</span>        x/</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">                                                                         </td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       <span class="delete">x{/empty_list}        x</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">       x{/empty_list=none}   x/none</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">       x{/empty_list*}       x</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">       x{/empty_list*=none}  x/none</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">       x{/empty_list+}       x</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">       x{/empty_list+=none}  x/empty_list.none</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">                                                                         </td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       x{/empty_keys}        x</td><td> </td><td class="right">       x{/empty_keys}        x</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0066" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       x{/empty_keys<span class="delete">=</span>none}   x/none</td><td> </td><td class="rblock">       x{/empty_keys<span class="insert">|</span>none}   x/none</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       x{/empty_keys*}       x</td><td> </td><td class="right">       x{/empty_keys*}       x</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0067" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       <span class="delete">x{/empty_keys*=none}</span>  x/none</td><td> </td><td class="rblock">       <span class="insert">x{/empty_keys*|none}</span>  x/none</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       <span class="delete">x{/empty_keys+}       x</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">       x{/empty_keys+=none}  x/empty_keys.none</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0068" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">3.  <span class="delete">URI Template</span> Expansion</td><td> </td><td class="rblock">       <span class="insert">x{;name|none}         x;name=Fred,Wilma,Pebbles</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">       x{;favs|none}         x;favs=color,red,volume,high</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">       x{;favs*|none}        x;color=red;volume=high</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">       x{;empty}             x;empty</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">       x{;empty|none}        x;empty</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">       x{;undef}             x</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">       x{;undef|none}        x;none</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">       x{;undef|foo=y}       x;foo=y</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert"></span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">       x{?var|none}          x?var=value</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">       x{?favs|none}         x?favs=color,red,volume,high</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">       x{?favs*|none}        x?color=red&amp;volume=high</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">       x{?empty}             x?empty=</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">       x{?empty|foo=none}    x?empty=</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">       x{?undef}             x</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">       x{?undef|foo=none}    x?foo=none</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">       x{?empty_keys}        x</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">       x{?empty_keys|none}   x?none</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">       x{?empty_keys|y=z}    x?y=z</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">       x{?empty_keys*|y=z}   x?y=z</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock">                                                                         </td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock">3.  Expansion</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">   The process of URI Template expansion is to scan the template string</td><td> </td><td class="right">   The process of URI Template expansion is to scan the template string</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">   from beginning to end, copying literal characters as-is and replacing</td><td> </td><td class="right">   from beginning to end, copying literal characters as-is and replacing</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">   each expression with the result of applying the expression's operator</td><td> </td><td class="right">   each expression with the result of applying the expression's operator</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">   to the value of each variable named in the expression.</td><td> </td><td class="right">   to the value of each variable named in the expression.</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0069" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">   <span class="delete">If a template processor encounters an error, such</span> as <span class="delete">an operator that</span></td><td> </td><td class="rblock">   <span class="insert">Each variable value MUST be formed</span> as a sequence of <span class="insert">NFKC Unicode</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">   it does not understand or</span> a <span class="delete">character</span> sequence <span class="delete">that does not match</span></td><td> </td><td class="rblock"><span class="insert">   codepoints prior</span> to template <span class="insert">expansion.  A value is assumed to</span> be <span class="insert">raw</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">   the &lt;URI-Template&gt; grammar, then processing of the template SHOULD</span></td><td> </td><td class="rblock"><span class="insert">   data that might need</span> to <span class="insert">be encoded</span> by the template <span class="insert">processor during</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">   cease, the URI-reference result SHOULD be undefined, and the location</span></td><td> </td><td class="rblock"><span class="insert">   expansion, depending on</span> the <span class="insert">expression type.</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">   and type</span> of <span class="delete">error SHOULD be indicated</span> to <span class="delete">the invoking application.</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete"></span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">   If a</span> template <span class="delete">processor encounters a warning, such as the use of an</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">   operator character reserved for future extension, then the processing</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">   of the template SHOULD NOT cease, and the location and type of</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">   warning SHOULD</span> be <span class="delete">indicated</span> to <span class="delete">the invoking application.</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete"></span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">3.1.  Unicode normalization</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete"></span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">   The Unicode Standard [UNIV4] defines various equivalences between</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">   sequences of characters for various purposes.  Unicode Standard Annex</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">   #15 [UTR15] defines various Normalization Forms for these</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">   equivalences, in particular Normalization Form KC (NFKC:</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">   Compatibility Decomposition followed</span> by <span class="delete">Canonical Composition).</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">   Since different Normalized Form unicode strings will have different</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">   UTF-8 representations,</span> the <span class="delete">only way to guarantee that</span> template</td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">   <span class="delete">processors will produce</span> the <span class="delete">same URI is to require a common</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">   Normalized Form.</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0070" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">   <span class="delete">The string values for</span> the <span class="delete">URI Template and</span> template <span class="delete">variables MUST</span> be</td><td> </td><td class="rblock">   <span class="insert">If a template processor encounters an error outside of an expression,</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">   <span class="delete">in NFKC</span> and <span class="delete">encoded</span> as <span class="delete">UTF-8 [RFC3629] prior</span> to <span class="delete">use in</span> the template</td><td> </td><td class="rblock"><span class="insert">   such as a character sequence that does not match the &lt;URI-Template&gt;</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">   <span class="delete">expansion process (US-ASCII is a proper subset</span> of <span class="delete">NFKC UTF-8).  The</span></td><td> </td><td class="rblock"><span class="insert">   grammar, then processing of</span> the template <span class="insert">SHOULD cease, the URI-</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">   remaining sections defining the expansion process assume strings are</span></td><td> </td><td class="rblock"><span class="insert">   reference result SHOULD</span> be <span class="insert">undefined, and the location</span> and <span class="insert">type of</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">   in NFKC UTF-8.</span></td><td> </td><td class="rblock"><span class="insert">   error SHOULD be indicated to the invoking application.  If an error</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">   is encountered inside an expression, such</span> as <span class="insert">an operator or value</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">   modifier that it does not recognize or cannot support, then the</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">   expression SHOULD be copied</span> to <span class="insert">the result unexpanded, processing of</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">   the remainder of</span> the template <span class="insert">SHOULD continue, and the location and</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">   type</span> of <span class="insert">error SHOULD be indicated to the invoking application.</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0071" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">3.<span class="delete">2.  Literal e</span>xpansion</td><td> </td><td class="rblock">3.<span class="insert">1.  Literal E</span>xpansion</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">   If the literal character is allowed anywhere in the URI syntax</td><td> </td><td class="right">   If the literal character is allowed anywhere in the URI syntax</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">   (unreserved / reserved), then it is copied directly to the result</td><td> </td><td class="right">   (unreserved / reserved), then it is copied directly to the result</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">   string.  Otherwise, the pct-encoded equivalent of the literal</td><td> </td><td class="right">   string.  Otherwise, the pct-encoded equivalent of the literal</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">   character is copied to the result string by encoding the character in</td><td> </td><td class="right">   character is copied to the result string by encoding the character in</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">   UTF-8 (a sequence of octets) and then encoding each octet as a pct-</td><td> </td><td class="right">   UTF-8 (a sequence of octets) and then encoding each octet as a pct-</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">   encoded triplet.</td><td> </td><td class="right">   encoded triplet.</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0072" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">3.<span class="delete">3.  Expression e</span>xpansion</td><td> </td><td class="rblock">3.<span class="insert">2.  Expression E</span>xpansion</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">   Each expression is indicated by an opening brace ("{") character and</td><td> </td><td class="right">   Each expression is indicated by an opening brace ("{") character and</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">   continues until the next closing brace ("}").  The expression is</td><td> </td><td class="right">   continues until the next closing brace ("}").  The expression is</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">   expanded by determining the expression type and then following that</td><td> </td><td class="right">   expanded by determining the expression type and then following that</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">   type's expansion process for each comma-separated varspec in the</td><td> </td><td class="right">   type's expansion process for each comma-separated varspec in the</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0073" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">   expression.</td><td> </td><td class="rblock">   expression.  <span class="insert">Level 1 templates are limited to the default operator</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">   (simple string value expansion) and a single variable per expression.</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">   Level 2 templates are limited to a single varspec per expression.</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">   The expression type is determined by looking at the first character</td><td> </td><td class="right">   The expression type is determined by looking at the first character</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">   after the opening brace.  If the character is an operator, then</td><td> </td><td class="right">   after the opening brace.  If the character is an operator, then</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">   remember the expression type associated with that operator for later</td><td> </td><td class="right">   remember the expression type associated with that operator for later</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">   expansion decisions and skip to the next character for the varspec</td><td> </td><td class="right">   expansion decisions and skip to the next character for the varspec</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">   list.  If the first character is not an operator, then the expression</td><td> </td><td class="right">   list.  If the first character is not an operator, then the expression</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">   type is simple expansion and the first character is the beginning of</td><td> </td><td class="right">   type is simple expansion and the first character is the beginning of</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">   the varspec list.</td><td> </td><td class="right">   the varspec list.</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0074" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">   <span class="delete">If the expression does not contain any varspec, as in "{}" or "{,}",</span></td><td> </td><td class="rblock"><span class="insert">3.2.1.  Undefined</span> Variable <span class="insert">Expansion</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">   then a template processor SHOULD copy that invalid expression to the</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">   result string, continue processing the remainder of the template, and</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">   indicate that an error occurred to the caller.</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete"></span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">   If the template contains an opening brace without a corresponding</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">   closing brace (the template ends in mid-expression), then a processor</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">   SHOULD attempt to process the template as if it ended in a closing</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">   brace and indicate that an error occurred to the caller.</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete"></span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">3.4.</span>  Variable <span class="delete">and modifier expansion</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete"></span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">   A variable that is undefined has no value and thus is excluded from</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">   the expansion.  A variable defined as composite or component values</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">   is undefined if it contains zero members or all of its components are</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">   undefined.  If all of the variables are undefined, then the</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">   expression's expansion is the empty string.</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete"></span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">   A variable defined as a single value is expanded by converting its</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">   value to a NFKC UTF-8 string, replacing any character within the</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">   string that is not in the unreserved set with its corresponding</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">   sequence of pct-encoded octets, applying any prefix or suffix</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">   modifier (Section 2.4.2), and then appending the result to the URI-</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">   reference.</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete"></span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">   A variable defined as a list of values is substituted as a string of</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">   comma-separated single values when no explode modifier is given.  If</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">   the "*" modifier is used, then each value is separated by the default</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">   delimiter for the expression type.  If the "+" operator is used, then</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">   the variable name is prepended to the expansion list as if it were</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">   the initial value in the list.  If a partial modifier is indicated,</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">   the modifier is applied to the combined string of values.  The list</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">   expansion is then appended to the result string.</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete"></span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">   A variable defined as an associative array is expanded as a list of</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">   alternating key and value pairs, excluding any keys for which the</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">   corresponding value is undefined.  If no explode modifier is used,</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">   then the list is substituted as comma-separated single values.  If</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">   the "*" modifier is given, then the list is delimited as key=value</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">   pairs according to the default delimiters defined by the expression</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">   type.  If the "+" modifier is used, the values are substituted as in</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">   the "*" case, except that each key name is prefixed by the variable</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">   name and a ".", as in "name.key=value".</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete"></span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">   When a variable containing component values is given without an</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">   explode modifier, the value of each defined component is substituted,</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">   separated by a comma (",") character, in the order indicated by the</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">   variable's schema or, if the schema is unknown, in the order provided</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">   by the variable's value.  A structure of component values is expanded</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">   as a list of the component values in the order implied by a preorder</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">   (depth-first) traversal of that structure, excluding any components</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">   that are undefined.</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0075" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">   <span class="delete">When an explode modifier is used with an operator that substitutes</span></td><td> </td><td class="rblock">   <span class="insert">Regardless</span> of the <span class="insert">expression type,</span> a <span class="insert">variable that</span> is <span class="insert">undefined has</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">   variables as key=value pairs, the key is determined as follows.  If</span></td><td> </td><td class="rblock"><span class="insert">   no value.  A</span> variable <span class="insert">defined as</span> a <span class="insert">list or structure of</span> component</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">   the modifier is an asterisk ("*"), then each "key" is the name</span> of the</td><td> </td><td class="rblock">   <span class="insert">values is considered undefined</span> if the <span class="insert">list contains zero members or</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">   <span class="delete">component.  If the modifier is</span> a <span class="delete">plus ("+"), then each key</span> is <span class="delete">the</span></td><td> </td><td class="rblock"><span class="insert">   all of</span> the <span class="insert">structure's components</span> are <span class="insert">undefined.</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">   variable <span class="delete">name followed by</span> a <span class="delete">period (".") and the</span> component <span class="delete">name.  In</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">   both cases,</span> if the <span class="delete">component names have a hierarchical structure,</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">   then</span> the <span class="delete">component subnames</span> are <span class="delete">also appended to the key, each</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">   separated by a period.</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0076" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">   <span class="delete">When an explode modifier</span> is <span class="delete">used with the hierarchical ("/")</span></td><td> </td><td class="rblock">   <span class="insert">If a default value</span> is <span class="insert">provided for an undefined variable, as</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">   operator,</span> the <span class="delete">slash delimiter</span> is substituted <span class="delete">before each defined</span></td><td> </td><td class="rblock"><span class="insert">   described for Level 2 (and above) templates in Section 2.5, then</span> the</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">   component's value if</span> the <span class="delete">modifier is "*", or before each conjunction</span></td><td> </td><td class="rblock">   <span class="insert">default string</span> is substituted <span class="insert">in its place as</span> the <span class="insert">entire expansion</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">   of <span class="delete">component name</span> and <span class="delete">value (e.g., "name.value") if</span> the <span class="delete">modifier</span> is</td><td> </td><td class="rblock"><span class="insert">   for that varspec.  If all</span> of <span class="insert">the variables in an expression are</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">   <span class="delete">"+".</span></td><td> </td><td class="rblock"><span class="insert">   undefined</span> and <span class="insert">no defaults are given, then</span> the <span class="insert">expression's expansion</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock">   is <span class="insert">the empty string.</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0077" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">3.<span class="delete">5.  Simple e</span>xpansion: {var}</td><td> </td><td class="rblock">3.<span class="insert">2.2.  Simple String E</span>xpansion: {var}</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">   The default expression type when no operator is given is simple</td><td> </td><td class="right">   The default expression type when no operator is given is simple</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0078" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">   <span class="delete">expansion: the value of</span> each defined variable <span class="delete">is substituted</span> in the</td><td> </td><td class="rblock">   <span class="insert">string expansion.  For</span> each defined variable in the <span class="insert">variable-list,</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">   <span class="delete">order given, modified</span> as indicated by the optional <span class="delete">modifiers, with</span></td><td> </td><td class="rblock"><span class="insert">   modify its value</span> as indicated by the optional <span class="insert">modifiers (if any),</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">   each</span> value <span class="delete">separated by a comma character (",").  A variable</span> that <span class="delete">is</span></td><td> </td><td class="rblock"><span class="insert">   encode the</span> value <span class="insert">as UTF-8, pct-encode any octets</span> that are <span class="insert">not in the</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">   undefined has no value and thus is excluded from the expansion.  If</span></td><td> </td><td class="rblock"><span class="insert">   unreserved set, and</span> then <span class="insert">append</span> the <span class="insert">encoded value to</span> the <span class="insert">result</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">   all of the variables</span> are <span class="delete">undefined,</span> then the <span class="delete">expansion is</span> the <span class="delete">empty</span></td><td> </td><td class="rblock">   string.  <span class="insert">If more than one value is appended, separate each value with</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">   string.</td><td> </td><td class="rblock"><span class="insert">   a comma (",").</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">   For example,</td><td> </td><td class="right">   For example,</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">     foo := "fred"</td><td> </td><td class="right">     foo := "fred"</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">     "{foo}"        -&gt; "fred"</td><td> </td><td class="right">     "{foo}"        -&gt; "fred"</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">     "{foo,foo}"    -&gt; "fred,fred"</td><td> </td><td class="right">     "{foo,foo}"    -&gt; "fred,fred"</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">     "{bar,foo}"    -&gt; "fred"</td><td> </td><td class="right">     "{bar,foo}"    -&gt; "fred"</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0079" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">     "{bar<span class="delete">=</span>wilma}"  -&gt; "wilma"</td><td> </td><td class="rblock">     "{bar<span class="insert">|</span>wilma}"  -&gt; "wilma"</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0080" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">3.6.</span>  Reserved expansion: {+var}</td><td> </td><td class="rblock">   <span class="insert">Level 1 templates are limited to single variable expressions with no</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">   modifiers, defaults, or value structures.  Simple string expansion in</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">   Level 2 templates adds variable defaulting, as defined in</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">   Section 2.5.  Level 3 templates allow a list of variables.  Level 4</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">   templates add compound variable types and value modifiers, as</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">   follows:</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert"></span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">   For a variable defined as a single value string, the explode modifier</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">   has no effect.  The prefix modifier limits the expansion to the first</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">   max-length characters of that single value.  If the value contains</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">   pct-encoded triplets, multibyte UTF-8, or both, care must be taken to</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">   avoid splitting the value in mid-character: count each Unicode</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">   codepoint as one character.</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert"></span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">   For a variable defined as a list of values, when no value modifier is</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">   present or the explode modifier is given, the variable's string</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">   expansion consists of a concatenation of the individual values with</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">   each value separated by a comma (",").  A prefix modifier has no</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">   effect.</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert"></span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">   A variable defined as an associative array is expanded as a list of</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">   alternating key and value pairs, excluding any keys for which the</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">   corresponding value is undefined, when no value modifier is present.</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">   If the explode modifier is given, then the keys with defined values</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">   are expanded as "key=value" pairs instead of "key,value".  A prefix</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">   modifier has no effect.</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert"></span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">3.2.3.</span>  Reserved expansion: {+var}</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">   Reserved expansion is identical to simple expansion except that the</td><td> </td><td class="right">   Reserved expansion is identical to simple expansion except that the</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0081" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">   substituted values may contain characters in the reserved set.</td><td> </td><td class="rblock">   substituted values may contain characters in the reserved set.  <span class="insert">The</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">   reserved expansion operator "+" is defined for Level 2 templates (and</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">   above).</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">   For example,</td><td> </td><td class="right">   For example,</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">     foo  := "That's right!"</td><td> </td><td class="right">     foo  := "That's right!"</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">     "{foo}"        -&gt; "That%27s%20right%21"</td><td> </td><td class="right">     "{foo}"        -&gt; "That%27s%20right%21"</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">     "{+foo}"       -&gt; "That%27s%20right!"</td><td> </td><td class="right">     "{+foo}"       -&gt; "That%27s%20right!"</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">     base := "http://example.com/home/"</td><td> </td><td class="right">     base := "http://example.com/home/"</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">     "{base}index"  -&gt; "http%3A%2F%2Fexample.com%2Fhome%2Findex"</td><td> </td><td class="right">     "{base}index"  -&gt; "http%3A%2F%2Fexample.com%2Fhome%2Findex"</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">     "{+base}index" -&gt; "http://example.com/home/index"</td><td> </td><td class="right">     "{+base}index" -&gt; "http://example.com/home/index"</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0082" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">   The same expansion process is followed as in Section <span class="delete">3.5</span> except that,</td><td> </td><td class="rblock">   The same expansion process is followed as in Section <span class="insert">3.2.2</span> except</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">   instead of <span class="delete">replacing</span> any <span class="delete">character within each value string</span> that <span class="delete">is</span></td><td> </td><td class="rblock">   that, instead of <span class="insert">"pct-encode</span> any <span class="insert">octets</span> that <span class="insert">are</span> not in the</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">   not in the unreserved <span class="delete">set with its corresponding sequence of pct-</span></td><td> </td><td class="rblock">   unreserved <span class="insert">set", we pct-encode</span> any <span class="insert">octets</span> that <span class="insert">are</span> not in <span class="insert">either</span> the</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">   encoded octets, replace</span> any <span class="delete">character within each value string</span> that</td><td> </td><td class="rblock">   reserved <span class="insert">or unreserved sets.</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">   <span class="delete">is</span> not in the <span class="delete">set of unreserved or</span> reserved <span class="delete">characters with its</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">   corresponding sequence of pct-encoded octets.</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0083" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">3.<span class="delete">7.  Path-style parameter expansion: {;</span>var}</td><td> </td><td class="rblock">3.<span class="insert">2.4.  Label expansion with dot-prefix: {.</span>var}</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0084" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">   <span class="delete">TBD.</span></td><td> </td><td class="rblock">   <span class="insert">The dot (".") operator indicates that the expression type is label</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">   expansion, which can be useful for describing URI spaces with varying</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">   domain names or path selectors (e.g., filename extensions).</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0085" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">3.8.  Form-style parameter expansion: {?var}</span></td><td> </td><td class="rblock"><span class="insert">     For each variable in the variable-list, do one of</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0086" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">   <span class="delete">TBD.</span></td><td> </td><td class="rblock">   <span class="insert">    a) if the variable has a defined value</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0087" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">3.9.  Hierarchical path expansion: {/var}</span></td><td> </td><td class="rblock">           <span class="insert">1) modify its value as indicated by the optional</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">              modifiers (if any);</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0088" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">   <span class="delete">TBD.</span></td><td> </td><td class="rblock">   <span class="insert">        2) encode the value as UTF-8;</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0089" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">3.10.</span>  Label expansion with <span class="delete">dot-prefix: {.var}</span></td><td> </td><td class="rblock">           <span class="insert">3) pct-encode any octets that are not in the</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">              unreserved set;</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert"></span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">           4) append "." to the result string; and,</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert"></span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">           5) append the encoded value to the result string.</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert"></span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">       b) if the variable is undefined and a default is given,</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert"></span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">           1) encode the default string as UTF-8;</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert"></span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">           2) append "." to the result string; and,</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert"></span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">           3) append the default to the result string.</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert"></span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">       c) the variable is undefined and has no default,</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">          so ignore this variable.</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert"></span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">   Since "." is not in the reserved set, a value that contains a "." has</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">   the effect of adding multiple labels.</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert"></span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">   For example,</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert"></span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">     foo := "fred"</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert"></span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">     "{foo}"        -&gt; ".fred"</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">     "{foo,foo}"    -&gt; ".fred.fred"</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">     "{bar,foo}"    -&gt; ".fred"</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">     "{bar|wilma}"  -&gt; ".wilma"</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock">                                                                         </td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock">   Label expansion <span class="insert">only applies to Level 3 and Level 4 templates.  Level</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">   4 templates add compound variable types and value modifiers, as</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">   follows:</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert"></span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">   For a variable defined as a single value string, the explode modifier</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">   has no effect.  The prefix modifier limits the expansion to the first</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">   max-length characters of that single value.  If the value contains</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">   pct-encoded triplets, multibyte UTF-8, or both, care must be taken to</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">   avoid splitting the value in mid-character: count each Unicode</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">   codepoint as one character.</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert"></span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">   For a variable defined as a list of values, when no value modifier is</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">   present or the explode modifier is given, the variable's string</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">   expansion consists of a concatenation of the individual defined</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">   values with each value prepended by a dot (".").  A prefix modifier</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">   has no effect.</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert"></span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">   When no value modifier is present, a variable defined as an</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">   associative array is expanded by appending the (key, value) pairs as</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">   alternating labels (i.e., ".key.value"), but excluding any keys for</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">   which the corresponding value is undefined.  If the explode modifier</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">   is given, then the keys with defined values are expanded as</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">   ".key=value" instead of ".key.value".  A prefix modifier has no</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">   effect.</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert"></span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">3.2.5.  Path segment expansion: {/var}</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert"></span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">   The slash ("/") operator indicates that the expression type is</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">   hierarchical path segment expansion, which can be useful for</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">   describing URI path hierarchies.</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert"></span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">     For each variable in the variable-list, do one of</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert"></span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">       a) if the variable has a defined value</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert"></span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">           1) modify its value as indicated by the optional</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">              modifiers (if any);</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert"></span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">           2) encode the value as UTF-8;</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert"></span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">           3) pct-encode any octets that are not in the</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">              unreserved set;</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert"></span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">           4) append "/" to the result string; and,</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert"></span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">           5) append the encoded value to the result string.</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert"></span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">       b) if the variable is undefined and a default is given,</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert"></span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">           1) encode the default string as UTF-8;</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert"></span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">           2) append "/" to the result string; and,</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert"></span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">           3) append the default to the result string.</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert"></span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">       c) the variable is undefined and has no default,</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">          so ignore this variable.</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert"></span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">   Note that the expansion process for path segment expansion is</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">   identical to that of label expansion aside from the substitution of</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">   "/" instead of ".".</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert"></span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">   For example,</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert"></span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">     foo := "fred"</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert"></span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">     "{foo}"        -&gt; "/fred"</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">     "{foo,foo}"    -&gt; "/fred/fred"</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">     "{bar,foo}"    -&gt; "/fred"</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">     "{bar|wilma}"  -&gt; "/wilma"</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert"></span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">   Label expansion only applies to Level 3 and Level 4 templates.  Level</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">   4 templates add compound variable types and value modifiers, as</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">   follows:</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert"></span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">   For a variable defined as a single value string, the explode modifier</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">   has no effect.  The prefix modifier limits the expansion to the first</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">   max-length characters of that single value.  If the value contains</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">   pct-encoded triplets, multibyte UTF-8, or both, care must be taken to</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">   avoid splitting the value in mid-character: count each Unicode</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">   codepoint as one character.</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert"></span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">   For a variable defined as a list of values, when no value modifier is</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">   present or the explode modifier is given, the variable's string</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">   expansion consists of a concatenation of the individual defined</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">   values with each value prepended by a slash ("/").  A prefix modifier</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">   has no effect.</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert"></span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">   When no value modifier is present, a variable defined as an</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">   associative array is expanded by appending the (key, value) pairs as</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">   alternating segments (i.e., "/key/value"), but excluding any keys for</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">   which the corresponding value is undefined.  If the explode modifier</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">   is given, then the keys</span> with <span class="insert">defined values are expanded as</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">   "/key=value" instead of "/key/value".  A prefix modifier has no</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">   effect.</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert"></span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">3.2.6.  Path-style parameter expansion: {;var}</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">   TBD.</td><td> </td><td class="right">   TBD.</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0090" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">4.  Examples</span></td><td> </td><td class="rblock"><span class="insert">3.2.7.  Form-style query expansion: {?var}</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">   TBD.</td><td> </td><td class="right">   TBD.</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0091" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">5</span>.  Security Considerations</td><td> </td><td class="rblock"><span class="insert">4</span>.  Security Considerations</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">   A URI Template does not contain active or executable content.  Other</td><td> </td><td class="right">   A URI Template does not contain active or executable content.  Other</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0092" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">   security considerations are the same as those for URIs, <span class="delete">see</span> section 7</td><td> </td><td class="rblock">   security considerations are the same as those for URIs, <span class="insert">as described</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">   of [RFC3986].</td><td> </td><td class="rblock"><span class="insert">   in</span> section 7 of [RFC3986].</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0093" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">6</span>.  IANA Considerations</td><td> </td><td class="rblock"><span class="insert">5</span>.  IANA Considerations</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">   No IANA actions are required by this document.</td><td> </td><td class="right">   No IANA actions are required by this document.</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0094" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">7</span>.  Acknowledgments</td><td> </td><td class="rblock"><span class="insert">6</span>.  Acknowledgments</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">   The following people made significant contributions to this</td><td> </td><td class="right">   The following people made significant contributions to this</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">   specification: Mike Burrows, Michaeljohn Clement, DeWitt Clinton,</td><td> </td><td class="right">   specification: Mike Burrows, Michaeljohn Clement, DeWitt Clinton,</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">   John Cowan, James H. Manger, and James Snell.</td><td> </td><td class="right">   John Cowan, James H. Manger, and James Snell.</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0095" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">8</span>.  Normative References</td><td> </td><td class="rblock"><span class="insert">7</span>.  Normative References</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">   [ASCII]    American National Standards Institute, "Coded Character</td><td> </td><td class="right">   [ASCII]    American National Standards Institute, "Coded Character</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">              Set - 7-bit American Standard Code for Information</td><td> </td><td class="right">              Set - 7-bit American Standard Code for Information</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">              Interchange", ANSI X3.4, 1986.</td><td> </td><td class="right">              Interchange", ANSI X3.4, 1986.</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">   [RFC2119]  Bradner, S., "Key words for use in RFCs to Indicate</td><td> </td><td class="right">   [RFC2119]  Bradner, S., "Key words for use in RFCs to Indicate</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">              Requirement Levels", BCP 14, RFC 2119, March 1997.</td><td> </td><td class="right">              Requirement Levels", BCP 14, RFC 2119, March 1997.</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">   [RFC2978]  Freed, N. and J. Postel, "IANA Charset Registration</td><td> </td><td class="right">   [RFC2978]  Freed, N. and J. Postel, "IANA Charset Registration</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">              Procedures", BCP 19, RFC 2978, October 2000.</td><td> </td><td class="right">              Procedures", BCP 19, RFC 2978, October 2000.</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr bgcolor="gray" ><td></td><th><a name="part-l7" /><small>skipping to change at</small><em> page 23, line 41</em></th><th> </th><th><a name="part-r7" /><small>skipping to change at</small><em> page 27, line 9</em></th><td></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">   Here is example Python code that parses a URI Template expression and</td><td> </td><td class="right">   Here is example Python code that parses a URI Template expression and</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">   returns the operator, argument, and variables as a tuple.  The</td><td> </td><td class="right">   returns the operator, argument, and variables as a tuple.  The</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">   variables are returned as a dictionary of variable names mapped to</td><td> </td><td class="right">   variables are returned as a dictionary of variable names mapped to</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">   their default values.  If no default is given then the name maps to</td><td> </td><td class="right">   their default values.  If no default is given then the name maps to</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">   None.</td><td> </td><td class="right">   None.</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">   TBD.</td><td> </td><td class="right">   TBD.</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">Appendix B.  Revision History (to be removed by RFC Editor)</td><td> </td><td class="right">Appendix B.  Revision History (to be removed by RFC Editor)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0096" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock">   <span class="insert">05 - Introduced levels to differentiate between legacy, partial, and</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">   full implementations of URI Templates.  Changed the default indicator</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">   to pipe ("|") to allow the defaults to contain the equals character</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">   and thus remove the need for complex defaulting for the different</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">   variable types.  Removed suffix, remainder, and labelled value</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">   expansion because there didn't seem much interest in them.  Clarified</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">   that templates and values are processed as sequences of Unicode</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">   codepoints rather than prematurely encoded as UTF-8, since that is</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">   easier to explain and more consistent with common language routines</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">   for processing Unicode strings.</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock">                                                                         </td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">   04 - Changed the operator syntax to a single character that is</td><td> </td><td class="right">   04 - Changed the operator syntax to a single character that is</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">   analogous to its reserved role within the URI generic syntax,</td><td> </td><td class="right">   analogous to its reserved role within the URI generic syntax,</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">   resulting in templates that are far more readable for the common</td><td> </td><td class="right">   resulting in templates that are far more readable for the common</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">   cases.  Added value modifiers for prefix and suffix expansion.  Added</td><td> </td><td class="right">   cases.  Added value modifiers for prefix and suffix expansion.  Added</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">   explode modifiers to allow expansion of complex variables and lists</td><td> </td><td class="right">   explode modifiers to allow expansion of complex variables and lists</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">   according to (external) variable types or schema.  Replaced use of</td><td> </td><td class="right">   according to (external) variable types or schema.  Replaced use of</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">   "expansion" with "expression", since expansion is traditionally used</td><td> </td><td class="right">   "expansion" with "expression", since expansion is traditionally used</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">   to refer to the result after expanding a macro (not the macro</td><td> </td><td class="right">   to refer to the result after expanding a macro (not the macro</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">   itself).  Made applicable to any hypertext reference string, such</td><td> </td><td class="right">   itself).  Made applicable to any hypertext reference string, such</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">   that the process for template expansion also includes transforming</td><td> </td><td class="right">   that the process for template expansion also includes transforming</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr bgcolor="gray" ><td></td><th><a name="part-l8" /><small>skipping to change at</small><em> page 24, line 23</em></th><th> </th><th><a name="part-r8" /><small>skipping to change at</small><em> page 28, line 7</em></th><td></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">   02 - Added operators and came up with coherent percent-encoding and</td><td> </td><td class="right">   02 - Added operators and came up with coherent percent-encoding and</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">   reserved character story.  Added large examples section which is</td><td> </td><td class="right">   reserved character story.  Added large examples section which is</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">   extracted and tested against the implementation.</td><td> </td><td class="right">   extracted and tested against the implementation.</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">   01</td><td> </td><td class="right">   01</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">   00 - Initial Revision.</td><td> </td><td class="right">   00 - Initial Revision.</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">Authors' Addresses</td><td> </td><td class="right">Authors' Addresses</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0097" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">   Joe Gregorio<span class="delete"> (editor)</span></td><td> </td><td class="rblock">   Joe Gregorio</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">   Google</td><td> </td><td class="right">   Google</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">   Email: joe@bitworking.org</td><td> </td><td class="right">   Email: joe@bitworking.org</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">   URI:   http://bitworking.org/</td><td> </td><td class="right">   URI:   http://bitworking.org/</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">   Roy T. Fielding (editor)</td><td> </td><td class="right">   Roy T. Fielding (editor)</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0098" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">   <span class="delete">Day Software</span></td><td> </td><td class="rblock">   <span class="insert">Adobe Systems Incorporated</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0099" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">   Email: <span class="delete">fielding@day.com</span></td><td> </td><td class="rblock">   Email: <span class="insert">fielding@gbiv.com</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">   URI:   <span class="delete">http://www.day.com/</span></td><td> </td><td class="rblock">   URI:   <span class="insert">http://roy.gbiv.com/</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0100" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">   Marc Hadley<span class="delete"> (editor)</span></td><td> </td><td class="rblock">   Marc Hadley</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">   Oracle</td><td> </td><td class="right">   Oracle</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">   Email: Marc.Hadley@oracle.com</td><td> </td><td class="right">   Email: Marc.Hadley@oracle.com</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">   URI:   http://oracle.com/</td><td> </td><td class="right">   URI:   http://oracle.com/</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0101" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">   Mark Nottingham<span class="delete"> (editor)</span></td><td> </td><td class="rblock">   Mark Nottingham</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">   Email: mnot@pobox.com</td><td> </td><td class="right">   Email: mnot@pobox.com</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">   URI:   http://mnot.net/</td><td> </td><td class="right">   URI:   http://mnot.net/</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0102" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">                                                                         </span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">   David Orchard</td><td> </td><td class="right">   David Orchard</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">   URI:   http://www.pacificspirit.com/</td><td> </td><td class="right">   URI:   http://www.pacificspirit.com/</td><td class="lineno" valign="top"></td></tr>

     <tr><td></td><td class="left"></td><td> </td><td class="right"></td><td></td></tr>
     <tr bgcolor="gray"><th colspan="5" align="center"><a name="end">&nbsp;End of changes. 102 change blocks.&nbsp;</a></th></tr>
     <tr class="stats"><td></td><th><i>532 lines changed or deleted</i></th><th><i> </i></th><th><i>702 lines changed or added</i></th><td></td></tr>
     <tr><td colspan="5" align="center" class="small"><br/>This html diff was produced by rfcdiff 1.34. The latest version is available from <a href="http://www.tools.ietf.org/tools/rfcdiff/" >http://tools.ietf.org/tools/rfcdiff/</a> </td></tr>
   </table>
   </body>
   </html>
